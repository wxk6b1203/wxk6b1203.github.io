{"pages":[{"title":"categories","text":"","link":"/categories/index.html"},{"title":"about","text":"improvedNPCä¸€æ—¥æ‰“ç ï¼Œç»ˆç”Ÿä¸ºå†œ äººç”Ÿå¦‚é€†æ—…ï¼Œæˆ‘äº¦æ˜¯è·¯äººã€‚ https://blog.wxk.at æ˜¯ wxk6b1203.github.io çš„é•œåƒï¼Œhttps://blog.wxk.me æ˜¯å›½å†…coding pageçš„é•œåƒã€‚","link":"/about/index.html"},{"title":"tags","text":"","link":"/tags/index.html"}],"posts":[{"title":"CLRSæ»‘ç¨½å¯¼è®º (1) : AVLæ ‘","text":"&emsp;&emsp;åœ¨äºŒå‰æ ‘çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬ä¼šæ¥è§¦åˆ°å¾ˆå¤šä¸åŒçš„æ ‘ã€‚å…¶ä¸­ï¼Œç”¨å¾—æœ€ä¸ºæ™®éçš„ï¼Œæ˜¯äºŒå‰æœç´¢æ ‘ã€‚è€Œä¸ºæå‡äºŒå‰æ ‘æœç´¢çš„æ•ˆç‡ï¼Œåˆå¼•å…¥è‡ªå¹³è¡¡äºŒå‰æ ‘çš„æ¦‚å¿µã€‚è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘æ˜¯æŒ‡é€šè¿‡å¤„ç†å¯ä»¥å®ç°å­æ ‘ç›¸å¯¹å¹³è¡¡ï¼Œå³ä¸æç«¯åœ°åå‘ä¸€è¾¹çš„äºŒå‰æœç´¢æ ‘ã€‚ç”±äºç›¸å¯¹å¹³è¡¡çš„ç‰¹æ€§ï¼Œæ ‘å¯ä»¥å®ç°æŸ¥è¯¢ã€æ’å…¥ã€åˆ é™¤æ“ä½œåœ¨æ—¶é—´ä¸Šçš„ä¼˜åŒ–ã€‚ &emsp;&emsp;AVLæ ‘æ˜¯æœ€æ—©è¢«æ„é€ å‡ºæ¥çš„è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘ã€‚å®ƒçš„æ„æˆæ¯”è¾ƒç®€å•ï¼Œç»´æŠ¤çš„åªæœ‰æ ‘çš„é«˜åº¦ä¸€ä¸ªå› å­ã€‚åŒæ—¶ï¼Œå¯¹è¯¥å› å­è¿›è¡Œä¿®é¥°ï¼Œå¯ä»¥æ¼”å˜æˆç»´æŠ¤æ ‘çš„é«˜å·®ã€‚ä½†æ˜¯â€¦â€¦å…¶å®ï¼Œä½œè€…æå‡ºäº†è¿™ä¸ªæ¨¡å‹ï¼Œä½†å¹¶æ²¡æœ‰æŒ‡å®šæŸç§å®ç°ã€‚å®ç°çš„æ–¹æ³•å¾ˆå¤šï¼Œä½†éƒ½æ˜¯åœ¨ç»´æŠ¤å®ƒçš„å®šä¹‰ã€‚å¯ä»¥å¯¹æ¯ä¸ªæ ‘é«˜è¿›è¡Œè®°å½•ï¼Œä¹Ÿå¯ä»¥ç”¨å¹³è¡¡å› å­çš„æ–¹æ³•æ¥æ ‡è®°åç§»æ–¹å‘ã€‚è¿™é‡Œåˆ©ç”¨æ ‘çš„é«˜å·®è¿›è¡Œå¤„ç†ã€‚å…¶å®ç»å¤§å¤šæ•°çš„è¯´æ³•éƒ½æ˜¯å¹³è¡¡å› å­ï¼Œä½†ç»´æŠ¤çš„æ–¹å¼ä¸åŒã€‚åªæ˜¯å®ç°çš„ä¸åŒæŠ€å·§ç½¢äº†ã€‚ ä¸€ã€å®šä¹‰ AVLæ ‘çš„é€’å½’å®šä¹‰æ˜¯ï¼Œå¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘ï¼Œä»–ä»¬çš„é«˜å·®ä¸è¶…è¿‡1ã€‚$$x.h = max(x.left.h, x.right.h)+1$$å³ï¼š$$|h_l-h_r| \\le 1$$è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå¯ä»¥å®ç°æ ‘é«˜ä»…ä¸º$O(log\\ n)$ ã€‚é‚£ä¹ˆï¼ŒæŸ¥è¯¢ã€æ’å…¥ã€åˆ é™¤çš„æ—¶é—´å¤æ‚åº¦éƒ½ç±»ä¼¼åœ°ä¸º$O(log\\ n)$ã€‚ ä¸‹é¢æˆ‘ä»¬æ¥è¯æ˜æ—¶é—´å¤æ‚åº¦åº”è¯¥ä¸º$O(log\\ n)$ã€‚ å¦‚æœä¸€æ£µæ ‘æ˜¯åŠ¨çš„ï¼Œé‚£ä»–çš„é«˜åº¦å°±ä¸å¥½å¤„ç†äº†ã€‚ä½†å¦‚æœå‡è®¾æ˜¯é™æ€çš„ï¼Œä¸€åˆ‡éƒ½ä¼šå¥½å¤„ç†å¾—å¤šã€‚æˆ‘ä»¬å‡è®¾æ ‘é«˜ä¸º$h$ï¼Œ åˆ™è®¾é«˜ä¸º$h$çš„æ ‘çš„èŠ‚ç‚¹æ•°ä¸º$N_h$ã€‚ æˆ‘ä»¬å®šä¹‰ï¼š$N_h$ æ˜¯é«˜ä¸º h çš„æ ‘ä¸­æ‰€å«æœ‰æœ€å°‘çš„èŠ‚ç‚¹ï¼ˆ$N_h$ is the min number nodes in an tree of high hï¼‰ï¼ŒåŒæ—¶å‡è®¾å·¦å­æ ‘æ¯”å³å­æ ‘æ°¸è¿œé«˜1ã€‚åˆ™å¾—å‡ºï¼š ï¼ˆ1ï¼‰å½“é«˜åº¦ä¸ºå¸¸æ•°æ—¶ï¼Œæ—¶é—´ã€ç©ºé—´å¤æ‚åº¦ä¹Ÿä¸ºå¸¸æ•°ã€‚å³ï¼š $$N_{o(1)} = O(1)$$ ï¼ˆ2ï¼‰å½“æ ‘çš„é«˜åº¦ä¸º$h$æ—¶ï¼Œ $$N_h = 1 + N_{h-1}+N_{h-2}$$ (3) æˆ‘ä»¬ç”¨å®ƒå’Œæ–æ³¢é‚£å¥‘æ•°åˆ—è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶åˆ©ç”¨æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç‰¹æ€§è¿›è¡ŒåŒ–ç®€ï¼š $$N_h = F_h + 1 (F_h \\ is\\ the \\ Fib\\ sequence)$$ $$N_h &gt; N_{h-1} + N_{h-2} = F_h \\ (F_h \\ is\\ the \\ Fib\\ sequence)$$ è€Œæˆ‘ä»¬çŸ¥é“ï¼Œæ–æ³¢é‚£å¥‘æ•°åˆ—æ˜¯æŒ‡æ•°çº§å¢é•¿çš„å‡½æ•°ï¼Œ$F(n) = O(2^n)$ ä¾æ®å®ƒçš„æŒ‡æ•°è¾¹ç•Œï¼š $$N_h &gt; F_h = \\frac{\\varphi^h}{\\sqrt{5}} = O(2^n)$$ $$\\lim _{h \\rightarrow \\infty}{N_h} &gt; F_h = \\varphi^h$$ $$log\\ N_h = h$$ that is: $$h = O(log\\ n)$$ è‡ªæ­¤ï¼ŒAVLæ ‘æ˜¯å¹³è¡¡æ ‘çš„è¯æ˜ç»“æŸã€‚åªè¦ä»–æ˜¯å¹³è¡¡çš„ï¼Œé‚£ä»–çš„æŸ¥è¯¢(query)ã€åˆ é™¤(delete)ã€æ’å…¥(insert)éƒ½æ˜¯å¯¹æ•°æ—¶é—´å¤æ‚åº¦çš„ã€‚ ç„¶åï¼Œæˆ‘ä»¬æ¥ä¸€æ­¥æ­¥ç”¨æœ€åŸºç¡€çš„æ–¹å¼å®ç°å®ƒæ—¢ç„¶ä¸ºäºŒå‰æœç´¢æ ‘ï¼Œé‚£ä¹ˆä»–çš„æœç´¢è¿‡ç¨‹å’Œæ™®é€šçš„æœç´¢æ ‘æ˜¯ä¸€æ ·çš„ã€‚ä½œä¸ºå¹³è¡¡æ ‘ï¼Œä»–çš„å…³é”®ç‚¹åœ¨äºä»–çš„æ’å…¥ä¸åˆ é™¤ã€‚å› ä¸ºæ’å…¥ä¸åˆ é™¤ä¼šæ”¹å˜æ ‘çš„å½¢æ€ã€‚æ‰€ä»¥ï¼Œè¿™é‡Œæˆ‘ä»¬åªæè¿°æ’å…¥ä¸åˆ é™¤ã€‚æŸ¥è¯¢éƒ¨åˆ†ï¼Œè¯·å‚é˜…CLRS v3çš„ç¬¬12ç« ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å¼€å§‹æ„é€ ä¸€æ£µæ ‘ã€‚æ ‘çš„èŠ‚ç‚¹è¦æœ‰å¦‚ä¸‹çš„å…³é”®è¯ï¼šå·¦å­æ ‘ã€å³å­æ ‘ã€äº²ä»£çš„æŒ‡é’ˆï¼Œæ ‘é«˜çš„å¹³è¡¡å› å­ï¼ŒèŠ‚ç‚¹çš„æƒå€¼ã€‚æ ‘è¦åŒ…å«æœ‰æ ¹èŠ‚ç‚¹ï¼Œç©ºèŠ‚ç‚¹ï¼ˆä¸ºäº†æ–¹ä¾¿å®ç°ä¸ä¿æŠ¤ä¸è¶Šç•Œï¼‰ã€‚ ä¸€ä¸ªç›´è§‚çš„æ¼”ç¤ºï¼šä½äºvisualgoçš„é“¾æ¥ (è¦æ‰‹åŠ¨è°ƒåˆ°AVLğŸŒ²éƒ¨åˆ†) 12345678910111213141516171819struct node { int key; // Key int avlK; // load balance factor node *left, *right, *p;// respective pointers node() : key(0), avlK(0), left(NULL), right(NULL), p(NULL) {} node(int key, int level = 0) : key(key), avlK(level), left(NULL), right(NULL), p(NULL) {}};struct AVLtree { node *root; node *nil; AVLtree() { nil = new node(-1, -1); root = nil; nil-&gt;right = nil; nil-&gt;left = nil; }}; åŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›å…¬ç”¨çš„å‡½æ•°ï¼š123456789101112131415161718int max(int a, int b) { return a &gt; b ? a : b; }int inOrder(AVLtree &amp;T, node *x) { if (x != T.nil) { inOrder(T, x-&gt;left); printf(\"%d : %d\\n\", x-&gt;key, x-&gt;avlK); inOrder(T, x-&gt;right); } return 1;}node *getMinPointer(AVLtree &amp;T, node *x) { node *t = x; while (t-&gt;left != T.nil) { t = t-&gt;left; } return t;} ç„¶åæˆ‘ä»¬æ¥å®šä¹‰æ—‹è½¬ã€‚ æ—‹è½¬æ˜¯ä¸ºäº†é™ä½æ ‘çš„é«˜åº¦ï¼Œä»¥è¾¾åˆ°å¹³è¡¡å±€éƒ¨çš„éœ€æ±‚ã€‚å¹³è¡¡æ ‘ä¸­çš„å…³é”®æ­¥éª¤éƒ½æ˜¯ä¸æ—‹è½¬æœ‰å…³ã€‚æ—‹è½¬åŒ…æ‹¬å·¦æ—‹å’Œå³æ—‹ï¼Œä¸¤ç§æ–¹æ³•æ˜¯å¯¹ç§°çš„ã€‚åŒæ—¶ï¼Œç”±äºAVLæ ‘ä¸­å¹³è¡¡å› å­çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬éœ€è¦ä¿®é¥°æ—‹è½¬åèŠ‚ç‚¹çš„å¹³è¡¡å› å­ã€‚å¯¹äºAVLæ ‘æ¥è¯´ï¼Œä»–çš„å¹³è¡¡å¯ä»¥ç”¨å¹³è¡¡å› å­æ¥è°ƒæ§ã€‚ è€Œè¿™é‡Œå¹³è¡¡å› å­çš„ç»´æŠ¤æ–¹æ³•æ˜¯ï¼Œ$ v.h = max(v.left.h,\\ v.right.h)+1 $ã€‚æ‰€ä»¥ï¼Œå®ƒå·¦å³å­æ ‘é«˜å·®å·®åŒºé—´ä¸º$[-2, 2]$ã€‚å¦‚æœæ°å¥½é‡åˆ°æœ‰äº›èŠ‚ç‚¹abs(x) == 2ï¼Œåˆ™è¯æ˜ï¼Œæ ‘çš„é«˜åº¦éœ€è¦è°ƒèŠ‚ã€‚äºæ˜¯ä¹é€šè¿‡æ—‹è½¬æ¥è¾¾åˆ°ç›®çš„ã€‚ ä»¥ä¸‹æ˜¯æ—‹è½¬éƒ¨åˆ†çš„ä»£ç ï¼šï¼ˆå’ŒCLRS v3çº¢é»‘æ ‘çš„æ—‹è½¬~å‡ ä¹æ— å¼‚~æ²¡æœ‰å·®åˆ«ï¼‰ 1234567891011121314151617181920// This is the left version. Reverse the direction will be the right version.int leftRotate(AVLtree &amp;T, node *x) { node *y = x-&gt;right; x-&gt;right = y-&gt;left; if (y-&gt;left != T.nil) { y-&gt;left-&gt;p = x; } y-&gt;p = x-&gt;p; if (x-&gt;p == T.nil) { T.root = y; } else if (x == x-&gt;p-&gt;left) { x-&gt;p-&gt;left = y; } else { x-&gt;p-&gt;right = y; } y-&gt;left = x; x-&gt;p = y; return 1;} å³æ—‹ï¼šï¼ˆå…¶å®å·®ä¸å¤šçš„ï¼Œå°±æ˜¯å·¦æ—‹çš„é€†ï¼‰ 12345678910111213141516171819int rightRotate(AVLtree &amp;T, node *x) { node *y = x-&gt;left; x-&gt;left = y-&gt;right; if (y-&gt;right != T.nil) { y-&gt;right-&gt;p = x; } y-&gt;p = x-&gt;p; if (x-&gt;p == T.nil) { T.root = y; } else if (x == x-&gt;p-&gt;right) { x-&gt;p-&gt;right = y; } else { x-&gt;p-&gt;left = y; } y-&gt;right = x; x-&gt;p = y; return 1;} ç„¶åå¤„ç†æ’å…¥éƒ¨åˆ†ã€‚æ’å…¥éƒ¨åˆ†çš„å¼€å§‹è·Ÿæ™®é€šäºŒå‰æœç´¢æ ‘ä¸€è‡´ï¼Œåªä¸è¿‡åˆ°äº†æ’å…¥å®Œæ¯•ä»¥åï¼Œè¦å‘åè½®è¯¢å…¶å¹³è¡¡å› å­ä»¥ä¿®æ­£æ ‘çš„å¹³è¡¡æ€§ã€‚ 123456789101112131415161718192021222324252627282930313233343536/** * Procedure Insert: * TODO: insert the target node into one tree. * param: * T: the target tree * ins: the node to be inserted */int Insert(AVLtree &amp;T, node *ins) { // y: trace x's parent; // x: trace y's parent; node *x, *y; // initalize x, y y = T.nil; x = T.root; while (x != T.nil) { // trace the pos y = x; if (ins-&gt;key &lt; x-&gt;key) { x = x-&gt;left; } else x = x-&gt;right; } // Go as routinue; ins-&gt;p = y; // Bind its parent if (y == T.nil) { // Case of only one node T.root = ins; y = T.root; } else if (ins-&gt;key &lt; y-&gt;key) { y-&gt;left = ins; } else { y-&gt;right = ins; } ins-&gt;left = T.nil; ins-&gt;right = T.nil; insertFix(T, ins); // Invoke the fix procedure. return 0; // Status code. Just persional convention.} &emsp;&emsp;ä¸Šé¢çš„ç¬¬34è¡Œï¼Œè½¬åˆ°äº†ä¿®æ­£æ ‘çš„ç»“æ„çš„éƒ¨åˆ†ã€‚æ’å…¥ä¹‹åï¼Œæ ‘å¯èƒ½é‡åˆ°å¹³è¡¡é—®é¢˜ï¼šå·¦å­æ ‘æ¯”å³å­æ ‘é«˜2ï¼ˆåè¿‡æ¥äº¦ç„¶ï¼‰ï¼Œè¿™æ ·å°±æ‰“ç ´äº†æ ‘çš„å¹³è¡¡æ€§ã€‚å¯èƒ½çš„æƒ…å†µå¦‚ä¸‹å›¾ï¼š åˆå¦‚ï¼š é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±é€šè¿‡å‘ä¸Šè¿½æº¯å¹³è¡¡å› å­ï¼Œè¿›è€Œæ—‹è½¬ä½¿ä¹‹å¹³è¡¡ã€‚ å¯¹äºç¬¬ä¸€ç§ï¼Œæˆ‘ä»¬é‡‡ç”¨è¿™æ ·çš„æ–¹å¼ï¼š ç„¶åï¼Œæˆ‘ä»¬åˆå‘ç°ï¼Œç¬¬äºŒç§æƒ…å†µå¯ä»¥è½¬æ¢å˜æˆç¬¬ä¸€ç§ã€‚ å—¯ã€‚å¾ˆå¥½ã€‚å¤šèŠ‚ç‚¹çš„æ—¶å€™ï¼Œå…¶å®ä¹Ÿæ˜¯ç›¸è¿‘çš„ã€‚ è¿™é‡Œæœ€å›°éš¾çš„åœ°æ–¹åœ¨äºç»´æŠ¤å¹³è¡¡å› å­ã€‚æ—¢è¦æ˜¯å…¶æ­£ç¡®è¡¨è¾¾å½“å‰çŠ¶æ€ä¸‹å€¾æ–œçš„æ–¹å‘ï¼Œåˆè¦å¯¹ç›¸åº”èŠ‚ç‚¹è¿›è¡Œæ—‹è½¬ã€‚ æ‰€ä»¥æˆ‘ä»¬æ¥fixå®ƒã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950int insertFix(AVLtree &amp;T, node *x) { // åŠ¡å¿…è¦å°å¿ƒ bool Flag = 0; node *z = NULL; int highTmp = 0; node *y = NULL; while (x != T.root) { Flag = 0; y = x-&gt;p; highTmp++; if (highTmp &gt; y-&gt;avlK) { y-&gt;avlK = highTmp; } if (y-&gt;left-&gt;avlK - y-&gt;right-&gt;avlK &gt;= 2) { Flag = 1; if (x-&gt;right-&gt;avlK &gt; x-&gt;left-&gt;avlK) { leftRotate(T, x); x-&gt;avlK = max(x-&gt;left-&gt;avlK, x-&gt;right-&gt;avlK) + 1; y-&gt;avlK = max(y-&gt;left-&gt;avlK, y-&gt;right-&gt;avlK) + 1; x = y-&gt;left; } rightRotate(T, y); y-&gt;avlK = max(y-&gt;left-&gt;avlK, y-&gt;right-&gt;avlK) + 1; x-&gt;avlK = max(x-&gt;left-&gt;avlK, x-&gt;right-&gt;avlK) + 1; // DO Sth } else if (y-&gt;right-&gt;avlK - y-&gt;left-&gt;avlK &gt;= 2) { Flag = 1; if (x-&gt;left-&gt;avlK &gt; x-&gt;right-&gt;avlK) { rightRotate(T, x); x-&gt;avlK = max(x-&gt;left-&gt;avlK, x-&gt;right-&gt;avlK) + 1; y-&gt;avlK = max(y-&gt;left-&gt;avlK, y-&gt;right-&gt;avlK) + 1; x = y-&gt;right; } leftRotate(T, y); y-&gt;avlK = max(y-&gt;left-&gt;avlK, y-&gt;right-&gt;avlK) + 1; x-&gt;avlK = max(x-&gt;left-&gt;avlK, x-&gt;right-&gt;avlK) + 1; } highTmp = Flag ? x-&gt;avlK : highTmp; if (x == T.root) { break; } x = x-&gt;p; } return 1;} è¿™å°±ã€‚ã€‚Fixå®Œäº†ã€‚233 ç„¶åå°±æ˜¯deleteéƒ¨åˆ†ï¼Œå‚è€ƒçº¢é»‘æ ‘çš„å®ç°&emsp;&emsp;deleteéƒ¨åˆ†å…¶å®æ˜¯æ’å…¥çš„é€†ã€‚é¦–å…ˆä½¿ç”¨æ­£å¸¸çš„äºŒå‰æœç´¢æ ‘æ’å…¥ï¼Œç„¶åå†ä»è¢«æŠ½å–çš„ä½ç½®å¼€å§‹å¯¹å…¶è¿›è¡Œfixã€‚&emsp;&emsp;è´´ä»£ç ï¼š1234567891011121314151617181920212223242526272829303132333435/** * Procedure: AVL_Delete * @param T : AVLtree &amp; * @param z : node * * @return : int */// Now is part of original RB-deletevoid AVL_Delete(AVLtree &amp;T, node *z) { node *x; node *y = z; int yAVLK = z-&gt;avlK; if (z-&gt;left == T.nil) { x = z-&gt;right; AVL_Transplant(T, z, z-&gt;right); } else if (z-&gt;right == T.nil) { x = z-&gt;left; AVL_Transplant(T, z, z-&gt;left); } else { y = getMinPointer(T, z-&gt;right); x = y-&gt;right; // Get the right next pointer &amp; ready to transplant if (y-&gt;p == z) { // If y &amp; z are adjacant x-&gt;p = y; } else { AVL_Transplant(T, y, y-&gt;right); y-&gt;right = z-&gt;right; y-&gt;right-&gt;p = y; } AVL_Transplant(T, z, y); y-&gt;left = z-&gt;left; y-&gt;left-&gt;p = y; y-&gt;avlK = z-&gt;avlK; } AVLDeleteFix(T, x);} åŒæ ·åœ°ï¼Œä»è¢«å‰Šå‡çš„é‚£ä¸ªç‚¹å¼€å§‹ä¿®å¤ã€‚é€æ­¥å‘ä¸Šæ›´æ–°ğŸŒ²é«˜ã€‚123456789101112131415161718192021222324252627282930313233void AVLDeleteFix(AVLtree &amp;T, node *x) { int highFix = x-&gt;avlK; node *y; do { y = x; x = x-&gt;p; x-&gt;avlK = max(x-&gt;left-&gt;avlK, x-&gt;right-&gt;avlK) + 1; if (x-&gt;left-&gt;avlK - x-&gt;right-&gt;avlK &gt;= 2) { if (y-&gt;right-&gt;avlK &gt; y-&gt;left-&gt;avlK) { leftRotate(T, y); y-&gt;avlK = max(y-&gt;left-&gt;avlK, y-&gt;right-&gt;avlK) + 1; x-&gt;avlK = max(x-&gt;left-&gt;avlK, x-&gt;right-&gt;avlK) + 1; y = x-&gt;left; } rightRotate(T, x); x-&gt;avlK = max(x-&gt;left-&gt;avlK, x-&gt;right-&gt;avlK) + 1; y-&gt;avlK = max(y-&gt;left-&gt;avlK, y-&gt;right-&gt;avlK) + 1; x = x-&gt;p; // update pointer } else if (x-&gt;right-&gt;avlK - x-&gt;left-&gt;avlK &gt;= 2) { if (y-&gt;left-&gt;avlK &gt; y-&gt;right-&gt;avlK) { rightRotate(T, y); y-&gt;avlK = max(y-&gt;right-&gt;avlK, y-&gt;left-&gt;avlK) + 1; x-&gt;avlK = max(x-&gt;left-&gt;avlK, x-&gt;right-&gt;avlK) + 1; y = x-&gt;right; } leftRotate(T, x); x-&gt;avlK = max(x-&gt;left-&gt;avlK, x-&gt;right-&gt;avlK) + 1; y-&gt;avlK = max(y-&gt;left-&gt;avlK, y-&gt;right-&gt;avlK) + 1; x = x-&gt;p; // update pointer } } while (x != T.root);} &emsp;&emsp;åˆ é™¤çš„fixå’Œæ’å…¥çš„fixå‡ ä¹ä¸€è‡´ï¼Œä¸æ–­å‘ä¸Šæœç´¢ï¼Œæ›´æ–°avlå¹³è¡¡å› å­ï¼Œé‡åˆ°è¿‡åº¦å€¾æ–œçš„æ—¶å€™å°±ç«‹åˆ»ä¿®å¤ã€‚ ï½å®Œå•¦ï¼ï½è½¬è½½è¯·è”ç³»ä½œè€…","link":"/2017/09/01/AVL-Tree/"},{"title":"CS: APP å®˜æ–¹çš„å‹˜è¯¯","text":"ç¬¬ä¸‰ç‰ˆçš„CS:APPæœ‰å¾ˆå¤šç»†èŠ‚é—®é¢˜ã€‚ç‰¹åˆ«æ—¥å‰çœ‹åˆ°çš„ç¬¬ä¸‰ç« ã€‚ä¸è¿‡å›½å†…çš„å‡ºç‰ˆç¤¾æœ‰è¿›è¡Œå‹˜è¯¯ï¼Œå°½ç®¡è¿˜æ˜¯æ²¡æœ‰å®Œå…¨åœ°æŸ¥å‡ºæ¥ã€‚ (å°½ç®¡éƒ½æ˜¯ç»†èŠ‚é—®é¢˜ï¼Œä½†ä¹Ÿæ˜¯åº”è¯¥æ£€æŸ¥æ­£ç¡®æ‰è¡Œã€‚) Despite our best efforts to create a book with zero defects, our vigilant readers have pointed out some bugs. Please report any new errata to Randy Bryant and Dave Oâ€™Hallaron. Note that some of these errors have been corrected in more recent printings. There are a number of mistakes made by the authors in CS: APP. Here is the link to official errata webside: CMUå‹˜è¯¯çš„åœ°å€ æŠ½å–å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼ˆç¬¬ä¸‰ç« ï¼‰ï¼š p. 171, second-to-last line. 248 is 256 terabytes, not 64 terabytes.Posted 09/09/2016. Don Bagert p. 174, code annotation at top of page. It should read â€œDisassembly of function multstorein binary file mstore.o.â€Posted 10/25/2015. Shoeb Mohammed p. 175, code annotation in middle of page. It should read â€œDisassembly of function multstore in binary file prog.â€Posted 10/25/2015. Shoeb Mohammed p. 177, aside â€œATT versus Intel assembly-code formats,â€ last sentence of first paragraph. The assembly code shown is for the function multstore, not sum.Posted 11/09/2015. Shoeb Mohammed p. 179, Section 3.4, first paragraph. The ranges given for the eight named registers for the three different instruction sets are incorrect. They should be: For 8086: %ax through %sp. For IA32: %eax through %esp. For x86-64: %rax through %rsp. Posted 07/19/2017. Yili Gong p. 183, sample code near bottom of page, line 4. The code should be â€œmovb $-17, (%rsp).â€Posted 10/24/2015. Jason Waterman p. 188, aside â€œSome examples of pointers,â€ call to printf. The format string should be â€œa = %ld, b = %ld\\nâ€.Posted 11/09/2015. Shoeb Mohammed p. 191, second full paragraph. The first sentence should state: â€œThe third column of Figure 3.9 illustrates the effect of executing the instruction popq %rdx â€¦â€Posted 09/28/2015. Max Ma p. 191, fourth line of paragraph that begins â€œThe third column of Figure 3 â€¦â€ It should state that the value 0x123 remains at memory location 0x100.Posted 11/09/2015. Carlos Galdino p. 198, first line of first full paragraph. There should be a period after the word â€œformsâ€.Posted 09/19/2016. Anise Ghorbani p. 199, third full paragraph. The reference to instruction idivl should be to idivqinstead.Posted 02/21/2017. Changan Wang p. 199, fourth full paragraph. The paragraph should start with â€œFor most applications of 64-bit division â€¦â€Posted 09/19/2015. Xingda Zhai p. 200, first line of text. It should state â€œIn this code, argument qp must first be saved in a different register (line 2), â€¦â€Posted 08/16/2015. Dmitry Neverov p. 204, Practice Problem 3.13, second paragraph. It should state â€œSuppose a is in some portion of %rdi while â€¦â€Posted 10/15/2015. Ronald Greenberg p. 205, Practice Problem 3.13, code for D. The second instruction should be â€œsetne %al.â€Posted 11/09/2015. Carlos Galdino p. 214, third paragraph. The second sentence should be â€œThe function computes the absolute value of the difference of its two arguments x and y, â€¦â€Posted 11/11/2015. Yili Gong p. 214, Figure 3.17(c). The comment on line 8 of the code should state â€œReturn rvalâ€.Posted 03/18/2017. p. 218, assembly code for cread. In the annotations for lines 3 and 5, â€œxâ€ should be â€œxpâ€.Posted 11/19/2015. Vlad Buslov p. 226, last sentence before Practice Problem 3.25. It should state â€œThe compiler has determined that the loop can only be entered when n &gt; 1, and that, as n is decremented, it will reach value 1 before reaching a value less than 1.â€Posted 06/11/2017. Daniel Oâ€™Brien p. 234, first and second lines of text. They should state â€œ â€¦ indexed by register %rsi, which holds â€¦ â€Posted 09/02/2015. Dmitry Neverov p. 235, Figure 3.23, annotation for line 5 of code. It should state â€œGoto jt[index].â€ Posted 12/25/2015. Xinzhen Chen* p. 238, Problem 3.31, Comments in assembly code at top of page. The register allocation is listed incorrectly. It should state â€œa in %rdi, b in %rsi, c in %rdx, dest in %rcx.â€Posted 07/25/2015. Yu Zhong and Carlos Galdino p. 241, fourth and fifth lines. They should state â€œProcedure P can pass up to six integral values (i.e., pointers and integers) in registers â€¦ â€Posted 09/02/2015. Dmitry Neverov p. 243, Figure 3.27a, line 2. The annotation should state â€œL1: y+2.â€Posted 02/15/2016. Xinzhen Chen p. 244, first full paragraph. The value 0x400054e should be 0x40054e.Posted 07/26/2017. Daniel Oâ€™Brien p. 244, second full paragraph. The value 0x4000560 should be 0x400560.Posted 07/26/2017. Daniel Oâ€™Brien p. 244, Comment after line 4. It should state â€œDisassembly of first(long x)â€Posted 09/02/2015. Dmitry Neverov p. 249, Fourth line from bottom. Sentence ending â€œâ€¦ and 17 (s3).â€ should be â€œâ€¦ and 17 (x4).â€Posted 11/29/2016. Hyun Chun p. 252, Practice Problem 3.34. The first two sentences should state â€œConsider a function P, which generates local values, named a0â€“a7. It then calls function Q, which has no arguments.â€Posted 11/23/2015. Vlad Buslov p. 257, Table near the bottom of the page. The assembly code for the first entry should be â€œmovq %rdx,%rax.â€Posted 10/03/2015. Zhiwei Xin p. 259, Figure 3.36 The fourth block from the bottom should have the label A[3][2].Posted 04/04/2017. Dean Kajmakci p. 259, assembly code in middle of page, line 3. The annotation should state: â€œRead from M[xA + 12i + 4j].â€Posted 10/25/2015. Karan Dwivedi p. 263, assembly code in middle of page, line 3. There is a missing â€˜)â€™ at the end of the annotation.Posted 02/11/2016. Elizabeth White p. 264, Annotations of last block of assembly code. It should state that j is in register %rdx.Posted 07/26/2017. Daniel Oâ€™Brien p. 266, middle of page. The declaration and initialization of r should be:struct rect r = { 0, 0, 10, 20, 0xFF00FF };Posted 08/04/2015. Yu Zhong p. 277, first bullet, second and third lines after declarations. They should state â€œâ€¦ if the object has type T, then the pointer has type T .â€ Posted 09/02/2015. Dmitry Neverov* p. 281, Figure 3.40. The first sentence of the caption should read â€œCharacter array buf is just below part of the saved state.â€Posted 12/01/2015. Yili Gong p. 282, Practice Problem 3.46, second paragraph. It should state that get_line is called with return address 0x400076.Posted 11/23/2015. Vlad Buslov p. 284, Practice Problem 3.46, part E. The question for ask for three things wrong with the code.Posted 07/26/2017. Daniel Oâ€™Brien p. 293, Practice Problem 3.49, second paragraph. The text should state: â€œâ€¦ there may be an offset of e2 bytes between the values of s2 and p.â€Posted 11/09/2015. Shoeb Mohammed p. 295, Figure 3.45. The lower 128 bits of register %ymm13 should be labeled %xmm13.Posted 10/28/2015. David Hirschv p. 300, Problem 3.51, second line. The return value has type â€œdest_t.â€Posted 10/13/2016. Anise Ghorbani p. 313, Problem 3.60, first line of code. Argument n should be declared as being of type int.Posted 07/21/2015. Lauren Cooper p. 326, Solution to Problem 3.3, fifth line of code. The code should be movq %rax, $0x123to be consistent with the problem statement, although both versions have the same error.Posted 06/02/2015. Zhi Li p. 326, Solution to Problem 3.3, sixth line of code. The code should be movl %eax, %rdxto be consistent with the problem statement, although both versions have the same error.Posted 09/02/2015. Elizabeth White p. 330, Solution to Problem 3.14D. The comparison is for &lt;=.Posted 08/16/2015. Dmitry Neverov p. 331, Solutions to Problems 3.15B and 3.15D. The values starting with â€œ0x0xâ€ should start with â€œ0xâ€ instead.Posted 12/04/2015. Carlos Galdino and Yili Gong p. 333, Solution to Problem 3.20. The comment on the third line of code should read â€œTest xâ€.Posted 06/02/2015. Curtis Gagliardi p. 338, Solution to Problem 3.30, third bullet. The final sentence should say â€œThus, case labels 3 and 6 are missing in the switch statement body.â€Posted 09/27/2015. Xinyun Zhao p. 339, Solution to Problem 3.32, line labeled â€œF4â€. The instruction should be â€œrepz retq.â€Posted 10/13/2016. Wenjun Huang p. 346, Solution to Problem 3.46C. The program is attempting to return to address 0x400034, not 0x040034.Posted 10/24/2016. Wenjun Huang p. 347, Solution to Problem 3.47E. In addition, the program should test the value returned by gets to make sure itâ€™s not NULL.Posted 07/26/2017. Daniel Oâ€™Brien p. 348, Solution to Problem 3.51. In the third entry of the table, the conversion is from double to float, as is requested in the problem statement.Posted 08/09/2015. Yu Zhong p. 349, Solution to Problem 3.53, last paragraph of text. The ambiguity arises from the commutativity of addition, not multiplication.Posted 11/09/2015. Shoeb Mohammed","link":"/2017/08/10/CS-APP-errata/"},{"title":"LeetCode 43 - å¤§æ•°ä¹˜æ³•","text":"æ¨¡æ‹Ÿç®—ä¹˜æ³•ï¼Œå®ç°å¤§æ•´æ•°ä¹˜æ³•ã€‚ä»…é™æ•´æ•°ï¼Œè´Ÿæ•°è¦åŠ ç‚¹åˆ¤æ–­æ¡ä»¶ã€‚ è¿™ä¸ªæ–¹æ³•è™½ç„¶ä¸æ˜¯æœ€å¿«çš„ï¼Œä½†æ¯”è¾ƒå¥½ç†è§£ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344class Solution { public String multiply(String num1, String num2) { // trivial case if (num1.equals(\"0\") || num2.equals(\"0\")) { return \"0\"; } if (num1.equals(\"1\")) return num2; if (num2.equals(\"1\")) return num1; // method call optimition int len1 = num1.length(); int len2 = num2.length(); // target result; int[] res = new int[len1 + len2]; for (int i = len1 - 1; i &gt;= 0; i--) { for (int j = len2 - 1; j &gt;= 0; j--) { // multiply single numbers int tmp = (num1.charAt(i) - '0') * (num2.charAt(j) - '0'); // len - i - 1 means indentation // add up two single num res[(len1 - i - 1) + len2 - j - 1] += tmp % 10; // carry int add = res[(len1 - i - 1) + len2 - j - 1] / 10; res[(len1 - i - 1) + len2 - j - 1] %= 10; res[(len1 - i - 1) + len2 - j] += add; res[(len1 - i - 1) + len2 - j] += tmp / 10; } } int fin = res.length - 1; while (res[fin] == 0) fin--; StringBuilder sb = new StringBuilder(); // reverse order to append as string while (fin &gt;= 0) { sb.append((char) (res[fin--] + '0')); } return sb.toString(); }}","link":"/2020/03/05/big_num_mul/"},{"title":"Red Black Tree (Draft)","text":"æœ¬æ–‡å¤„äºè‰ç¨¿ä¸­ã€‚ã€‚ã€‚ å®šä¹‰ï¼šçº¢é»‘æ ‘åˆ©ç”¨ç‰¹å¾æ ‡è®°å†³å®šé«˜åº¦çš„è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼Œå…·æœ‰é¢å¤–çš„æ•°æ®å†³å®šå…¶èŠ‚ç‚¹ä¸ºé»‘æˆ–çº¢èŠ‚ç‚¹ã€‚æ¯ä¸€æ¡ä»å•ä¸€èŠ‚ç‚¹åˆ°å¶å­ç»“ç‚¹çš„è·¯å¾„éƒ½æœ‰ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ã€‚åˆ©ç”¨æ­¤ç‰¹æ€§ï¼Œä¿æŒæ ‘é«˜ä¸º$O(lg\\ n)$ã€‚ preï¼šå¹³è¡¡æ ‘ï¼šç©ºæ ‘æˆ–å…¶å·¦å³ä¸¤ä¸ªå­æ ‘é«˜åº¦å·®ç›¸å¯¹å°çš„äºŒå‰æœç´¢æ ‘ã€‚ æ­£ç¡®æ€§ç‰¹æ€§ï¼š èŠ‚ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²ã€‚ æ ¹æ˜¯é»‘è‰²ã€‚ æ‰€æœ‰å¶å­éƒ½æ˜¯é»‘è‰²ï¼ˆå¶å­æ˜¯NILèŠ‚ç‚¹ï¼‰ã€‚ æ¯ä¸ªçº¢è‰²èŠ‚ç‚¹å¿…é¡»æœ‰ä¸¤ä¸ªé»‘è‰²çš„å­èŠ‚ç‚¹ã€‚ï¼ˆä»æ¯ä¸ªå¶å­åˆ°æ ¹çš„æ‰€æœ‰è·¯å¾„ä¸Šä¸èƒ½æœ‰ä¸¤ä¸ªè¿ç»­çš„çº¢è‰²èŠ‚ç‚¹ã€‚ï¼‰ ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰ç®€å•è·¯å¾„)éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ã€‚ ä¸ºä¾¿äºå®ç°ä¸”è§£å†³è¾¹ç•Œé—®é¢˜ï¼Œåˆ©ç”¨å•ä¸€ $T.nil$ èŠ‚ç‚¹ä½œä¸ºç©ºèŠ‚ç‚¹ï¼Œå¹¶ä¸”å°†ç±»ä¼¼äºåŸå§‹äºŒå‰æœç´¢æ ‘ä¸­çš„ç©ºæŒ‡é’ˆæŒ‡å‘$T.nil$ã€‚$T.nil$å¯ä»¥ä½œä¸ºè¾…åŠ©èŠ‚ç‚¹ï¼Œä¸ºåç»­æ’å…¥åˆ é™¤åšè¾…åŠ©ã€‚ æ¯ä¸ªèŠ‚ç‚¹åŒ…å«ï¼šcolor, key, right, left, pæŒ‡é’ˆã€‚ è§£é‡Šï¼š æ€§è´¨2ä¿è¯äº†æ ¹èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼Œä½†å¹¶ä¸æ˜¯å¿…é¡»çš„ã€‚ï¼ˆex13.1-3ï¼‰ä¿è¯çº¢è‰²èŠ‚ç‚¹ä¸å¯è¿ç»­ï¼Œè€Œä¸”å•ä¸€è·¯å¾„é»‘èŠ‚ç‚¹æ•°ç›®ç›¸åŒï¼Œæ ‘å°±å¯ä»¥å®ç°å¹³è¡¡ã€‚ NILèŠ‚ç‚¹å®ç°äº†ï¼Œæ‰€æœ‰çš„æœ‰æ•°æ®èŠ‚ç‚¹éƒ½ä¸ºå†…éƒ¨èŠ‚ç‚¹ã€‚ æ€§è´¨4å†³å®šäº†çº¢è‰²èŠ‚ç‚¹ä¸å¯è¿ç»­ï¼Œä½†å¯¹äºé»‘è‰²èŠ‚ç‚¹æ²¡æœ‰é™åˆ¶ã€‚åªè¦æ ‘çš„ç®€å•è·¯å¾„é»‘èŠ‚ç‚¹æ•°ç›®ç›¸åŒï¼Œå°±ä¿è¯äº†4çš„æ­£ç¡®æ€§ã€‚ è¿™äº›çº¦æŸç¡®ä¿äº†çº¢é»‘æ ‘çš„å…³é”®ç‰¹æ€§ï¼šä»æ ¹åˆ°å¶å­çš„æœ€é•¿çš„å¯èƒ½è·¯å¾„ä¸å¤šäºæœ€çŸ­çš„å¯èƒ½è·¯å¾„çš„ä¸¤å€é•¿ã€‚ï¼ˆex13.1-5) è¯´æ˜ï¼šå‡è®¾å•ä¸€è·¯å¾„ä¸­å…¨éƒ¨èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼Œç”±æ€§è´¨4ï¼Œå¦ä¸€å•ä¸€è·¯å¾„çš„å…¨éƒ¨èŠ‚ç‚¹æœ€å¤šä¸ºçº¢é»‘ç›¸é—´ã€‚å› æ­¤ä¸å¯ä»¥è¶…è¿‡ä¸¤å€ã€‚ æ ‘é«˜çš„è¯æ˜ æ ¹æ®æ€§è´¨4ï¼Œ5ï¼Œå®šä¹‰è¾…åŠ©å‡½æ•°â€œæ ‘çš„é»‘é«˜â€ $bh(x)$ ã€‚åˆ©ç”¨è¯´æ˜ä»»ä½•ä»¥ $x$ ä¸ºè·Ÿçš„çº¢é»‘æ ‘éƒ½æœ‰è‡³å°‘ $2^{bh(x)}-1$ ä¸ªå†…éƒ¨èŠ‚ç‚¹ã€‚ è¯æ˜ï¼šæ•°å­¦å½’çº³æ³• è®¾ï¼šæ ¹ä¸ºxçš„æ ‘é«˜ä¸ºhã€‚ $x=0â€‹$ æ—¶ï¼Œ $2^{bh(x)}-1=0â€‹$ ï¼› å‡è®¾xä¸ºæ ¹çš„æ ‘æœ‰2ä¸ªå­ä»£ï¼Œåˆ™ï¼šå–å†³äºå½“å‰å­æ ‘çš„å­ä»£ä¸ºé»‘æˆ–è€…çº¢ï¼Œé»‘é«˜ä¸ºbh(x) æˆ–è€… bh(x)-1; // è¿™å¥æœ‰å•¥æ„ä¹‰ï¼Ÿ å‡è®¾ $xâ€™=x-1$ é»‘é«˜ä¸º $2^{bh(xâ€™)}-1$ æˆç«‹ï¼Œåˆ™ï¼š $\\because xâ€™=x$ æ—¶ï¼š å‡å»æ ¹çš„é»‘èŠ‚ç‚¹ï¼Œå·¦å³å­æ ‘ï¼š$hâ€™=2^{bh(x)-1}-1$, $\\therefore 2hâ€™+1=2^{bh(x)}-1$ (1)","link":"/2017/08/09/Red-Black-Tree/"},{"title":"ã€Šåä¼¦å¤«äººçš„èŒä¸šã€‹ä¸­ä»·å€¼å¿½è§†ä¸å‹è¿«ä¸‹çš„é“å¾·ç¼ºå¤±ä¸ä¼¦ç†ç–‘éš¾æ¢è®¨","text":"ã€æ‘˜è¦ã€‘ã€Šåä¼¦å¤«äººçš„èŒä¸šã€‹æ˜¯è§ä¼¯çº³å…·æœ‰ä»£è¡¨æ€§çš„â€œé—®é¢˜å‰§â€ã€‚å‰§æœ¬å€ŸåŠ©åä¼¦å¤«äººä¹‹å¥³å„¿è–‡è–‡ä¸å…¶ä»¥åŠä¼—äººæ–—äº‰çš„æƒ…èŠ‚ï¼Œæ­éœ²äº†19ä¸–çºªæœ«çš„èµ„æœ¬ä¸»ä¹‰ç¤¾ä¼šä¸‹äººæ™®éé¢ä¸´çš„ä»·å€¼ç¼ºå¤±ä¸ä»·å€¼å‹è¿«å¯¼è‡´çš„ä¼¦ç†ç¼ºå¤±ä¸ç ´åé—®é¢˜ã€‚å…¶ä¸­ï¼Œé“å¾·çš„å¯¹æŠ—å›´ç»•åä¼¦å¤«äººçš„å–æ·«ç”Ÿæ¶¯å±•å¼€ã€‚æœ¬æ–‡æ ¹æ®å‰§æœ¬ï¼Œå¯¹å…¶ä¸­çš„é“å¾·ä¼¦ç†é—®é¢˜è¿›è¡Œäº†æ¢è®¨ã€‚ ã€å…³é”®è¯ã€‘åä¼¦å¤«äººçš„èŒä¸šï¼Œä»·å€¼å‹è¿«ï¼Œé“å¾·ä½ä½ï¼Œä¼¦ç†ç–‘éš¾ &emsp;&emsp;ã€Šåä¼¦å¤«äººçš„èŒä¸šã€‹æ˜¯è§ä¼¯çº³éå¸¸ç»å…¸çš„â€œé—®é¢˜å‰§â€ï¼Œæ˜¯ä»å®¶åº­åˆ°ç¤¾ä¼šè¯¸å¤šå±‚é¢ä¸Šå¯¹é“å¾·ä¼¦ç†é—®é¢˜çš„æ¢è®¨ã€‚å°½ç®¡å‰§æœ¬çš„æƒ…èŠ‚çº¿å§‹ç»ˆå›´ç»•ç€åä¼¦å¤«äººå–æ·«ã€å½“å¦“é™¢è€æ¿çš„èŒä¸šè¿›è¡Œäº‰è®ºï¼Œæƒ…èŠ‚å†²çªä¹Ÿå›´ç»•ç€åä¼¦å¤«äººå’Œå¥¹çš„å¥³å„¿è–‡è–‡å±•å¼€ï¼Œä½†ä»·å€¼ä¸é“å¾·çš„å†²çªä¸å¯¹æŠ—åŒ…æ‹¬ä½†ä¸é™äºå¯¹å–æ·«çš„æ‰¹åˆ¤ã€‚ç¤¾ä¼šçš„ä»·å€¼æ— è§†ä¸ä»·å€¼å‹è¿«å¯¹å…¨ä½“äººå‘˜éƒ½æ˜¯å…·æœ‰å†³å®šæ€§çš„ã€‚â€œåœ¨ç»´å¤šåˆ©äºšæ—¶ä»£ï¼Œå¤§ä¸åˆ—é¢ çš„ç»æµå’Œç¤¾ä¼šå‘ç”Ÿäº†å·¨å¤§çš„å˜åŒ–ï¼Œå…¶ä¸­æœ€ä¸ºçªå‡ºçš„ä¾¿æ˜¯ä¸­äº§é˜¶çº§äººç¾¤çš„å¢é•¿ã€‚ä½†è¿™ç¹å¿™çš„è¡¨é¢ç°è±¡å§‹ç»ˆæ— æ³•è¦†ç›–èµ„æœ¬å®¶çš„é”™è¯¯ä¸ä¼ªå–„ã€‚â€( æ¨ä½³å® 18 ) &emsp;&emsp;è§ä¼¯çº³æ›¾ç»è¯´è¿‡ï¼Œâ€œï¼ˆå†™æ­¤å‰§æœ¬ï¼‰æ˜¯ä¸ºäº†å™è¿°å–æ·«ä¸ºèŒçš„çœŸç›¸ã€‚å®ƒçš„äº§ç”Ÿä¸æ˜¯å› ä¸ºå¥³äººçš„æ”¾è¡ä¸ç¾æˆ–ç”·äººçš„è’æ·«æ— åº¦ï¼Œè€Œåªæ˜¯å› ä¸ºè¿‡ä½çš„æŠ¥é…¬ï¼Œä»·å€¼çš„æ— è§†å’Œè¿‡åº¦çš„å·¥ä½œé€¼è¿«å¥³äººä¸å¾—ä¸ä»äº‹æ€§å·¥ä½œæ¥æŠŠæ¡å¥¹çš„èº«ä½“å’Œçµé­‚â€(Powell, Kerry 229)ã€‚ è€Œè¿™ç§ä½ä¼°ä¸å‹è¿«æ­£æ˜¯çŸ›ç›¾çš„åä¼¦å¤«äººæ‚²å‰§çš„æºå¤´ã€‚å®¶åº­ä¼¦ç†å—åˆ°ç ´åï¼Œç¤¾ä¼šé“å¾·åœ°ä½å€¾æ–œï¼Œæœ€åå°½ç®¡ä¾ç„¶æœ‰åçœä¸å¿æ‚”çš„é“å¾·æ®‹ä½™ï¼Œä½†ä¹Ÿåªæ˜¯æ‰‹ä¸­å˜´ä¸Šçš„ç©ç‰©ã€‚ä¸€ä¸ªå¥³äººæ²‰è¿·äºé‡‘é’±ç¾è‰²ï¼Œå®³æ€•äºè´«ç©·å—å›°ï¼Œä¸ºåŠ›é‡æ— ç©·çš„ç¤¾ä¼šæ‰€å‹è¿«ï¼Œå¥¹å°±å†ä¹Ÿä¸ä¼šæƒ³è§£å†³è¿™äº›é“å¾·çš„çŸ›ç›¾ï¼Œå®å¯ç—›è‹¦ï¼Œå®å¯å®¶åº­åˆ†å´©ç¦»æï¼Œå®å¯å •å…¥ä¸‡åŠ«ä¸å¤çš„æ·±æ¸Šã€‚ &emsp;&emsp;å¯¹è´«ç©·çš„ææƒ§ï¼Œå¯¹å¯Œè´µçš„è¿½æ±‚ï¼Œæ˜¯ä¼¦ç†ç–‘éš¾æœ€åˆçš„é—®é¢˜ã€‚å¯¹äºåä¼¦å¤«äººï¼Œæœ€åˆå§‹çš„å±‚é¢ä¾¿æ˜¯é‡‘é’±ã€‚ç”±å§‹è‡³ç»ˆï¼Œä¸ºäº†é‡‘é’±ï¼Œåä¼¦å¤«äººçš„é€‰æ‹©éƒ½æ˜¯å—è¿«çš„ã€‚æœ€åˆçš„å›°å¤„åœ¨äºè´«ç©·ä¸å›°è‹¦ã€‚é¢å¯¹è–‡è–‡çš„è´¨ç–‘ï¼Œåä¼¦å¤«äººç§°ï¼Œè‡ªå·±çš„ç”Ÿæ´»æ–¹å¼æ˜¯ä¸å¯é€‰æ‹©çš„ã€‚æœ€åˆçš„å¥¹â€œåœ¨é…’å§ç«¯é…’æ´—æ¯å­ï¼Œæ¯å¤©å·¥ä½œåå››ä¸ªå°æ—¶ï¼Œä¸€ä¸ªæ˜ŸæœŸæŒ£4ä¸ªå…ˆä»¤â€ï¼Œé¥±å—è´«ç©·çš„æŠ˜ç£¨ã€‚åæ¥é‡ä¸Šäº†å¥¹çš„å§å§è‰é½ï¼Œèµ°ä¸Šäº†å–æ·«ä¸ºç”Ÿçš„é“è·¯ã€‚è‰é½å‘µæ–¥å¥¹ç§°ï¼Œâ€œä½ åœ¨è¿™é‡Œå¹²ä»€ä¹ˆï¼Œä½ è¿™å°å‚»ç“œï¼Ÿç´¯åäº†èº«å­ï¼Œç³Ÿè¹‹äº†è„¸å­ï¼Œæ›¿åˆ«äººèµšé’±ï¼â€ ç„¶è€Œï¼Œå¦‚æœå¥¹ä¸é€‰æ‹©è¿™æ ·çš„ç”Ÿæ´»ï¼Œå¥¹å¯èƒ½â€œæ­»äºé“…ä¸­æ¯’â€ï¼Œå¯èƒ½æ›¿äººæ“¦åœ°æ¿ï¼Œæœ€åè¿›å…¥æµè´«é™¢ï¼Œå¯èƒ½å«ç»™ä»–äººï¼Œç›¸å¤«æ•™å­ï¼Œæˆä¸ºæ°¸è¿œå—ç©·çš„â€œåºŸç‰©å¥³äººâ€ã€‚ç¤¾ä¼šçš„ä¸å…¬å¹³å¯¹å¾…æ˜¯æ— æƒ…è€Œå†·é…·çš„ï¼Œå¯¹å¥¹å°±æ˜¯ä¸€ç§å‹è¿«ï¼Œå¯¹äººæ€§å°±æ˜¯ä¸€ç§æ³¯ç­ã€‚äººçš„ä»·å€¼è¢«å‰Šå¼±ï¼Œå·¥ä½œæ˜¾å¾—ä¸€æ–‡ä¸å€¼ã€‚äºæ˜¯å¥¹é€‰æ‹©äº†æˆä¸ºæ€§å·¥ä½œè€…ã€‚å°½ç®¡æ˜¯ç¤¾ä¼šä¸­é“å¾·åœ°ä½çš„ä½ä¸‹è€…ï¼Œå´èƒ½ä¿è¯è‡ªå·±çš„ç”Ÿæ´»ã€‚å¥¹çš„ä¸ªäººæ„å¿—ä¾¿æ˜¯æ‘†è„±è´«ç©·ï¼Œèµ°å‘ä¸Šæµç¤¾ä¼šã€‚è¿™æ ·çš„é©±åŠ¨æ˜¯ç›´è§‚è€Œæœ‰åŠ›çš„ï¼Œä¿ƒä½¿äººé€‰æ‹©äº†é€ƒç¦»è´«å›°ï¼Œå¤„äºæ°¸è¿œå¤„äºé“å¾·ä½ä½å’Œä¼¦ç†çŸ›ç›¾çš„äººç”Ÿé“è·¯ã€‚ &emsp;&emsp;å¿½è§†ä»·å€¼ï¼Œé‡‘é’±è‡³ä¸Šï¼Œæ³¯ç­äººæ€§ï¼Œæ˜¯é‚£ä¸ªå¹´ä»£æ‰€æŒæœ‰çš„ç¤¾ä¼šé£æ°”ä¸çŠ¶æ€ã€‚ä½œä¸ºå¤„äºå¼±åŠ¿ï¼Œå´è¦ç»´æŠ¤æ‰€è°“çš„â€œæ­£ç»Ÿç¤¼èŠ‚â€çš„å¥³æ€§ï¼Œå°±æ›´åŠ éš¾ä»¥å¾—åˆ°è¶³å¤Ÿé«˜çš„ç¤¾ä¼šåœ°ä½ã€‚å¯¹è¢«å¿½è§†ã€è¢«æ­§è§†ï¼Œå¤„äºè´«ç©·çš„ææƒ§å§‹ç»ˆè´¯ç©¿ç€åä¼¦å¤«äººçš„ä¸€ç”Ÿã€‚ä»¥è‡³äºåæ¥å¥¹æˆä¸ºå¦“é™¢è€æ¿ï¼Œæˆä¸ºå†…å¿ƒææƒ§çš„å¤§é‡èµ„äº§çš„å æœ‰è€…ï¼Œç›´åˆ°æœ€åå³ä¾¿æƒ³å’Œè–‡è–‡å’Œå¥½ä¹Ÿè¿˜ä¸è‚¯æ”¾å¼ƒæ‰‹ä¸­çš„è‚®è„çš„å·¥ä½œã€‚å³ä¾¿æ˜¯æˆä¸ºè´µå¦‡ï¼Œä¹Ÿä¸è‚¯æ”¾ä¸‹æ‰‹ä¸­çš„ä¸œè¥¿ã€‚è´«ç©·å¤ªå¯æ€•ï¼Œå¯¹å¥³äººçš„ä»·å€¼å¿½è§†å¤ªå¯æ€•ã€‚ç„¶è€Œï¼Œè¿™ç§å‹è¿«ä¸ä»…ä»…ä½œç”¨äºå¥³äººã€‚ç”·äººä¹Ÿåˆ©ç”¨ç€è¿™ç§é£æ½®ç§¯æ”’è‡ªå·±çš„è´¢å¯Œï¼Œæé«˜è‡ªå·±çš„åœ°ä½ã€‚ç§‘æ´›å¤«èŒ¨ä¸åä¼¦å¤«äººç‹¼ç‹ˆä¸ºå¥¸ï¼Œå¼—å…°å…‹å› è§Šè§åä¼¦å¤«äººçš„è´¢äº§è€Œè¿½æ±‚è–‡è–‡ï¼Œå¾—çŸ¥è–‡è–‡ä¸å…¶å†³è£‚åæœæ–­å…¨èº«è€Œé€€ã€‚ç¤¾ä¼šæ€§çš„é‡‘é’±å‹è¿«ä½¿å¾—äººå®Œå…¨å˜äº†æ ·ã€‚ &emsp;&emsp;å®¶åº­çš„é“å¾·åœ°ä½ä¸ä¼¦ç†é€‰æ‹©ä¹‹éš¾æ˜¯éšä¹‹è€Œæ¥çš„é—®é¢˜ã€‚åœ¨é‡‘é’±é—®é¢˜ä¹‹åï¼Œä¾¿æ˜¯å®¶åº­é“å¾·å›°å¢ƒã€‚è¿™ä¹Ÿæ˜¯è§ä¼¯çº³æŠŠç¤¾ä¼šå„é˜¶å±‚é¢ä¸´çš„é“å¾·é—®é¢˜æ‰€æ±‡èšèµ·æ¥çš„æ ¸å¿ƒ (Dierkes-Thrun, Petra 293)ã€‚ä¹Ÿå¯¹äºè–‡è–‡ï¼Œä»¥åŠè‡ªå·±ä¸å®Œæ•´çš„å®¶åº­ï¼Œåä¼¦å¤«äººçš„æ€åº¦æ˜¯ä¸¥è°¨çš„ã€‚å¥¹æŠŠåŸ¹å…»æˆå‰‘æ¡¥å¤§å­¦çš„é«˜æç”Ÿï¼Œç»™äºˆäº†è®¸å¤šçš„é‡è§†â€”â€”å°½ç®¡æ˜¯ä»æ—§æ€æƒ³å±‚é¢å¾—æ¥çš„é‡è§†ï¼ŒæŠŠå¥¹å½“ä½œå°å­©å­ï¼Œå¸Œæœ›å¾—åˆ°å­©å­çš„èµåŒå’ŒåŒæƒ…ã€‚å°½ç®¡å­©å­æœ‰ä¸ªäºµæ¸å¥¹çš„ç¥èŒçš„çˆ¶äº²ï¼Œè¿™æ˜¯ä¸€ä¸ªä»¤åä¼¦å¤«äººä¸æ»¡æ„çš„åœ°æ–¹ã€‚ä½†å¯¹äºå¡ç¼ªå°”ç‰§å¸ˆï¼Œâ€œå¥¹ä»æ¥æ²¡æœ‰ç”¨é‚£ç§åŠ›é‡ï¼Œæ²¡æœ‰å¼•èµ·æˆ‘ç‰‡åˆ»çš„ä¸å®‰ã€‚â€ ç„¶è€Œå¥¹å§‹ç»ˆé€ƒä¸è¿‡ä¸€ä¸ªäº‹å®ï¼Œå¥¹æ˜¯ä¸€ä¸ªâ€œé“å¾·ä¸Šçš„å¼±åŠ¿è€…â€ï¼Œå¥¹çš„å¥³å„¿ä¹Ÿå› æ­¤æˆä¸ºäº†â€œé“å¾·å¼±åŠ¿è€…çš„å¥³å„¿â€ã€‚è¿™æ ·çš„ä¼¦ç†èº«ä»½è®©åä¼¦å¤«äººçŸ›ç›¾ï¼Œä¹Ÿè®©è–‡è–‡çŸ›ç›¾ã€‚è¿™ä¹Ÿä½¿å¾—è–‡è–‡çŸ¥é“å¥¹æ¯äº²ç»§ç»­è¿™æ ·çš„å·¥ä½œä¹‹åï¼Œå¥¹é¢œé¢å¤§å˜ï¼Œå†ä¹Ÿä¸ç›¸ä¿¡åä¼¦å¤«äººï¼Œå¯¹å¥¹å®Œå…¨å¤±å»äº†ä¿¡å¿ƒã€‚ &emsp;&emsp;åä¼¦å¤«äººå§‹ç»ˆå¸¦æœ‰ç€ä¸€ä¸ªæ—§æ—¶ä»£å¥³æ€§çš„çµé­‚ã€‚çœ‹å¾…å¥¹çš„å¥³å„¿ï¼Œå¥¹ä¹Ÿå§‹ç»ˆç”¨ç€æ—§æ—¶ä»£çš„çœ¼å…‰ã€‚ç„¶è€Œï¼Œè–‡è–‡å´æœ‰ç€å®Œå…¨ä¸ä¸€æ ·çš„äººç”Ÿæ„Ÿæ‚Ÿä¸ç¤¾ä¼šæ€è€ƒã€‚é“å¾·çš„ä½ä½ï¼Œé‡‘é’±çš„èƒè¿«ï¼Œåœ¨å…¶æ¯äº²çœ‹æ¥éƒ½æ˜¯æ— æ³•æ¥å—çš„äº‹ç‰©ã€‚å½“ä¸€ä¸ªæ—§æ—¶ä»£çš„æ¯äº²å¯¹æ–°æ—¶ä»£çš„å¥³å„¿æœ‰ç€æ¡æ¢ä¸€èˆ¬çš„è´ªå›¾å’Œç¥ˆæ±‚ï¼Œå¸Œæœ›èƒ½åˆ©ç”¨è‡ªå·±æ‰€è°“çš„å…»è‚²ä¹‹æ©æ¥è¾¾åˆ°äº‰å–è·å¾—è®¤åŒçš„æ—¶å€™ï¼Œå†²çªä¸€å®šæ˜¯æ¿€çƒˆè€Œæƒ¨æ·¡çš„ã€‚ä¸€æ–¹é¢å¸Œæœ›å¥³å„¿æˆä¸ºæ–°å¥³æ€§ï¼Œå¦ä¸€æ–¹é¢åˆå¸Œæœ›æ–°å¥³æ€§è®¤åŒä¸æ‹¥æŠ¤å®ˆæ—§çš„è‡ªå·±ï¼Œå†åŠ ä¸ŠåŸæœ¬å¤„äºé“å¾·ä½ä½çš„å®¶åº­ï¼Œè¿™æ ·çš„ç»“å±€ä¸éš¾é¢„æ–™ã€‚ç›¸åï¼Œç”±äºå¥¹çš„éšå¿å’Œæªå®ˆï¼ŒåŠ ä¸Šå¡ç¼ªå°”ç‰§å¸ˆè‡ªèº«æ‰€å¤„çš„ä¼¦ç†å¼±åŠ¿ï¼Œå¥¹å–å¾—äº†å¡ç¼ªå°”ç‰§å¸ˆçš„å°Šæ•¬ä¸å®½å®¹ï¼Œå°½ç®¡å¯èƒ½å¹¶ä¸èƒ½è®©å¥¹æ»¡è¶³ã€‚ä»·å€¼å‹è¿«ä¸å¿½è§†åœ¨æ­¤ä½“ç°å¾—æœ€ç›´æ¥çš„å°±åœ¨äºï¼Œå¥³æ€§ï¼Œæˆ–è€…è¯´äººç”±äºå¿½è§†è€Œå˜å¾—å»‰ä»·ï¼Œä¸ªäººçš„ä¼¦ç†é“å¾·ä¹Ÿè¢«ç¤¾ä¼šæ•´ä½“æ€§åœ°æ— è§†ã€‚æ²¡æœ‰é‡‘é’±ï¼Œå°±æ— æ³•è®©è–‡è–‡æœ‰è¾ƒé«˜çš„é€ è¯£ï¼›å¦‚æœä¸ä¸ºäº†é‡‘é’±ï¼Œæªå®ˆå®¶åº­å‡†åˆ™ï¼Œé‚£å¥¹ä»¬ä¹Ÿå°†æ²¦è½ç¤¾ä¼šçš„æœ€åº•å±‚ï¼Œä¹Ÿä¸ä¼šæœ‰è–‡è–‡çš„è§‰æ‚Ÿã€‚é‡‘é’±ä½“ç°äº†äººæ‰€æœ‰çš„ä»·å€¼ï¼Œç”šè‡³ç•¸å½¢åœ°æ„å»ºäº†å®¶åº­ä¼¦ç†çš„åŸºçŸ³ã€‚ &emsp;&emsp;æ¯ä¸ªå®¶åº­éƒ½æ˜¯æ„æˆç¤¾ä¼šçš„ä¸€ä¸ªå…ƒç´ ï¼Œè€Œç¤¾ä¼šåˆåä½œç”¨ä¸æ¯ä¸€ä¸ªå®¶åº­ã€‚ç¤¾ä¼šä¼¦ç†çš„åå·®åœ¨å‰§ä¸­å……å½“äº†å…¸å‹çš„ç¤¾ä¼šç¯å¢ƒä¸­é‡è¦çš„è§’è‰²ã€‚å½“ç¤¾ä¼šç¡®å®æ˜¯è¿™æ ·è¿ä½œçš„æ—¶å€™ï¼Œæ¯ä¸ªäººéƒ½æ˜¯ç¤¾ä¼šçš„ä¸€é¢—é½¿è½®ï¼Œå°½ç®¡å®ƒå¯ä»¥ä¸çŸ¥é“è‡ªå·±å……å½“çš„ä½ä½ï¼Œä½†å®ƒç¡®å®è¿ä½œç€ï¼Œæ¨åŠ¨ç€æ•´ä¸ªç¤¾ä¼šé£æ½®çš„å‘å±•ã€‚å³ä¾¿æ˜¯è–‡è–‡ï¼Œä¹Ÿæ˜¯é€ƒä¸è¿‡è¿™æ ·çš„å±€é¢ã€‚éšç€ç¬¬äºŒæ¬¡å·¥ä¸šé©å‘½çš„è¿›è¡Œï¼Œèµ„æœ¬æˆä¸ºç¤¾ä¼šçš„é©±åŠ¨åŠ›ï¼Œæ¯ä¸ªäººéƒ½æŠ•èº«å…¶ä¸­ï¼Œä¸ç®¡æ„¿æ„ä¸å¦ã€‚ç§‘æ´›å¤«èŒ¨ä¸ºå¯»æ±‚æš´åˆ©ï¼Œä¸åä¼¦å¤«äººåˆä½œï¼Œç”šè‡³ä»¥æ­¤è¦æ±‚å°†è–‡è–‡å«ç»™ä»–ï¼›è€Œåä¼¦å¤«äººå°½ç®¡å¯¹ä»–å……æ»¡ç—›æ¨ï¼Œå¹¶ç»™äºˆæ¿€çƒˆçš„å›å¤ï¼Œä½†å…´è®¸æ˜¯å¹¶æ²¡æœ‰åœ¨è¡ŒåŠ¨ä¸Šæœ‰æ‰€ååº”ï¼›å¼—å…°å…‹ä¹Ÿæ˜¯å¹´è½»äººä¸­â€œå¥½äºé’±è‰²â€çš„ä»£è¡¨ï¼›è€Œè–‡è–‡ä¸Šå­¦çš„é’±ï¼Œå­¦æ ¡å»ºè®¾çš„ç»è´¹ï¼Œå¾ˆå¤šä¹Ÿæ˜¯æ¥è‡ªå……æ»¡ç½ªæ¶çš„èµ„æœ¬å®¶çš„æåŠ©ã€‚è¿™æ˜¯ä¸€ä¸ªåŸºäºèµ„æœ¬çš„æ•´ä½“ã€‚è€Œå…¶å®ï¼Œä»¥è–‡è–‡ä¸ºä»£è¡¨çš„æ–°å…´è€…åªæ˜¯ç¤¾ä¼šé©¬è½¦ä¸­æå°çš„ä¸€éƒ¨åˆ†ã€‚ä»–ä»¬ä¿è¯äº†è‡ªå·±çš„ç”Ÿå­˜ï¼Œç”šè‡³åŠªåŠ›æ”¹å˜ç€ç¤¾ä¼šçš„è¿ä½œæ–¹å¼ã€‚ä½†ä»–ä»¬éå¸¸ç»†å°ã€‚ä½œä¸ºç¤¾ä¼šæ–°æ€æ½®çš„å¼€æ‹“è€…ï¼Œå¯èƒ½é¢ä¸´å„ç§é£é™©ã€‚ &emsp;&emsp;åœ¨æ•…äº‹å³å°†ç»“æŸçš„æ—¶å€™ï¼Œæ— å¥ˆçš„åä¼¦å¤«äººç”šè‡³é—®äº†ä¸€å¥ï¼Œâ€œä½ çŸ¥é“æˆ‘æœ‰å¤šå¯Œå—?â€ã€‚è¿™å¥æ—¢è®½åˆºåˆå¸¦æœ‰å‡ åˆ†ç»æœ›çš„å“€åšååˆ†ç”ŸåŠ¨è€Œéœ‡æ’¼ï¼ŒæŠŠè–‡è–‡å’Œå¥¹äºŒäººçš„å†²çªå¸¦åˆ°äº†ä¸å¯æŒ½å›çš„åœ°æ­¥ã€‚ä»åŠŸåˆ©ä¸»ä¹‰çš„å±‚é¢æ¥è®²ï¼Œåä¼¦å¤«äººæŠ•å…¥å¯èƒ½æƒ³å¾—åˆ°è–‡è–‡çš„è®¤åŒï¼Œå®ç°äºŒäººæœ€å¤§çš„åˆ©ç›Šã€‚ä½†æ›´æ·±å±‚æ¬¡ï¼Œæ— æ„è¯†åˆ°çš„ï¼Œæ˜¯è¯•å›¾æŠŠå¥¹çš„é¡¾è™‘ï¼Œå¥¹æ—§æœ‰çš„æ°”æ¯ï¼Œå¥¹çš„å¯¹ç¤¾ä¼šç»æœ›ä¸ææƒ§å¸¦ç»™å¥¹ã€‚æ—¢æ˜¯å¯»æ±‚å¯æ€œï¼Œä¹Ÿæ˜¯å¸Œæœ›å¾—åˆ°åˆ†æ‹…ã€‚â€œæˆ‘çš„ç”¨å¿ƒæ²¡æœ‰ä»€ä¹ˆä¸å¯¹ï¼Œä½ å°±æ˜¯ä¸æ‡‚å¾—æˆ‘çš„å¥½å¿ƒå¥½æ„ã€‚â€ ç„¶è€Œï¼Œå‡ ä¹æ¯ä¸€ä¸ªäººéƒ½æ˜¯ä¸ºäº†åˆ©ç›Šè€Œç›¸äº’ç»“äº¤ï¼Œåä¼¦å¤«äººçš„åœˆå­æ›´æ˜¯å¦‚æ­¤ã€‚å…´è®¸ï¼Œå¥¹çš„å¿ƒæ„ä¹Ÿæ˜¯å¦‚æ­¤ç½¢ã€‚æ²¡æœ‰æ‰€è°“çš„ä»·å€¼è®¤åŒï¼Œæœ‰çš„åªæ˜¯äººæ ¼çš„è½»è§†ã€‚ä»è¿™ä¸ªè§’åº¦ä¸Šè¯´ï¼Œåä¼¦å¤«äººæ˜¯éå¸¸å­¤ç«‹ï¼Œéå¸¸æ— åŠ©çš„ã€‚ä»–çš„å¥³å„¿æˆä¸ºäº†å”¯ä¸€å¯èƒ½æœ‰çš„å¿ƒçµæ”¯æŸ±ã€‚æ­¤æ—¶ï¼Œå¥½æ¢¦ç¢è£‚ï¼Œæ–—äº‰ç»“æŸã€‚ç¤¾ä¼šæ˜¯ç»æƒ…çš„ã€‚é—®é¢˜å‰§ç»“å°¾å±•ç°ç»™æˆ‘ä»¬çš„æ­£æ˜¯èµ„æœ¬ä¸»ä¹‰ç¤¾ä¼šå·²æˆä¸ºä¸€ä¸ªæ— çº¯æ´ä¸æ­£ä¹‰å¯è¨€çš„è‚®è„æ³¥æ½­ ã€‚(æ˜“æ™“æ˜ 8) &emsp;&emsp;ç»´å¤šåˆ©äºšæ—¶ä»£æ˜¯è‹±å›½å†å²ä¸Šçš„é»„é‡‘æ—¶æœŸï¼Œè´£ä»»ã€ç¤¼èŠ‚å’Œä¸ªäººé“å¾·å–å‘è¢«è§†ä¸ºé“å¾·è§‚å¿µçš„æ ¸å¿ƒã€‚ç„¶è€Œï¼Œè¿™äº›å ‚è€Œçš‡ä¹‹çš„â€œç»…å£«â€ã€â€œè´µå¦‡â€çš„èƒŒåå´éšè—ç€è®¸å¤šé»‘æš—çš„è§’è½ï¼Œä¾‹å¦‚è´«ç©·ï¼Œæ€§äº¤æ˜“ï¼ŒèµŒåšç­‰ã€‚å½“ä¸€ä¸ªå¦‡å¥³é¢ä¸´è´«ç©·åŠç—›è‹¦ä¸æŠŠè‡ªå·±å½“ä½œä¸œè¥¿ä¹°å‡ºå»çš„é€‰æ‹©æ—¶ï¼Œå¥¹çš„è¡Œä¸ºå·²ç»éš¾ä»¥åˆ¤æ–­æ˜¯å¦é“å¾·( æ¨ä½³å® 53 )ã€‚åŒæ—¶ï¼Œæ­£å› ä¸ºæœ‰åä¼¦å¤«äººä¸ºä»£è¡¨çš„è´«ç©·å¥³æ€§ç‰ºç‰²ï¼Œæ‰æœ‰è–‡è–‡å¯¹ç¤¾ä¼šçš„å‘ç°ï¼Œä»¥åŠè‡ªèº«çš„é“å¾·è§‰æ‚Ÿï¼›æ­£æ˜¯æœ‰äº†è–‡è–‡çš„â€œèƒŒå›â€ï¼Œæ‰ä¼šæœ‰ç¤¾ä¼šæ•´ä½“æ€§çš„ä»·å€¼å‘ç°ä¸é©å‘½æ€§çš„é“å¾·å‘è§‰ã€‚é•¿æ±Ÿåæµªæ¨å‰æµªï¼Œè¿™æ˜¯è¿›åŒ–è®ºçš„å¿…ç„¶é€‰æ‹©ã€‚ &emsp;&emsp;è®¸å¤šçš„è¯„è®ºè®¤ä¸ºï¼Œé€ æˆè¿™æ ·çš„ç¤¾ä¼šå‹è¿«ï¼Œå¯¹äººè´¬ä½ä¸æ— è§†ï¼Œå¹¶æŠŠé“å¾·æ”¾åœ¨æš—åœ°é‡Œçš„ï¼Œå…¨å› ä¸ºèµ„æœ¬ä¸»ä¹‰çš„ä¸å…¬ä¸ç½ªæ¶ã€‚è¿™ä¼¼ä¹å¾ˆæœ‰é“ç†ã€‚åœ¨æ–‡ä¸­ï¼Œç§‘æ´›å¤«èŒ¨ç”šè‡³è¯´ï¼Œâ€œä½ è¦æ˜¯è¿™ä¹ˆæ‹¿é“å¾·æ ‡å‡†é€‰æ‹©æœ‹å‹ï¼Œä½ åªæœ‰ç¦»å¼€è‹±å›½ã€‚â€ ç„¶è€Œï¼Œæˆ‘å´ä¸å®Œå…¨è¿™èˆ¬è®¤ä¸ºã€‚è‹¥æ”¾ä½å¤æ‚çš„æ”¿æ²»å› ç´ ï¼Œç¤¾ä¼šçš„ä»·å€¼å–å‘ä¸é“å¾·åå¥½æ˜¯å’Œç¤¾ä¼šåˆ›é€ åŠ›æ¯æ¯ç›¸å…³ã€‚è¦æ„å»ºä¸€ä¸ªå®Œæ•´çš„é“å¾·ä½“ç³»ï¼Œé™¤äº†è¦å°†ç”Ÿäº§åŠ›æé«˜ä»¥å¤–ï¼Œè¿˜éœ€è¦åŸºäºå½“ä¸‹ç”Ÿäº§åŠ›çš„é“å¾·è‡ªè§‰å’Œæ–‡åŒ–å‘å±•ã€‚è–‡è–‡ç­‰â€œæ–°äººâ€çš„å‡ºç°ï¼Œæ­£æ˜¯å¯¹ç¤¾ä¼šçš„è·Ÿè¿›ä¸æ”¹é€ ï¼Œè¿™å…¶ä¸­æ˜¯éœ€è¦æœ‰å¾ˆå¤šçš„çªç ´ç”šè‡³ç‰ºç‰²çš„ã€‚ç„¶è€Œè¿™å¹¶ä¸åŒäºâ€œç ´å››æ—§â€ä¸€èˆ¬çš„æ”¹é€ ï¼Œè¿™æ˜¯æ–‡åŒ–è‡ªè§‰å¯¼è‡´ï¼Œè€Œéçº¯ç²¹ä¸ºäº†é©å‘½è€Œé©å‘½ã€‚äººçš„ç´ è´¨æ²¡æœ‰å¾—åˆ°æé«˜è€Œæå‡ºæ‰€è°“çš„â€æ‰“ç ´æ—§ä¿—â€ï¼Œé‚£å°±æ˜¯æ¨ªç”Ÿç¾éš¾ï¼Œä¼ºæœºæŠ¥å¤ã€‚ç¤¾ä¼šæ•´ä½“åœ°å¯¹å¥³æ€§è¿›è¡Œä»·å€¼è´¬ä½å’Œä»·å€¼å‹è¿«ï¼Œå¾ˆå¤šæ—¶å€™æ˜¯åœ¨æ•´ä¸ªå®¢è§‚çš„ç»æµä½“ä¸­æœ‰ç€å¿…ç„¶çš„éœ€æ±‚ã€‚å°½ç®¡è¿™ç¡®å®ç½ªæ¶ï¼Œå´æ˜¯ç¤¾ä¼šå‘å±•ä¸­æ— æ³•é¿å…çš„è¿‡ç¨‹ï¼Œæ— å¯é¿å…çš„â€œå‘å±•ä¸­â€çš„ç”Ÿæ´»é€»è¾‘ã€‚ä¸å…¬ä¸ç½ªæ¶å§‹ç»ˆæ˜¯è¾ƒå°çš„ä¸€éƒ¨åˆ†ã€‚è§ä¼¯çº³åœ¨é“å¾·è¯„ä»·ä¸å†å²è¯„ä»·ä¹‹é—´æ²¡æœ‰è¡¨ç°å‡ºè‡ªå·±ç›´æ¥çš„è§è§£, è€Œåªæ˜¯å®¢è§‚åœ°å†ç°äº†ç”±ä¸¤ç§ä¸åŒçš„ç”Ÿæ´»é€»è¾‘æ‰€æ„æˆ çš„ç”Ÿæ´»å†…å®¹ã€‚å› è€Œåº”è¯¥è¯´ï¼Œè§ä¼¯çº³æ˜¯åœ¨æ•´ä¸ªç¤¾ä¼šä¸äººç±»å†å²ä¸­ç¡®è®¤äººç±»çš„ä½ç½®ã€ä¸ªä½“çš„ä½ç½®ï¼Œå…³æ³¨äººçš„å¤„å¢ƒã€æ­ç¤ºäººå­˜åœ¨çš„ç°çŠ¶çš„ã€‚è¿™æ­£æ˜¯è§ä¼¯çº³çš„æƒ…æ„Ÿä¹‹æ‰€åœ¨( æ˜“æ™“æ˜ 8 )ã€‚ &emsp;&emsp;è´«ç©·ä¸ä½ä¸‹çš„ç¤¾ä¼šåœ°ä½æŠŠåä¼¦å¤«äººé€¼ä¸Šäº†å¨¼å¦“çš„é“è·¯ï¼Œåœ¨è¿™æ ·çš„ç”Ÿè®¡ä¸‹ï¼Œå¥¹æˆä¸ºäº†è´µå¦‡ï¼Œè¿›å…¥äº†ä¸Šæµç¤¾ä¼šï¼Œæ¯æ—¥äº«å—ç€è£åå¯Œè´µã€‚ç„¶è€Œï¼Œå¥¹çš„é€‰æ‹©æ‰€é€ å°±çš„é“å¾·ä½ä½å†ä¸€æ¬¡æŠŠå¥¹æ”¾åˆ°äº†ç¤¾ä¼šçš„ä½ä½ï¼Œç¤¾ä¼šé“å¾·ä¸ç¤¾ä¼šä¼¦ç†çš„ä½ä½ã€‚ä»é‡‘é’±ä»·å€¼çš„ä½ä½è·³åˆ°äº†é“å¾·ä»·å€¼çš„ä½ä½ï¼Œå¥¹å§‹ç»ˆæ²¡æœ‰é€ƒç¦»ç¤¾ä¼šçš„å‹è¿«ï¼Œå§‹ç»ˆæ²¡æœ‰é€ƒè„±ä¸ªäººä»·å€¼çš„è´¬ä½ä¸æ— è§†çš„å‘½è¿ã€‚å¥¹çš„äººç”Ÿå……æ»¡äº†ä¼¦ç†çš„ç–‘éš¾ã€‚ä»å®¶åº­åˆ°ç¤¾ä¼šï¼Œä»è‡ªèº«åˆ°ä»–äººï¼Œå¥¹çš„é€‰æ‹©ä¸€ç›´éƒ½æ— æ³•æ‘†è„±ç¤¾ä¼šä»·å€¼ç¡®å®æ‰€å¸¦æ¥çš„ä¼¦ç†ç–‘éš¾ã€‚è¿™æ ·çš„å¤„å¢ƒä½¿å¾—å¥¹æ³¨å®šæ˜¯ç¤¾ä¼šè¿‡æ¸¡å‘å±•ä¸­è¢«æµ·æµªæ·¹æ²¡çš„æ²™å­ï¼Œå°½ç®¡æœ‰è‡ªå·±çš„ä½œç”¨ï¼Œä½†çœ‹ä¸Šå»å´ååˆ†åœ°å¾®å°ã€‚è¿™å°±æ˜¯è§ä¼¯çº³åœ¨å¯¹å½“æ—¶äººç±»å†å²æ‰€å¤„ä½ç½®çš„çŠ¶æ€è¿›è¡Œçš„æç»˜ã€‚åŒ…æ‹¬åä¼¦å¤«äººçš„â€œç›¸ä¼¼è€…â€ï¼Œå¼—å…°å…‹ï¼Œç§‘æ´›å¤«èŒ¨ï¼Œæ— ç–‘ä¹Ÿéƒ½æ˜¯æ—¶ä»£çš„æ˜ ç…§ã€‚ &emsp;&emsp;å°¼é‡‡æ›¾ç»è¯´è¿‡ï¼Œäººä¹‹ä¼Ÿå¤§ï¼Œåœ¨äºå®ƒæ˜¯æ¡¥æ¢è€Œä¸æ˜¯ç›®çš„ï¼›äººä¹‹å¯çˆ±ï¼Œåœ¨äºå®ƒæ˜¯è¿‡æ¸¡ä¸æ€»ç»“ã€‚åœ¨ç¤¾ä¼šä»·å€¼ä¸æ–­å‘å±•çš„è¿‡ç¨‹ä¸­ï¼Œé“å¾·ä¸ä¼¦ç†ä¼šè¢«ä¸æ–­æ›´æ–°ï¼Œä¸æ–­ä¿®æ­£ï¼Œä¸æ–­ç¨³å›ºã€‚æ¯ä¸ªäººéƒ½å°†ä¼šæœ‰æ›´å¤šçš„ç¤¾ä¼šæœºé‡ã€‚è€Œã€Šåä¼¦å¤«äººçš„èŒä¸šã€‹ç»™æˆ‘ä»¬å±•ç¤ºçš„ï¼Œä¾¿æ˜¯æ›¾ç»çš„ä¸å…¬ï¼Œæ›¾ç»çš„å‹è¿«ä¸å¿½è§†ï¼Œæ›¾ç»çš„ç–‘éš¾ä¸å›°æƒ‘ã€‚è¿™ç§äººç±»å‘å±•è¿‡ç¨‹ä¸­çš„è‡ªæˆ‘å®¡è§†ä¸åæ€å°†ä¼šæ¨åŠ¨äººç±»ç¤¾ä¼šæ–‡æ˜çš„å‘å±•ï¼Œå°†ä¸–ç•Œå˜å¾—æ›´åŠ å’Œè°ï¼Œæ›´åŠ ç¾å¥½ï¼Œæ›´åŠ æ¸©æš–ï¼Œæ›´åŠ å……æ»¡å¸Œæœ›ã€‚ Work cited Dierkes-Thrun and Petra. â€œIncest and the Trafficking of Women in Mrs. Warrenâ€™s Profession: â€˜It Runs in the Familyâ€™ â€œ English Literature in Transition, 1880-1920, 2006: 293-310. Print. å°¼é‡‡ï¼šã€ŠæŸ¥æ‹‰å›¾æ–¯ç‰¹æ‹‰å¦‚æ˜¯è¯´ã€‹ï¼Œé»„æ•¬ç”«ã€ææŸ³æ˜è¯‘ï¼Œä¸­åä¹¦å±€ï¼Œ2013å¹´ Powell, Kerry. The Cambridge companion to Victorian and Edwardian theatre. Cambridge University Press, 2004. Print. è§ä¼¯çº³ï¼šã€Šåä¼¦å¤«äººçš„èŒä¸šã€‹ï¼Œã€Šåä¼¦å¤«äººçš„èŒä¸šâ€”â€”è§ä¼¯çº³å‰§ä½œé€‰ã€‹ï¼Œè´ºå“ˆå®šã€å´æ™“å›­è¯‘ï¼Œä¸Šæµ·ï¼šä¸Šæµ·è¯‘æ–‡å‡ºç‰ˆç¤¾ï¼Œ2006å¹´ï¼Œç¬¬103 -182é¡µã€‚ æ¨ä½³å®:ã€Šã€ˆåä¼¦å¤«äººçš„èŒä¸šã€‰çš„æ–‡å­¦ä¼¦ç†å­¦æ‰¹è¯„è§£è¯»ã€‹ï¼Œå“ˆå°”æ»¨å¸ˆèŒƒå¤§å­¦ï¼Œ2016å¹´ã€‚ æ˜“æ™“æ˜ï¼šã€Šä»é—®é¢˜å‰§çœ‹è§ä¼¯çº³çš„æ€æƒ³å€¾å‘ã€‹ï¼Œã€Šå¤–å›½æ–‡å­¦è¯„è®ºã€‹1999å¹´02æœŸï¼Œç¬¬8é¡µã€‚","link":"/2017/08/09/åä¼¦å¤«äººçš„èŒä¸šä½œä¸š/"},{"title":"LeetCode - äºŒåˆ†æŸ¥æ‰¾","text":"â€œ90%çš„ç¨‹åºå‘˜ä¸èƒ½å†™å‡ºæ­£ç¡®çš„äºŒåˆ†æŸ¥æ‰¾â€ â€“ ä¸æ˜¯æˆ‘è¯´çš„ äºŒåˆ†æŸ¥æ‰¾åŠå…¶å˜ç§æœ‰å¾ˆå¤šç§å½¢å¼ï¼Œä¾‹å¦‚æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå‡ºç°çš„ã€æŸ¥æ‰¾å‡ºç°çš„åŒºé—´ï¼Œç­‰ã€‚ä½†éƒ½ä¸èƒ½è„±ç¦»ä¸€ä¸ªå®—æ—¨ï¼šæ¯æ¬¡æŸ¥æ‰¾éƒ½è¦æœ‰ä¸‹æ ‡çš„æ›´è¿­ã€‚ ä¸€ä¸ªç»å…¸çš„äºŒåˆ†æŸ¥æ‰¾çš„é”™è¯¯æ˜¯ï¼Œå‡ºç°äº†ä¸‹æ ‡åˆ†åˆ«å¤„åœ¨äº†iå’Œi+1ï¼Œè€Œå´åˆ¤æ–­nums[l] &lt; nums[mid] ? l = mid : r = midã€‚ï¼ˆè¿™é‡Œæ˜¯ä¸è§„èŒƒçš„å†™æ³•ï¼‰ã€‚è¿™ä¼šå¯èƒ½å¯¼è‡´äº§ç”Ÿä¸€ä¸ªæ­»å¾ªç¯ï¼Œå› ä¸ºï¼Œ(i + i + 1) // 2 = iã€‚å¦‚æœç¬¬ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶è¢«å‘½ä¸­ï¼Œåˆ™æ°¸è¿œå¾ªç¯åœ¨äº†é‚£å„¿ã€‚ å¦å¤–ä¸€ä¸ªä¸æ°å½“çš„åšæ³•æ˜¯ï¼Œåˆ¤æ–­ä¸¤è¾¹çš„å€¼ï¼Œè¿›è€Œåˆ¤æ–­æ˜¯å¦åˆ°äº†è¾¹ç•Œï¼Œç„¶ååˆ¤æ–­midå€¼ã€‚è¿™ç§åšæ³•å¯èƒ½å¯¼è‡´çš„é”™è¯¯æ˜¯ï¼Œl == i, r == i + 1 æ—¶ï¼Œæˆ‘çš„midåˆè¦è¢«åˆ¤æ–­äº†ä¸€æ¬¡ã€‚è¿™ç§åšæ³•æ˜¯æ¯”è¾ƒå†—ä½™çš„ï¼Œè€Œä¸”å¯èƒ½å¯¼è‡´insidious bugã€‚ åŸºæœ¬æ­£ç¡®åšæ³•æ˜¯ï¼Œ12345678910111213141516171819bool bin_search(vector&lt;int&gt;&amp; nums, int target) /* åˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼Œä¸”æ•°å€¼ä¸é‡å¤çš„æƒ…å†µ */{ int l = 0, r = nums.size() -1; while (l &lt; r) { int mid = (l + r) / 2; if (nums[mid] &lt; target) /* targetåœ¨ midå·¦è¾¹ */ { l = mid + 1; } else /* å› ä¸º (i + i + 1) // 2 -&gt; i, r = midå°±è¡Œäº† */ { r = mid; } } return nums[l] == target;} ä¸€äº›å˜ç§ï¼š æ•°å€¼å­˜åœ¨ï¼Œæ‰¾è¾¹ç•Œï¼š1234567891011121314151617181920212223242526272829303132333435363738/* LeetCode p34 */class Solution { public: vector&lt;int&gt; searchRange(vector&lt;int&gt;&amp; nums, int target) { if (nums.size() == 0) return vector&lt;int&gt;{-1, -1}; int l = 0, r = nums.size() - 1, mid; int i = l, j = r; /* æ‰¾å°è¾¹ç•Œ */ while (j &gt; l) { mid = (j + l) / 2; if (nums[mid] &lt; target) { l = mid + 1; } else { j = mid; } } /* ä¸å­˜åœ¨ï¼Œè¿”å› */ if (nums[j] != target) { return vector&lt;int&gt;{-1, -1}; } /* æ‰¾å¤§è¾¹ç•Œ */ while (i &lt; r) { mid = (i + r) / 2; if (nums[mid] &lt;= target) { i = mid + 1; } else { r = mid; } } return nums[r] == target ? vector&lt;int&gt;{l, r} : vector&lt;int&gt;{l, r - 1}; }}; äºŒåˆ†æŸ¥æ‰¾çš„è¾¹ç•Œæ¡ä»¶ååˆ†å€¼å¾—æ³¨æ„ã€‚å¾ˆå®¹æ˜“å‡ºç°æŸ¥æ‰¾ç¼ºæ¼ã€æ­»å¾ªç¯çš„æƒ…å†µã€‚ å¦‚æœ‰é”™è¯¯ï¼Œæ³è¯·æŒ‡æ­£ï¼","link":"/2019/03/20/binary_search/"},{"title":"Class Stuff","text":"&emsp;&emsp;è¿™ä¸ªå­¦æœŸæ•™æˆ‘ä»¬ç¦»æ•£çš„æ˜¯Yjj.&emsp;&emsp; é™ˆå¯…è€å¸ˆçš„ppt (psw: ClassStuff) å¦‚æœä½ æœ‰ä»€ä¹ˆå¥½çš„èµ„æ–™ï¼Œæ¬¢è¿å‘åˆ°è¿™é‡Œæ¥ ï¼ˆç»§ç»­æ„‰å¿«åœ°å¿µå±å±è¸¢ï¼‰","link":"/2017/09/07/class-stuff/"},{"title":"DCA - å¯¹AESä¾§ä¿¡é“åˆ†æçš„æ€»ç»“","text":"DCAè®¡ç®—åŸç†ä¸å®ç°ä¸­çš„å±€é™æ€§DCAé‡‡ç”¨ä¸ç¡¬ä»¶ä¸ŠDPAç›¸è¿‘çš„ä»traceåˆ°relationship computationçš„æ“ä½œæ–¹æ¡ˆï¼Œé€šè¿‡é‡‡é›†æ ·æœ¬-æ ·æœ¬åˆ†ç±»-æ ·æœ¬ç›¸å…³æ€§å¯¹æ¯”çš„æ–¹æ³•ï¼Œåˆ†æç»™å‡ºçš„çŒœæµ‹æ˜¯å¦æ­£ç¡®ï¼Œå¾—å‡ºç»“è®ºã€‚ç›®å‰çš„æƒ…å†µæ˜¯ï¼Œå¤„äºä¸­é—´çš„noisy roundï¼Œæ— æ³•æŠµå¾¡æˆ–å®Œå…¨æŠµå¾¡DCAæ”»å‡»ã€‚ è¸ªè¿¹é‡‡é›†è¸ªè¿¹é‡‡é›†å™¨TracerGrindæ˜¯ä¸€ä¸ªvalgrindçš„æ’ä»¶ï¼Œä»–ä¼šè®°å½•æ¯ä¸€æ¬¡åº”ç”¨ä¸­çš„è¯»å†™åŠå…¶è¯»å†™å‘¨æœŸã€å¤–éƒ¨è°ƒç”¨ã€æŒ‡ä»¤åœ°å€ã€æ•°æ®åœ°å€ã€æ•°æ®åŒºåŸŸåŠé•¿åº¦ç­‰ã€‚ä¸€èˆ¬æˆ‘ä»¬éœ€è¦é‡‡é›†çš„ä¸ºæ•°æ®çš„è¯»å†™æƒ…å†µã€‚æ¯ä¸€æ¬¡åŠ å¯†é‡‡é›†éƒ½ä¼šå½¢æˆä¸€ä¸ª(æ˜æ–‡ï¼Œå¯†æ–‡ï¼Œè¯»å†™ä¸Šä¸‹æ–‡)ä¸‰å…ƒç»„ã€‚ä¸åŒçš„ä¸‰å…ƒç»„æœ‰åˆ©äºæœ€ç»ˆåæœŸåšCPAæ—¶ä¸åŒçš„è¦†ç›–æƒ…å†µã€‚æ ¹æ®ç®—æ³•å†…éƒ¨çš„é•¿åº¦ä¸åŒï¼Œéœ€è¦é‡‡ç”¨ä¸åŒçš„ç›‘è§†é•¿åº¦ã€‚å¦‚noisy_roundæ˜¯8-128çš„ï¼Œä¸¤ä¸ª64æ‹¼æˆä¸€ä¸ª128ã€‚è¿™æ„å‘³ç€å¤§æ¦‚ç‡CPAæ‰€éœ€è¦çš„è¯»å†™è¸ªè¿¹åˆ†å¸ƒåœ¨é•¿åº¦ä¸º8çš„éƒ¨åˆ†ä¸Šã€‚è¿™ä¹Ÿæ˜¯ä¸€å¼€å§‹åˆ†æ8-128ä¸æˆåŠŸçš„åŸå› ã€‚ è¸ªè¿¹æ±‡æ€»é‡‡é›†åçš„è¸ªè¿¹ä¼šæ±‡æ€»å½¢æˆä¸€ä¸ªç‹¬ç«‹çš„æœ‰ä¸€å®šæ ¼å¼çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸Šï¼Œä¾›Daredevilè¿›è¡ŒCPAåˆ†æã€‚Daredevilä¸€èˆ¬é‡‡ç”¨ä¸€é˜¶ç›¸å…³å…³ç³»åˆ†ææ¥åšå¯†é’¥çš„åŒ¹é…å·¥ä½œã€‚ç›¸å…³é…ç½®ä¼šå†™åœ¨configæ–‡ä»¶ä¸Šã€‚å¦‚ 1234567891011121314151617181920212223242526[Traces]files=1trace_type=itranspose=trueindex=0nsamples=492096trace=stack_data_rw8_201_492096.trace 201 492096[Guesses]files=1guess_type=utranspose=trueguess=stack_data_rw8_201_492096.input 201 16[General]threads=8order=1return_type=doublealgorithm=AESposition=LUT/AES_BEFORE_SBOXround=0bitnum=allbytenum=allcorrect_key=0x000102030405060708090a0b0c0d0e0fmemory=4Gtop=20 å°±ä»£è¡¨äº†ï¼Œè¸ªè¿¹çš„æ•°æ®ä¸ºæ•´å‹ï¼Œè¸ªè¿¹çŸ©é˜µï¼ˆæ—¶é—´ä¸ºåˆ—ï¼Œæ•°æ®ä¸ºè¡Œï¼‰éœ€è¦ç»è¿‡è½¬ç½®ï¼ˆè¿™é‡Œæ˜¯å›ºå®šå‚æ•°ï¼‰ï¼Œè¸ªè¿¹æ±‡æ€»åä¸ºstack_data_rw8_201_492096.traceï¼ŒçŒœæµ‹æ¨å¯¼è¾“å…¥æ˜¯åˆ©ç”¨æ˜æ–‡è¾“å…¥ï¼Œåä¸ºstack_data_rw8_201_492096.inputï¼Œä¸€å…±è¿›è¡Œäº†201æ­¤è¿½è¸ªï¼Œäº§ç”Ÿäº†492096ä¸ªè¯»å†™æ ·æœ¬ç‚¹ï¼Œç®—æ³•æ¯è½®é•¿åº¦ä¸º16å­—èŠ‚ï¼ˆå³é’ˆå¯¹0~15è½®è¿›è¡Œç ´è§£ï¼‰ï¼Œç”¨AESçš„åœ¨sboxä¹‹å‰çš„è¡¨æ¥è¿›è¡Œæ¯”å¯¹ï¼ˆè¿™ä¸ªé€šå¸¸è¦after sboxæ‰èƒ½æˆåŠŸï¼‰ï¼Œé’ˆå¯¹round 0 è¿›è¡Œç ´è§£ï¼Œç»™å‡ºå‰20ä¸ªæœ€é«˜å¯èƒ½çš„å¾…é€‰æ ·æœ¬ã€‚ æ„å»ºçŒœæƒ³æ„å»ºçŒœæƒ³çš„è¿‡ç¨‹è¿›è¡Œé€‰æ‹©å‡½æ•°çš„è¿‡ç¨‹ã€‚é€‰æ‹©å‡½æ•°ä¼šå°†æ¯ä¸€ä¸ªæ˜æ–‡è¾“å…¥å¯¹åº”åˆ°å­—èŠ‚ä¸€ä¸ªæ˜ å°„è¿‡çš„å­—èŠ‚ï¼Œè¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬ç§°ä¹‹ä¸ºçŒœæƒ³è¡¨å¯¹æ¢ã€‚è¾“å…¥æ˜æ–‡ä¼šè¢«å¯¹æ¢ï¼Œç„¶åæŒ‰ç…§16å­—èŠ‚çš„å¯¹æ¢åç»“æœè¿›è¡Œæ±‡æ€»ã€‚é€šå¸¸é€‰æ‹©å‡½æ•°ä¼šå°†ä¸€ä¸ªå­—èŠ‚å¯¹åº”åˆ°ä¸€ä¸ªå¯¹æ¢è¿‡çš„æ±‰æ˜è·ç¦»ï¼ˆå½“æ•°æ®æœ‰ç¼ºé™·çš„æ—¶å€™ï¼‰æˆ–æ¯ä¸€æ¯”ç‰¹ä½ç½®å¯¹åº”åˆ°0-1ä¸Šï¼Œæˆä¸ºé€‰æ‹©åˆ†ç±»çš„ä¾æ®ã€‚è¿™é‡Œçš„çŸ©é˜µç»“æ„æ¯”è¾ƒä¸æ˜æ˜¾ï¼Œä»–æ˜¯ä¸€ä¸ª$n \\times m$çš„çŸ©é˜µï¼Œnæ˜¯é‡‡æ ·æ¬¡æ•°ï¼Œmæ˜¯16ï¼Œå›ºå®šé•¿åº¦ã€‚ä»£è¡¨è¾“å…¥çš„æ˜æ–‡è¢«åˆå¹¶åˆ°ä¸€ä¸ªçŸ©é˜µä¸Šã€‚è¿™äº›çŸ©é˜µæ¯ä¸ªæ˜æ–‡é€šè¿‡ä¸€ä¸ªé€‰æ‹©ï¼Œå°±å¾—åˆ°çŒœæƒ³ã€‚ 123456789for (i=0; i &lt; nrows; i++) { for (j=0; j &lt; n_keys; j++) { if (bit == -1) { /* No individual bits. */ (*guess)[j][i] = HW ((TypeGuess) sbox[ (uint8_t) mem[i][bytenum] ^ j ]); } else if (bit &gt;= 0 &amp;&amp; bit &lt; 8) { (*guess)[j][i] = (TypeGuess) ((sbox[ (uint8_t) mem[i][bytenum] ^ j ] &gt;&gt; bit)&amp;1); } }} æ ·æœ¬å…³ç³»è®¡ç®—è¿™ä¸€æ­¥ä¼šå°†æ¯ä¸€ä¸ªæ ·æœ¬ç‚¹ä¸ä¸Šä¸€æ­¥éª¤çš„çŒœæƒ³è¿›è¡Œæ¯”å¯¹ã€‚æ¯è¯»å†™16ä¸ªå­—èŠ‚çš„æ ·æœ¬ï¼Œå°±ä¸ç›®æ ‡çŒœæƒ³è¿›è¡Œä¸€æ¬¡æ¯”å¯¹ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆnoisy roundä¼šæˆåŠŸçš„åŸå› ï¼šå¦‚æœä½ çš„é€‰æ‹©å‡½æ•°æœ‰æ•ˆï¼Œä¸”ä½ çš„æœ‰æ•ˆåŒºé—´è¢«é‡‡æ ·äº†ï¼Œå¦‚æœç›¸å…³å…³ç³»æ­£ç¡®ï¼Œä½ å°±å¿…ç„¶ä¼šåœ¨åç»­çš„å…³ç³»æ¯”å¯¹ä¸Šäº§ç”Ÿä¸€ä¸ªå³°å€¼ã€‚ä½†è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆnoisy roundä¼šå¯¼è‡´éƒ¨åˆ†å‡ºé”™çš„åŸå› ï¼šæˆ‘ä»¬æ”»å‡»çš„æ˜¯ç¬¬0è½®åˆ°ç¬¬ä¸€è½®ä¹‹é—´çš„æ•°æ®ã€‚å¦‚æœè¿™ä¸ª16å­—èŠ‚noisy roundè¢«æ‹†å¼€äº†æœ‰ä¸€åŠè¢«å½“ä½œä¸‹ä¸€ä¸ª16å­—èŠ‚æ ·æœ¬ï¼Œåç»­çš„æ‰€æœ‰è¿‡ç¨‹ä¼šæœ‰è¿é”ååº”ã€‚è¿™ä¹Ÿæ˜¯ç¬¬ä¸€è½®noisy roundèƒ½éƒ¨åˆ†é˜»æŒ¡DCAçš„åŸå› ã€‚è¿™ä¹Ÿä¾§é¢è¯æ˜äº†ï¼Œnoisy roundåœ¨å®ç°ä¸Šä¸æˆ‘ä»¬æ‰€æƒ³çš„ï¼Œæœ‰ä¸€å®šçš„å·®åˆ«ã€‚ä»–çš„ç»“æ„è·Ÿæ­£å¸¸AESè½®æ¬¡ä¸å¤ªä¸€æ ·ã€‚ æŒ‰ç…§ç›¸å…³å…³ç³»ï¼Œç»™å‡ºTop Kç¬¦åˆçš„å­—èŠ‚å¹¶ä¸æ˜¯æ¯ä¸€æ¬¡éƒ½èƒ½è·å–åˆ°æœ€ä½³çš„æ¯”å¯¹å­—èŠ‚ã€‚æœ‰å¯èƒ½æœ‰ä¸€ä¸ªæ¯”å¯¹è¾¾æ ‡ï¼Œä½†åˆæœ‰å¯èƒ½æ²¡æœ‰ã€‚å…¶ä¸­ï¼Œpeekæœ€æ¥è¿‘0.25ï¼Œ0.5ï¼Œ0.75ï¼Œ1çš„ï¼Œè¢«è®¤ä¸ºæ˜¯æœ€ä½³é€‰æ‹©ã€‚ å¸¸è§çš„æ“ä½œå¤±è´¥ ç›®æ ‡æ•°æ®é•¿åº¦ä¸åŒã€‚å¦‚ï¼š8-128çš„è¡¨å¿…å®šå¯¹åº”é•¿åº¦ä¸º8å­—èŠ‚ï¼Œå³64bitçš„è¯»å†™åŒºé—´ã€‚ï¼ˆå› ä¸º8å­—èŠ‚æ˜¯ç›®å‰æœ€é•¿çš„åŸºç¡€æ•°æ®ï¼‰å¦‚æœä½¿ç”¨äº†1ã€2ã€4å­—èŠ‚ï¼Œå³charï¼Œshortï¼Œintï¼Œä¼šé”™è¯¯é‡‡æ ·ã€‚é»˜è®¤è¿›è¡Œ4å­—èŠ‚çš„é‡‡æ ·ã€‚ ç›®æ ‡åœ°å€ä¸èƒ½ç²¾å‡†å®šä½ã€‚è¿™tracegraphï¼Œä¹Ÿç¡®å®æ˜¯å¹ç‰›ã€‚å› ä¸ºå‡ ä¹ä¸å¯èƒ½çœ‹å‡ºæ¥åœ°å€åœ¨å“ªé‡Œã€‚ åŠ¨æ€åº“æœ‰è‡ªå·±çš„åœ°å€ç©ºé—´ï¼Œå¿…é¡»é‡‡å–å…¶ä»–æªæ–½ã€‚ WBSM4å¯èƒ½å­˜åœ¨çš„éšæ‚£ ä»¿å°„å˜æ¢çš„è®¡ç®—è¿‡ç¨‹ä¼šç›´æ¥å¹²æ‰°åˆ°å¯¹æ¢å…³ç³»çš„æ¯”å¯¹ï¼Œè¿™ä¼šå¯¼è‡´cpaæ— æ³•è¿›è¡Œæˆ–è¯¯åˆ¤ã€‚è¿™ç‚¹æ—¥åæ·±å…¥æ‹“å±•ã€‚ ä¸»å¯†é’¥çš„æƒ…å†µï¼Œä¼šæœ‰æ›´å¤šå‡ºå…¥ã€‚aeså’Œdesçš„ç¬¬ä¸€è½®å¯†é’¥éƒ½æ˜¯åŸç”Ÿå¯†é’¥æ²¡æœ‰æ”¹å˜ï¼Œæ‰€ä»¥ç¬¬ä¸€è½®å°±ç»™å‡ºmaster keyã€‚sm4çš„æƒ…å†µï¼Ÿ","link":"/2020/03/01/dca/"},{"title":"ç½‘ç›˜ç³»ç»Ÿå»ºç«‹å•¦ï¼","text":"ä¸ºäº†è‡ªå·±ã€ç­å§”ä»¥åŠç›¸å…³éœ€è¦çš„äººå®ç°åˆ†äº«æ–‡ä»¶çš„ä¾¿åˆ©ï¼Œæˆ‘å»ºç«‹äº†ä¸€ä¸ªç½‘ç›˜ç³»ç»Ÿï¼Œç”¨çš„æ˜¯seafile&emsp;&emsp;å½“ç„¶æ˜¯fs.wxk.eså•¦ã€‚ã€‚ï¼ˆå½“ç„¶æ˜¯é€‰æ‹©ç»§ç»­é˜…è¯»å•¦ï¼‰ seafileæœ€å¤§çš„å¥½å¤„åœ¨äºï¼Œå®ƒæ˜¯pythonè¿è¡Œæ—¶ï¼Œcä¸ºä¸»ä½“æ„å»ºçš„ã€‚éƒ¨ç½²ä¾¿æ·ï¼Œæ–‡æ¡£é½å…¨ï¼ˆæœ‰ç‚¹è€ï¼‰ä½†ä¸è¶³è¿˜æ˜¯æœ‰å¾ˆå¤šçš„ã€‚æ¯”å¦‚ä¸æ”¯æŒæ–‡ä»¶æœç´¢ã€‚ ç°åœ¨å®ç°çš„ç®€å•çš„åŠŸèƒ½ç‰¹æ€§ï¼š ç®€å•çš„æ–‡ä»¶å­˜å‚¨ï¼šç½‘ç›˜ä¼šåˆ†é…å°‘é‡çš„å®šé¢ï¼Œæ»¡è¶³åˆ†äº«å…¬ç¤ºã€æ–‡ä»¶çš„éœ€æ±‚ï¼›ï¼ˆä¸€èˆ¬å°‘äº800MBï¼‰ å¤–é“¾åˆ†äº«ï¼šé€šè¿‡å¤–é“¾çš„åˆ†äº«ï¼Œå®ç°æ–‡ä»¶çš„å…±äº«ã€‚å¯ä»¥æ·»åŠ å¤–é“¾è¿‡æœŸæ—¶é—´ï¼Œæ·»åŠ å¯†ç ï¼Œè¿˜å¯å®ç°æ›´å¤šï¼› PDFã€wordã€excelã€markdownç­‰é¢„è§ˆï¼šç½‘ç›˜è‡ªå¸¦é¢„è§ˆç³»ç»Ÿï¼Œå¯ä»¥å®ç°å…ä¸‹è½½é¢„è§ˆï¼›ï¼ˆå¾®ä¿¡å†…éƒ¨æµè§ˆå™¨ä¸æ”¯æŒï¼ˆå¶å°”é—ªé€€ï¼‰ï¼‰ã€é¢ï¼Œå¥½åƒè¿˜æ˜¯ä¸æ”¯æŒxlsxæ ¼å¼çš„é¢„è§ˆï¼Œéšæ„å•¦ï¼ˆæ»‘ç¨½ï¼‰ã€‘ å…¨é¢çš„å®‰å…¨æœºåˆ¶ï¼šå°ç«™æ‹¥æœ‰å®Œå¤‡çš„å®‰å…¨è§„åˆ™ï¼Œæ‹¥æœ‰A+çº§çš„å®‰å…¨è¯„ä¼°ï¼› ä¸»æœºå•†æä¾›å®Œå¤‡çš„æœåŠ¡ï¼Œä¸ä¼šæ–­ç”µï¼ŒæåŠ›ä¿æŠ¤æ•°æ®ä¸ä¼šä¸¢å¤±ã€‚ å°šå­˜çš„ä¸è¶³ï¼š ç”±äºæœåŠ¡å™¨ä»…ä¸ºå°‘é‡ç”¨æˆ·ä½¿ç”¨è€Œé…ç½®ï¼Œç½‘ç›˜ä»…æä¾›å°‘é‡çš„æ³¨å†Œåé¢å³å­˜å‚¨ç©ºé—´ï¼› æœåŠ¡å™¨å¤„äºæµ‹è¯•é˜¶æ®µï¼Œä»…ä¿è¯90%çš„SLAï¼›ï¼ˆ233ï¼‰ å…¶å®ä¸»è¦çš„ç”¨é€”ï¼Œè¿˜æ˜¯åˆ†äº«æ–‡ä»¶çš„æ–¹ä¾¿å¿«æ·ï¼Œä»¥åŠå®‰å…¨çš„è€ƒè™‘ã€‚å…¶å®pan.scnuå·²ç»åšäº†å…¨éƒ¨äº‹æƒ…äº†â€¦â€¦ç°åœ¨å·²ç»å…±äº«å‡ºæ¥çš„é“¾æ¥ï¼š ä¸€äº›ä¹¦ç±ä»¥åŠå‚è€ƒèµ„æ–™ ä¸€äº›åŸºæœ¬ç½‘ç»œå·¥å…· æ•°å­¦å»ºæ¨¡çš„é›¶æ˜Ÿèµ„æ–™ å¯†ç éƒ½æ˜¯ping1008 ï¼ˆå…³äºé‡Œé¢çš„å†…å®¹ï¼Œæœ‰äº›æ˜¯æ¯”è¾ƒç§äººåŒ–ä½†åˆæ˜¯å…è´¹çš„ã€‚è¯·ä¸è¦åˆ©ç”¨ï¼‰ æ›¾ç»ä¹Ÿç”¨è¿‡owncloudæ„å»ºï¼Œä½†ç›¸å¯¹æ¯”è¾ƒç¹çï¼Œè€Œä¸”ä¼šå‡ºç°ä¸‹è½½æ–­é“¾çš„æƒ…å†µï¼ˆæœªæ¢æ¸…æ¥šæ˜¯ä»€ä¹ˆåŸå› ï¼‰ï¼Œäºæ˜¯ä¹ä¸€è„šè¸¹å¼€äº†ã€‚åŒæ—¶ï¼Œä¸ºäº†ç½‘ç«™çš„å®‰å…¨ï¼Œå¼„åˆ°äº†ä¸å°‘nginxéƒ¨ç½²ä¸Šçš„æŠ€å·§ã€‚ä¾‹å¦‚é˜²æ­¢xssæ”»å‡»ï¼Œå®ç°CSTï¼Œä»¥åŠç›¸åº”çš„ç›‘æ§ç­‰ã€‚ç›‘æ§ç”¨äº†report.ioï¼Œä¸€ä¸ªéå¸¸ç®¡ç”¨çš„CSTæŠ¥å‘Šç½‘ç«™ã€‚ ä¸€äº›å¸¸ç”¨çš„Nginxè§„åˆ™ï¼š 123456789101112131415161718192021222324252627282930313233343536server_tokens off;ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # ä»…å…è®¸å®‰å…¨çš„SSLç‰ˆæœ¬add_header X-Robots-Tag none;add_header X-Download-Options noopen;add_header X-Permitted-Cross-Domain-Policies none;add_header X-Frame-Options \"SAMEORIGIN\";add_header X-XSS-Protection \"1; mode=block\";add_header X-Content-Type-Options nosniff;add_header Strict-Transport-Security \"max-age=129600; includeSubDomains\";add_header 'Referrer-Policy' 'origin';add_header Content-Security-Policy \"default-src 'self' https://pagead2.googlesyndication.com; script-src 'self' data: 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://secure.gravatar.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://fonts.gstatic.com https://pagead2.googlesyndication.com https://secure.gravatar.com https://translate.googleapis.com; img-src 'self' data: https://dmmj3mmt94rvw.cloudfront.net https://fonts.gstatic.com https://csi.gstatic.com https://googleads.g.doubleclick.net https://gstatic.com https://secure.gravatar.com https://stats.g.doubleclick.net https://www.gstatic.com; font-src 'self' data: https://dmmj3mmt94rvw.cloudfront.net https://fonts.googleapis.com https://fonts.gstatic.com https://themes.googleusercontent.com https://www.gstatic.com; connect-src 'self' https://fonts.gstatic.com https://pagead2.googlesyndication.com; media-src 'self' data: https://ssl.gstatic.com; object-src 'self' https://fonts.gstatic.com https://pagead2.googlesyndication.com https://www.gstatic.com; child-src 'self'; frame-src 'self' https://googleads.g.doubleclick.net gsa://onpageload https://onpageload https://secure.gravatar.com https://tpc.googlesyndication.com ; worker-src 'self'; frame-ancestors 'self'; form-action 'self'; upgrade-insecure-requests; report-uri https://pingfs.report-uri.io/r/default/csp/enforce\";# ç•™æ„é‚£ä¸ªreport-uriï¼Œæ˜¯æˆ‘ä¸ªäººçš„æŠ¥å‘Šuriã€‚è¯·ä½¿ç”¨æ—¶åŠ¡å¿…æ›´æ”¹ä¸ºè‡ªå·±çš„ssl_session_cache shared:SSL:10m;ssl_session_timeout 20m;ssl_prefer_server_ciphers on;ssl_ciphers ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-RC4-SHA:!ECDHE-RSA-RC4-SHA:ECDH-ECDSA-RC4-SHA:ECDH-RSA-RC4-SHA:ECDHE-RSA-AES256-SHA:!RC4-SHA:HIGH:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!CBC:!EDH:!kEDH:!PSK:!SRP:!kECDH;ssl_dhparam /etc/ssl/certs/dhparam.pem; # è¿™æ˜¯è‡ªå·±ç”Ÿæˆçš„DH keyï¼Œç•™æ„ä¸‹æ–‡å‚è€ƒé“¾æ¥location ^~ /.well-known/acme-challenge/ { default_type \"text/plain\"; root /usr/share/nginx/certbot;}location = /.well-known/acme-challenge/ { return 404;}location = /.well-known/carddav { # è¿™æ˜¯ç»™PHPç”¨çš„ return 301 $scheme://$host/owncloud/remote.php/dav;}location = /.well-known/caldav { return 301 $scheme://$host/owncloud/remote.php/dav;} ç°åœ¨fsåœ¨ssl Labçš„è¯„åˆ†æ˜¯A+ï½ å¦å¤–ï¼ŒIE6ï¼ŒJava6uç­‰è€ç‰ˆæœ¬æµè§ˆå™¨ï¼Œå·²ç»ä¸è¢«æ”¯æŒäº†ã€‚ï¼ˆblogçš„é…ç½®å’Œfsçš„å‡ ä¹æ— å¼‚ï¼‰ é™„ä¸Šæˆ‘çš„å‚è€ƒèµ„æ–™ï¼š åˆ©ç”¨Certbotä¼˜é›…è·å–Letâ€™s Encryptå…è´¹SSLè¯ä¹¦ â€“ ä¼šé•¿å‡ºå“ Nginx é…ç½®ä¹‹å®‰å…¨ç¯‡ â€“ Jerry Qu","link":"/2017/08/17/file-share-sys-deploy/"},{"title":"æˆ‘æœ€å–œæ¬¢çš„å¿«é€Ÿæ’åºç®—æ³•","text":"123456789101112131415161718192021222324program qsort;var n,p:integer; a:array[0..100000] of integer;procedure qs(l,r:integer);//å‡è®¾è¢«æ’åºçš„æ•°ç»„æ˜¯a,ä¸”å¿«æ’åæŒ‰å‡åºæ’åˆ—ï¼‰var i,j,m,t:integer;begin i:=l; j:=r;//(lï¼ˆleftï¼‰,rï¼ˆrightï¼‰è¡¨ç¤ºå¿«æ’çš„å·¦å³åŒºé—´) m:=a[(l+r)div2];//æ³¨æ„ï¼šæœ¬å¥ä¸èƒ½å†™æˆï¼šm:=(l+r)div2; repeat while a[i]&lt;m do inc(i); while a[j]&gt;m do dec(j);//è‹¥æ˜¯é™åºæŠŠ'&lt;'ä¸â€˜&gt;'äº’æ¢; if i&lt;=j then begin t:=a[i]; a[i]:=a[j]; a[j]:=t; inc(i); dec(j); end; until i&gt;j; if l&lt;j then qs(l,j);//é€’å½’æŸ¥æ‰¾å·¦åŒºé—´ if i&lt;r then qs(i,r);//é€’å½’æŸ¥æ‰¾å³åŒºé—´end;","link":"/1970/01/01/favourite/"},{"title":"ç»™17çº§è®¡ç§‘æ–°ç”Ÿçš„ä¸€ä¸ç‚¹å„¿å»ºè®®","text":"Computer Science: a Sophomoreâ€™s perspective :)&emsp;å»å¹´15çº§è¿æ¥16çº§å¦‚åŒæ˜¨æ—¥ï¼Œè€Œç°åœ¨17çº§çš„æ–°ç”Ÿåˆåˆ°äº†ï¼Œæ—¥å­ä¹Ÿæ˜¯è¿‡å¾—æŒºå¿«ã€‚æˆ‘ä¸æ˜¯ä½ ä»¬å…¼ç­å…¼åŠ©ï¼Œä»¥åä¹Ÿåº”è¯¥ä¸ä¼šæ˜¯ã€‚å¦‚æœè¯´è¿™ç¯‡ä¸œè¥¿å†™ç»™å“ªäº›äººçœ‹ï¼Œæˆ‘æƒ³åº”è¯¥ä¹Ÿå°±æ˜¯ç»™17è®¡ç®—æœºå­¦é™¢æ–°ç”Ÿã€‚è€äººä»¬ï¼Œä¸ç®¡æ˜¯å’¸é±¼è¿˜æ˜¯å¤§ä½¬ï¼Œéƒ½æœ‰äº†è‡ªå·±çš„æƒ³æ³•äº†ç½¢ã€‚å’¸é±¼æƒ³ç¿»èº«ä¸å®¹æ˜“ï¼Œä½†å¤§ä½¬å˜å’¸é±¼ä¹Ÿå¯èƒ½åªæ˜¯ä¸€å¿µä¹‹é—´ï¼ˆ233ï¼‰ã€‚å¤§å­¦æ˜¯å­¦ä¹ çš„å¼€å§‹ï¼Œå¸Œæœ›å¤§å®¶å°½æ—©åšå¥½å‡†å¤‡ã€‚bintouè€å¸ˆæ›¾æœ‰å†™ä¸€ç¯‡ç»™è®¡ç®—æœºå­¦é™¢æ–°ç”Ÿçš„ä¸€å°ä¿¡ï¼Œä½ ä»¬å¯ä»¥è¯»å®Œè€å¸ˆçš„å»ºè®®ç„¶åå†é€‰æ‹©æ˜¯å¦ç»§ç»­è¯»ä¸‹å»ã€‚å½“ç„¶ï¼Œæˆ‘ä¼šæŠŠä¸€äº›æ›´ç»†çš„ä¸œè¥¿å¤¹æ‚è¿›æ¥ã€‚ä¸èƒ½è¦†ç›–å¤§å­¦ç”Ÿæ´»çš„æ–¹æ–¹é¢é¢ï¼Œæƒå½“æ•²é—¨ç –ï¼Œä½†æ±‚æŠ›ç –å¼•ç‰ã€‚&emsp;&emsp;è®¡ç§‘ï¼Œä¹Ÿå°±æ˜¯ç†ŸçŸ¥çš„è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ï¼Œå«ç³Šå¾—è®²ï¼Œå°±æ˜¯å›´ç»•è®¡ç®—æœºå±•å¼€çš„ï¼Œæ ¹æ®è®¡ç®—åŸç†ã€è®¡ç®—ç†è®ºï¼Œä»¥è®¡ç®—ä¸ºä¸­å¿ƒçš„ç§‘å­¦æŠ€æœ¯ã€‚è¿™å…¶ä¸­åŒ…æ‹¬äº†ç§‘å­¦ä¸Šçš„æ¢ç´¢ä¸å·¥ç¨‹ä¸Šçš„åˆ›é€ ã€‚ç§‘å­¦çš„ä½“ç°ï¼Œåœ¨æ­¤åˆä¸æ•°å­¦ç´§å¯†è”ç³»ï¼Œåœ¨å³å°†æ¥è§¦åˆ°çš„æ¯”å¦‚ç®—æ³•ä¸æ•°æ®ç»“æ„ï¼Œçº¿æ€§ä»£æ•°ï¼Œæ¦‚ç‡è®ºç­‰å­¦ç§‘æˆ–çŸ¥è¯†ä¸­ä¼šä½“ç°å‡ºæ¥ã€‚å·¥ç¨‹çš„ä½“ç°ï¼ŒåŒ…æ‹¬ç¨‹åºçš„è®¾è®¡ï¼Œç¨‹åºã€è®¡ç®—æœºä»¥åŠç½‘ç»œçš„ä½“ç³»ç»“æ„ï¼Œæ³¨é‡äººçš„åŠ¨æ‰‹èƒ½åŠ›ä»¥åŠå¯¹äºç¨‹åºçš„æ•´ä½“è§„åˆ’èƒ½åŠ›ã€‚ä½†å…¶ä¸»ä½“ï¼Œè¿˜æ˜¯ç§‘å­¦ã€‚ä¸€åˆ‡åœ¨å·¥ç¨‹ä¸Šä¸ä»¥ç§‘å­¦ä¸ºåŸºç¡€çš„é«˜è°ƒéƒ½æ˜¯è€æµæ°“ï¼Œä¸€åˆ‡æ²¡æœ‰ç§‘å­¦æ ¹æ®çš„åŠ¨æ‰‹éƒ½æ˜¯ç©ºè°ˆã€‚ä¹Ÿè®¸ä½ ä»¬è¿›æ¥ä»¥åï¼Œä¼šæœ‰è€å¸ˆï¼Œå¯èƒ½çœ‹ä¸Šå»å¾ˆâ€œé«˜é€¼æ ¼â€çš„è€å¸ˆå¯¹ä½ ä»¬è¯´ï¼Œâ€œç§‘å­¦å¯¹äºæˆ‘ä»¬ç»å¤§å¤šæ•°çš„åŒå­¦æ¥è¯´ï¼Œéƒ½æ˜¯ä¸å¯èƒ½çš„ï¼Œæˆ‘ä»¬çš„åŒå­¦ç»å¤§å¤šæ•°éƒ½å¾€å·¥ç¨‹æ–¹å‘èµ°ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æé«˜æˆ‘ä»¬çš„å·¥ç¨‹èƒ½åŠ›ã€‚â€ é‚£ç»å¯¹æ˜¯èƒ¡æ‰¯ã€‚å°½ç®¡å·¥ç¨‹æ–¹å‘ç¡®å®ä¸ºå¤§å¤šæ•°ï¼Œä½†æ²¡æœ‰æ‰å®çš„ç§‘å­¦æ ¹åŸºï¼Œè°ˆä½•å·¥ç¨‹ï¼Ÿæ›´è¿›ä¸€æ­¥ï¼Œâ€œä½œä¸ºä¸€é—¨å­¦ç§‘ï¼Œæ— è®ºå†·çƒ­ï¼Œæˆ‘ä»¬éœ€è¦åšçš„æ˜¯ï¼šå‘ç°å…¶æœ¬è´¨ã€éµå¾ªå…¶å‘å±•è§„å¾‹ã€‚â€ ç«‹å¿—ç§‘ç ”ï¼Œæˆä¸ºç§‘ç ”äººç‰©ï¼Œç«™åœ¨è®¡ç®—æœºç§‘å­¦çš„å‰ç«¯ï¼Œä¹Ÿæ˜¯è¿™é—¨å­¦ç§‘åŸ¹å…»äººæ‰çš„æœ€ç»ˆç›®çš„ã€‚&emsp;å¦‚è€å¸ˆæ‰€è¯´ï¼Œåˆå…¥è®¡ç®—æœºç§‘å­¦ï¼Œç¬¼ç»Ÿçš„ä»»åŠ¡ï¼Œå°±æ˜¯å­¦è‹±è¯­ï¼Œå­¦æ•°å­¦ï¼Œå­¦ç¼–ç¨‹ã€‚å­¦è‹±è¯­ï¼Œæ˜¯è¦æé«˜è‡ªå·±çš„è‹±è¯­é˜…è¯»èƒ½åŠ›ï¼Œä¹ æƒ¯äºé˜…è¯»è‹±è¯­çš„ä¹¦ç±ä¸“è‘—ã€‚åˆšå¼€å§‹å¯èƒ½è¯»èµ·æ¥æ¯”è¾ƒåƒåŠ›ï¼Œä½†ä¹Ÿåº”æ…¢æ…¢è®­ç»ƒï¼Œä¹ æƒ¯äº†å°±ä¼šå‘ç°è‹±è¯­çš„ç†è§£èµ·æ¥æ›´åŠ é€å½»ã€‚As far as Iâ€™m concerned, ä¸ç®¡æ›¾ç»æœ‰æ— ç»éªŒï¼Œç¬¬ä¸€æœ¬è‹±æ–‡ä¹¦ç±éƒ½æ¨èHow to think like a computer scientist: C versionã€‚å­¦æ•°å­¦ï¼Œç¬¬ä¸€å­¦æœŸæœ€é‡è¦çš„åŒ…æ‹¬é«˜ç­‰æ•°å­¦ï¼Œçº¿æ€§ä»£æ•°ã€‚æ—¥åï¼Œçº¿æ€§ä»£æ•°åœ¨å­¦ç§‘ä¸­çš„åœ°ä½ä¼šæ„ˆå‘æ˜¾è‘—ã€‚è‡³äºæ›´è¿›ä¸€æ­¥ï¼Œå°±åœ¨ä¸‹æ–‡äº†ã€‚å­¦ç¼–ç¨‹ï¼Œå°±ä¸»è¦ä½“ç°ä¸ºå­¦ä¹ ç¨‹åºè®¾è®¡è¯­è¨€, c æˆ–è€… c++ï¼Œç†è§£ç¨‹åºè®¾è®¡çš„æ€æƒ³ï¼Œé¢å‘è¿‡ç¨‹ã€é¢å‘å¯¹è±¡ï¼Œå­¦ä¼šç§‘å­¦åœ°æ„å»ºæ›´å…·è§„æ¨¡çš„ç¨‹åºï¼Œæé«˜ä»£ç çš„å¤ç”¨æ€§ã€‚&emsp;å…³äºè¯¥å­¦ä»€ä¹ˆï¼Œè€å¸ˆå·²ç»æœ‰äº†ä¸€ä¸ªæ–‡æ¡£ï¼ŒCSæ ¸å¿ƒæ•™ç¨‹ã€‚è¿™ä¸ªæ–‡æ¡£å¯èƒ½å’Œå­¦é™¢ç»™ä½ çš„ä¸å¤ªä¸€æ ·ï¼Œä½†å®ƒä¸€å®šæ˜¯é«˜æ°´å¹³çš„ï¼Œè¶…å‡ºå­¦é™¢çš„è¦æ±‚ï¼Œå¯¹äºæˆä¸ºè®¡ç®—æœºé¢†å…ˆäººå£«æœ‰æŒ‡å—é’ˆèˆ¬çš„ä½œç”¨ã€‚æ¯ä¸€æœ¬ä¹¦éƒ½æ˜¯ä¸€ä¸ªé‡Œç¨‹ç¢‘ï¼Œå­¦ä¹ å¸æ”¶ï¼Œå¯¹äºä½ ä¸€å®šä¼šæœ‰å¥½å¤„ã€‚ä¸‹ä¸‹æ–‡ä¼šè¯´åˆ°ã€‚ &emsp;è¡¥å……çš„ä¸œè¥¿ï¼šå¯èƒ½æœ‰ç”¨çš„ä¹¦ç±ï¼ˆå¯†ç æ˜¯ping1008ï¼‰ &emsp;å¯èƒ½åœ¨è¿›å…¥è®¡ç®—æœºå­¦é™¢ä¹‹å‰ï¼Œç»å¤§å¤šæ•°åŒå­¦å°±ä¼šå¬é—»ï¼Œâ€œå­¦è®¡ç®—æœºå‘€ï¼Œæ•²ä»£ç çš„ï¼Œå‘µå‘µâ€¦â€¦â€ã€‚æ²¡é”™ï¼Œä»£ç ï¼Œæ˜¯äººæœºäº¤äº’çš„æ ¹æœ¬æ–¹å¼ï¼Œæ˜¯è¿æ¥ç¢³åŸºç”Ÿå‘½ä¸ç¡…åŸºç”Ÿå‘½çš„æ¡¥æ¢ã€‚é€šè¿‡ç¨‹åºçš„å‘½ä»¤æˆ–è¯­å¥ï¼Œå®ç°ç¨‹åºè®¾è®¡è€…æ‰€éœ€è¦çš„åŠŸèƒ½ã€‚å­¦é™¢ä¸»è¦æ•™å¯¼çš„ï¼Œå°±æ˜¯c++çš„å­¦ä¹ ã€‚å¯èƒ½å¤§å®¶ä¼šå¯¹cè¿˜æ˜¯c++æ„Ÿåˆ°è¿·æƒ‘ï¼Œå› ä¸ºè€å¸ˆã€å­¦é™¢çš„è¯´æ³•ä¹Ÿæ˜¯å«ç³Šã€‚ä½†ä½ ä»ä»»æ„ä¸€é—¨å…¥æ‰‹ï¼Œéƒ½æ˜¯å¯ä»¥çš„ã€‚åšå¥½é€‰æ‹©ï¼Œæ·±å…¥ç†è§£ï¼Œä¸å¿…è¦è¿·èŒ«ã€‚å¯ä»¥è¯´ï¼Œå­¦é™¢ä¸€å¼€å§‹æ•™å¯¼çš„ä¸œè¥¿ï¼Œåœ¨cã€c++ä¸­çš„ä½“ç°æ˜¯æ— å¼‚çš„ã€‚è¯¾ä¸Šçš„è€å¸ˆå‡ ä¹åªæ•™è¯­è¨€ï¼Œæ²¡æœ‰è®¾è®¡æ›´å¤šçš„è®¾è®¡æ€æƒ³ã€‚ä½†è¿™æ˜¯æˆ‘ä»¬è¦å¥½å¥½ç†è§£çš„ã€‚ å¯¹äºæ­¤ï¼Œæ¨èä¸€äº›ä¹¦ã€‚å¸Œæœ›å¯¹å¤§å®¶ä¼šæœ‰ç›Šã€‚ How to think like a computer scientist: C version C++ primer plus &emsp;ç¬¬ä¸€æœ¬å¤§å®¶åº”è¯¥å¬è€å¸ˆæ‰€æåŠäº†ï¼Œéå¸¸é€‚åˆå…¥é—¨ã€‚ç¬¬äºŒæœ¬å´ä¸å¸¸ä¸ºæ¨èï¼Œè¤’è´¬ä¸ä¸€ï¼Œç”šè‡³ä¸ºäººè¯Ÿç—…ã€‚(ä¸­æ–‡ç‰ˆï¼Œè¿˜æ˜¯å¦¥åäº†)ã€‚å› ä¸ºè¿™ä¸€æœ¬ï¼Œå¾ˆåšï¼Œå¾ˆç»†ï¼Œåƒå­—å…¸ã€‚å¯èƒ½å¾ˆå¤šäººæ‹¿å‡ºæ¥ç¿»ä¸¤ä¸‹å°±å·²ç»å¤±è½äº†ã€‚ä½†å…¶ä¸­æœ‰éå¸¸è¯¦ç»†çš„è§£é‡Šä¸å®ç°ï¼Œå¿«èŠ‚å¥åœ°è·Ÿç€ä¹¦æœ¬èµ°ä¸€è¾¹å­¦ä¸€è¾¹æ•²ï¼Œå­¦ä¼šäº†å°±å¥½ï¼Œç„¶åæ…¢æ…¢å®ç°ä¸€ä¸¤ä¸ªåŠŸèƒ½ï¼Œå®ç°ä¸€ä¸¤ä¸ªå†’æ³¡æ’åºä¹‹ç±»çš„ç®—æ³•ã€‚å­¦ä¹ C++ï¼Œä¸€å®šä¸èƒ½è„±ç¦»ç®—æ³•ä¸æ•°æ®ç»“æ„ã€‚ä½ å¯ä»¥æŠŠä»–å’Œç®—æ³•ä¸€èµ·çœ‹ã€‚å› ä¸ºè¯­è¨€åªæ˜¯å·¥å…·ï¼Œç®—æ³•æ‰æ˜¯æ ¸å¿ƒã€‚é€šè¿‡å¯¹ç®—æ³•çš„å®ç°ï¼Œäº†è§£è¯­è¨€ç‰¹æ€§ï¼Œå¹¶æŒæ¡å¯¹å…¶çš„åº”ç”¨ã€‚è¿™æ ·å­¦èµ·æ¥æ‰ä¼šæœ‰è¿›æ­¥ï¼Œæœ‰ç€è½ã€‚å¯èƒ½å¹¶ä¸éœ€è¦åœ¨ä¸€ä¸ªæš‘å‡å†…çœ‹å®Œï¼Œçº¦è«åœ¨11æœˆçœ‹å®Œå‰7ç« ï¼Œ12æœˆçœ‹å®Œå‰å…«ç« å°±å¤Ÿäº†ã€‚ç”šè‡³ï¼Œå¯ä»¥å»çœ‹OIå¸¸æ¨èçš„ç®—æ³•ç«èµ›å…¥é—¨ç»å…¸ã€‚è¿™äº›éƒ½æ˜¯å¯é€‰é¡¹ã€‚å¦‚æœä½ è¯»äº†è§‰å¾—å¤±è½ï¼Œå¹¶ä¸æ˜¯ä½ çš„é—®é¢˜ï¼Œåªæ˜¯æ•™æå¹¶ä¸é€‚åˆä½ ã€‚ä½†æ˜¯ï¼ŒHTCSæ˜¯è¦çœ‹çš„ï¼Œå¹¶è¦è®¤çœŸç ”è¯»ã€‚è¿™ä¹Ÿæ˜¯è¿›å…¥å›¾çµç­çš„æœ€ä½é—¨æ§›ï¼ˆä¸‹æ–‡ä¼šè®²ï¼‰ã€‚å‚è§ï¼š æ‰“é€ åå—å¸ˆèŒƒå¤§å­¦è®¡ç®—æœºç§‘å­¦çš„é“å†›â€“å›¾çµç­ åå—å¸ˆèŒƒå¤§å­¦è®¡ç®—æœºå­¦é™¢å›¾çµç­å·¥ä½œè®¡åˆ’â€“2017å¹´ &emsp;BTW, è°­æµ©å¼ºçš„ã€Šc++ç¨‹åºè®¾è®¡ã€‹ï¼Œå¤ªå‘äº†â€¦â€¦æœŸæœ«äº†æ£€æŸ¥è‡ªå·±å­¦å¾—å¦‚ä½•ï¼Œå°±çœ‹èƒ½ä»å…¶ä¸­æŒ‘å‡ºå¤šå°‘é”™è¯¯äº†ã€‚ã€‚ã€‚ï¼ˆä¸€å®¶ä¹‹è¨€ï¼Œä¸€å®¶ä¹‹è¨€ï¼Œæ²¡æœ‰è€å¸ˆè¯´è¿‡ï¼‰ã€‚ å¦å¤–çš„ï¼Œå°±æ˜¯ç€æ‰‹çº¿æ€§ä»£æ•°çš„å­¦ä¹ ã€‚å¤§å®¶å¯ä»¥å»çœ‹Gilbert Strangçš„Introduction to Linear Algebra è¿™é‡Œæ˜¯ä¹¦æœ¬é“¾æ¥, å¯ä»¥æš‘å‡å°±å¼€å§‹çœ‹ã€‚éå¸¸æœ‰ç›Šï¼Œç»†è‡´å…¥å¾®åœ°ä»‹ç»çº¿æ€§ä»£æ•°ï¼Œæ˜¯æœ€ä¸ºç»å…¸çš„çº¿æ€§ä»£æ•°æ•™æã€‚è¿™ä¹Ÿæ˜¯å›¾çµç­ç¬¬ä¸€å­¦æœŸçš„ç€é‡ä¹¦ç›®ã€‚åŒæ—¶ï¼Œä¹Ÿä¸è¦å¿˜è®°çœ‹å­¦æ ¡å‘çš„è¯¾æœ¬ï¼Œè¦è®¤çœŸå­¦ä¹ ã€‚ä½œä¸ºä¸€é—¨é‡è¦çš„åŸºç¡€æ•°å­¦ç§‘ç›®ï¼Œå®ƒå…·æœ‰ç€ä¸¾è¶³è½»é‡çš„åœ°ä½ã€‚å…³äºæ•°å­¦ï¼ŒåŒæ ·å¯ä»¥å‚é˜…ï¼š CS2013ç¬¬6ç« é€‰è¯‘ï¼š è®¡ç®—æœºç§‘å­¦çš„æ•°å­¦è¦æ±‚ ã€Šé«˜ç­‰æ•°å­¦ã€‹å¯¼è¯»â€“CSç‰ˆæœ¬ ä»¥ä¸‹å°±æ˜¯ä¸€äº›ç›¸å¯¹ç¦»æ•£çš„ä¸œè¥¿äº†ï¼Œä¸çŸ¥é“å¦‚ä½•å½’çº³ï¼Œä½†æ‰€ä»¥ä¹Ÿå°±å †åœ¨ä¸€èµ·ã€‚ã€‚ğŸ˜‚ &emsp;é¦–å…ˆæ˜¯å›¾çµç­ã€‚å…³äºå›¾çµç­çš„ä»‹ç»ï¼Œåœ¨ä¸Šæ–‡ä¸­çš„é“¾æ¥ä¸­æœ‰äº†ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸è€ƒéªŒæ„å¿—åŠ›ä¸æ‰§è¡ŒåŠ›ï¼Œä½†æ²¡æœ‰ä»»ä½•å¼ºåˆ¶çº¦æŸåŠ›çš„é›†ä½“ã€‚ä»¥å­¦æœ¯äº¤æµä¸ºæ ¸å¿ƒï¼Œä¸ºçš„å°±æ˜¯æ‰“é€ åå¸ˆè®¡æœºä½“åˆ¶ä¹‹å¤–çš„é“å†›ã€‚å…¶é•¿æœŸçš„ä¸»è¦å­¦ä¹ ä»»åŠ¡ï¼Œå°±æ˜¯ä¸Šæ–‡æŒ‡å‡ºçš„æ ¸å¿ƒæ•™æã€‚è¿›å…¥çš„è¦æ±‚ï¼š å®ŒæˆHTCSï¼ˆHow to think like a computer scientist: C versionï¼‰çš„é˜…è¯»ï¼Œå¹¶æ’°å†™è¯»ä¹¦æŠ¥å‘Šï¼Œåœ¨å›½åº†æ”¾å‡å‰æäº¤ç»™è€å¸ˆã€‚ï¼ˆå…·ä½“æ—¶é—´ï¼Œæäº¤æ–¹å¼å¦å¤–å®‰æ’ï¼‰ å­¦ä¹ GSçš„LAï¼Œå¹¶çœ‹MITçº¿æ€§ä»£æ•°å…¬å¼€è¯¾çš„è§†é¢‘ã€‚ç½‘æ˜“å…¬å¼€è¯¾ä¸Šå¯¹åº”çš„è§†é¢‘ å›½åº†å‰åï¼Œå®Œæˆé¢è¯•ã€‚ &emsp;Thenï¼Œçœºæœ›çª—å¤–ï¼Œæ‹¥æŠ±ä¸–ç•Œã€‚æ¥è§¦ã€å­¦ä¹ ä½¿ç”¨Linuxæ“ä½œç³»ç»Ÿï¼Œç†Ÿæ‚‰å‘½ä»¤è¡Œã€‚å¯¹äºè®¡ç®—æœºç³»çš„å­¦ç”Ÿè€Œè¨€ï¼ŒLinuxæ˜¯æ›´å¥½çš„å¼€å‘å¹³å°ã€‚å®ƒçš„å¼€æ”¾æ€§æ›´åŠ å¯¹å¼€å‘è€…å‹å¥½ï¼Œè€Œä¸”æœ‰æ›´ä¸°å¯Œçš„èµ„æºä¸æ–‡æ¡£ã€‚ä»¥å‰æ€»æœ‰äººä¼šé—®ï¼Œå¥½ç«¯ç«¯çš„åœ¨windowsä¸‹ ï¼Œå¹²å˜›è¦åˆ‡æ¢åˆ°åˆ«çš„ç³»ç»Ÿä¸Šå»ã€‚å…¶å®ï¼Œä»¥å¼€æºæ“æ“ä½œç³»ç»ŸGNU/Linuxä¸ºä¸­å¿ƒçš„å¼€æºæ–‡åŒ–æ‰æ˜¯è¿›æ­¥ä¸å‘å±•çš„æºæ³‰ã€‚å°±å¦‚é²¤é±¼è·³é¾™é—¨ä¸€æ ·ã€‚åªæœ‰ä»MSçš„çª—å£çœ‹å‡ºå»ï¼Œæ‰èƒ½çœ‹åˆ°æ›´ç¾å¥½çš„é£æ™¯ã€‚ä¸€å¼€å§‹ä¼šä¸ä¹ æƒ¯ï¼Œå› ä¸ºä¼šæ¥è§¦å¤§é‡çš„å‘½ä»¤è¡Œã€‚ä½†æ…¢æ…¢å°±ä¼šç†Ÿæ‚‰ï¼Œä¼šå‘ç°å‘½ä»¤è¡Œæ•ˆç‡å¯¹äºå¤§å¤šæ•°ç†Ÿæ‚‰è€…è€Œè¨€æ¯”é¼ æ ‡é«˜ã€‚å»ºè®®æ–°æ‰‹ä»ubuntuè¿™ä¸ªå‘è¡Œç‰ˆå…¥æ‰‹ï¼Œå¯ä»¥åœ¨è™šæ‹Ÿæœºä¸Šå…ˆè¯•ç€å®‰è£…ï¼Œå®‰è£…å¥½ç³»ç»Ÿåï¼Œåœ¨ä¸Šé¢ç”¨atomã€vimæˆ–è€…å…¶ä»–çš„ç¼–è¾‘å™¨å†™è‡ªå·±çš„ä¸€ä¸ªâ€œHello, worldâ€ï¼Œå¹¶ç”¨gccæˆ–clangç¼–è¯‘ã€‚ä½†æ˜¯ï¼Œè™šæ‹Ÿæœºç»ˆç©¶ä¸æ˜¯ä½ çš„é€‰æ‹©ï¼Œä½ åº”è¯¥æŠŠå®ƒä»¥åŒç³»ç»Ÿçš„å½¢å¼å®‰è£…åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šï¼Œå¹¶ç”¨å®ƒæ¥é«˜æ•ˆåœ°å¼€å‘ï¼ˆç™¾åº¦å¯ä»¥å‘Šè¯‰ä½ æ€ä¹ˆåšï¼‰ã€‚è¿™åªæ˜¯é’ˆå¯¹æ–°äººï¼Œå¯¹äºç†Ÿæ‚‰çš„äººï¼Œæ—©å°±å·²ç»æœ‰è‡ªå·±å„ç§å„æ ·çš„ç©æ³•ã€‚;&emsp;å…¶æ¬¡ï¼Œå¯¹äºå­¦é™¢æ•™å­¦å®‰æ’çš„ä¸€ç‚¹ç‚¹æ„è§ã€‚å¦‚æœä½ ä»…ä»…è·Ÿç€è€å¸ˆå­¦ï¼ŒæŒ‰éƒ¨å°±ç­ï¼Œé‚£æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚è®¡ç®—æœºç§‘å­¦æ˜¯ä¸€é—¨è‡ªä¸»æ€§éå¸¸å¼ºçš„å­¦ç§‘ã€‚è¦é”»ç‚¼è‡ªå·±çš„è‡ªå­¦èƒ½åŠ›ã€‚å¾ˆå¤šä¸œè¥¿ï¼Œè€å¸ˆç”šè‡³ä¸è®²ï¼Œå°±ä¼šå«ä½ åšã€‚ä½ éœ€è¦æŸ¥å¤§é‡çš„èµ„æ–™ï¼Œè¯¢é—®ä¸åŒçš„äººã€‚æ‰€ä»¥ï¼Œå­¦ä¼šæŸ¥èµ„æ–™ï¼Œå­¦ä¼šé—®é—®é¢˜ï¼Œå­¦ä¼šè‡ªä¸»å­¦ä¹ ï¼Œæ¯”ä»€ä¹ˆéƒ½é‡è¦ã€‚å¤§é“è‡³ç®€ï¼ŒçŸ¥æ˜“è¡Œéš¾ã€‚éœ€è¦æ…¢æ…¢æ‘¸ç´¢ä¸ç§¯ç´¯ã€‚ï¼ˆå…³äºå¦‚ä½•ä½¿ç”¨Go0g1e,ä¹‹ç±»çš„ï¼Œå¦‚æœä¸æ‡‚ï¼Œå¯ä»¥è¯¢é—®ç¾¤é‡Œçš„dalaoã€‚ä½ éœ€è¦liftï¼‰åŒæ ·çš„ï¼Œåœ¨å›¾çµç­çš„å­¦ä¹ ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å¤§éƒ¨åˆ†éƒ½æ˜¯é è‡ªå·±ã€‚åå¾—ä½å†·æ¿å‡³ï¼Œæ‰ä¼šæœ‰æ”¶è·ã€‚&emsp;ç„¶åï¼Œä¸è¦æ²‰æººä¸ç¤¾å›¢ã€ç¤¾äº¤æ´»åŠ¨ï¼Œä¸è¦è¢«ç¤¾å›¢å®£ä¼ çš„è¿‡åº¦æ¸²æŸ“è€Œè¿·ä½ã€‚æ¯”å¦‚ï¼Œä¸è¦æ¯æ—¥å¿™äºå­¦*ä¼šçš„å·¥ä½œï¼Œä¹Ÿä¸è¦åœ¨é‚£åœˆå­é‡Œæ¯æ—¥éº»å°†æ‰“ç‰Œå¤§ä¿å¥ã€‚å¦å¤–ï¼Œä¸è¦ä¸ºç¤¾å›¢ç†¬å¤œã€‚å¦‚æœä½ èƒ½ä»ç¤¾å›¢é‡Œå¤´è·å¾—ä¹è¶£ï¼Œå­¦å¾—çŸ¥è¯†ï¼Œé‚£å½“ç„¶æ˜¯æœ€å¥½çš„ã€‚æˆ‘ä»ISCNUå­¦åˆ°äº†ä¸å°‘çš„çŸ¥è¯†ï¼Œå¹¶ä¸”åº”ç”¨åˆ°äº†è‡ªå·±çš„â€œæäº‹â€ä¸­ã€‚è¿˜æœ‰å¾ˆå¤šäººç©CTFï¼Œä½“éªŒå½“é»‘å®¢çš„ä¹è¶£ï¼ˆå½“ç„¶ï¼Œæˆ‘é¡¾ä¸æ¥æ²¡æœ‰å‚åŠ ï¼‰ã€‚å¤§å®¶ä¸€èµ·äº¤æµï¼ŒæŒºå¥½ã€‚&emsp;Furthermoreï¼Œæƒè¡¡å¥½å…¼èŒä¸å­¦ä¹ ã€‚å…¼èŒæ˜¯ä¸é”™çš„é”»ç‚¼ï¼Œåº”è¯¥å¤„ç†å¥½æ—¶é—´å®‰æ’é—®é¢˜ã€‚ä¸è¦å› ä¸ºå…¼èŒè€Œå½±å“äº†å­¦ä¸šã€‚å¾—ä¸å¿å¤±ã€‚åŒæ—¶ï¼Œæƒè¡¡æ¯”èµ›ä¸å­¦ä¹ ï¼Œä¸è¦å‚åŠ æ²¡æœ‰æ„ä¹‰çš„æ¯”èµ›ã€‚ä¸è¦å½“èµ›æ£ã€‚å­¦é™¢æ¯å¹´éƒ½ä¼šå®£ä¼ ä¸€å¤§å †çš„æ¯”èµ›ï¼Œä½ åº”è¯¥å¥½å¥½è€ƒé‡ã€‚&emsp;å¤šå­¦ä¹ ï¼Œå¤šäº¤æµã€‚å¤šå¤šæå‡è‡ªæˆ‘ï¼Œè¿™æ ·ä½ æ‰å¯ä»¥è·Ÿæ›´å‰å®³çš„äººåœ¨ä¸€èµ·ã€‚æƒ³è¦å’Œå¤§ä½¬äº¤æµï¼Œé¦–å…ˆè¦æœ‰æˆä¸ºå¤§ä½¬çš„æƒ³æ³•ã€‚å¦‚æœä½ åªä¼šå–Šâ€œå“‡å¤§ä½¬å¥½å‰å®³â€ï¼Œé‚£ä¹Ÿæ˜¯ä¸ºäººé„™è–„çš„ã€‚ä¸è¦è¿‡äº†åŠå¹´ä¸€å¹´çš„ï¼Œä¸€äº›äººæ°´ç¾¤å°±æ˜¯æ¸¸æˆæ‰“ç‰Œå¤§ä¿å¥ï¼Œå¦ä¸€äº›äººå´æ˜¯å„ç§æŠ€æœ¯æ¸¸æˆã€‚åŒæ ·æ˜¯å¨±ä¹ï¼Œå·®åˆ«å´é‚£ä¹ˆå¤§ã€‚äººè‡ªç„¶è€Œç„¶åœ°å°±è¢«åˆ’åˆ†äº†ã€‚ &emsp;Last but not least, å°‘ç†¬å¤œï¼Œåšæ²¡æœ‰é»‘çœ¼åœˆçš„å¤§ç†ŠçŒ«ã€‚ã€‚ã€‚ï¼šï¼‰ &emsp;æ€»è¯´æ˜¯å¤§0å‡†å¤§å­¦ç”Ÿï¼Œå…¶å®ï¼Œå½•è¿›äº†å¤§å­¦ï¼Œå°±æ˜¯å ‚å ‚æ­£æ­£çš„å¤§å­¦ç”Ÿäº†ã€‚æœ¬æ–‡ä»¥éå¸¸æ–‡ç§‘çš„å½¢å¼é˜è¿°äº†è®¡æœºåœ¨å¤§å­¦ä¸­çš„ä¸€äº›æ–¹é¢ï¼Œå¯ä»Šåä½ ä»¬çš„å­¦ä¹ ï¼Œç”šè‡³ä½ ä»¬çš„ç”Ÿæ´»ï¼Œéƒ½è¦ä»¥éå¸¸ç†ç§‘çš„æ–¹å¼è¿›è¡Œã€‚å¸Œæœ›å¤§å®¶ï¼Œå­¦ä¼šå­¦ä¹ ï¼Œå­¦ä¼šåæ€ï¼Œå­¦ä¼šäº¤æµã€‚å¤§å­¦æ—¢ä¸æ˜¯è±¡ç‰™å¡”ï¼Œä¹Ÿä¸æ˜¯èŒä¸šå­¦æ ¡ï¼Œä½†å®ƒä¸ç¤¾ä¼šç´§å¯†èåˆåœ¨äº†ä¸€èµ·ï¼Œéœ€è¦å„ä½æ…¢æ…¢ä½“ä¼šï¼Œå¸¸å¸¸å›æƒ³ï¼Œç»†ç»†åæ€ã€‚çœ‹æ¸…è‡ªæˆ‘ï¼Œçœ‹æ¸…ç¤¾ä¼šã€‚é­é‡å¤šå°‘ï¼Œé¢†æ‚Ÿå¤šå°‘ã€‚æœ€åï¼Œç¥å¤§å®¶æ”¶è·æ— æ†¾çš„å¤§å­¦ç”Ÿæ´»ã€‚ ping: 1008 2017.7.18","link":"/2017/09/03/for-freshman/"},{"title":"Effective C++ ç¬”è®°","text":"This is a piece of individual notes of effect c++, which contains personal opinion and example. ç­¾åï¼Œå£°æ˜ï¼Œå®šä¹‰ç­¾åæŒ‡ä»£å‡½æ•°è¿”å›å€¼+å˜é‡çš„ç±»å‹ï¼Œsize_t (int) å£°æ˜æŒ‡ä»£å‡½æ•°çš„è¿”å›å€¼ã€å˜é‡åã€åç§°çš„è¯´æ˜ï¼Œsize_t rtt(int proj); å®šä¹‰æŒ‡ä»£å‡½æ•°çš„å…·ä½“å†…å®¹ï¼Œ 123size_t rtt(int a){ return sqrt(pow(a, 2)+pow(a, 2));} item 6: å¿…è¦æ—¶é˜»æ­¢æ‹·è´ï¼Œé˜»æ­¢é»˜è®¤æ„é€ /ææ„/æ‹·è´è¡Œä¸º è‹¥è¦ç¼–è¯‘æœŸé˜»æ­¢æ‹·è´/æ„é€ ï¼Œå°†æ‹·è´/æ„é€ å‡½æ•°å†™å…¥ private ç„¶åä¸å®ç°ï¼ˆå•ä¾‹ç±»å¸¸ç”¨å®ç°ï¼‰ å¾ªç¯å¼•ç”¨ä¼šå¯¼è‡´non-localè¡Œä¸ºï¼Œä½¿å¾—å•ä¾‹ä¹Ÿé¢ä¸´ä¸ä¸€è‡´é—®é¢˜ã€‚ derived classé˜»æ­¢æ‹·è´ï¼Œç»§æ‰¿ uncopyable 12345678class uncopyable { protected: uncopyable() {} ~uncopyable() {} private: uncopyable(const uncopyable&amp;); uncopyable&amp; operator=(const uncopyable&amp;);} item 7: å¤šæ€åŸºç±»å£°æ˜virtualææ„å‡½æ•° è™šææ„å‡½æ•°ï¼šç”¨äºå¤šæ€åŸºç±» è™šææ„å‡½æ•°é˜²æ­¢derived classå±€éƒ¨é”€æ¯ï¼š 12345678910111213141516171819202122class A { public: A() {} ~A() {} int AB; private: int a;}class B : public A { public: B() : A() {} ~B(){} private: int b;}// -----B* hi = new B;A* well = hi;delete well; // åªæœ‰ A çš„éƒ¨åˆ†ä¼šè¢«ææ„ï¼ŒB çš„private b ä¸ä¼šè¢«ææ„ï¼ // è¡Œä¸ºæœªå®šä¹‰ï¼Œå†…å­˜æ³„æ¼ï¼Œæ•°æ®ï¼ˆå†…å­˜ï¼‰ç»“æ„ç ´å è™šææ„å‡½æ•°ç”Ÿæˆçš„vtblä¼šåŠ å¤§å†…å­˜å ç”¨é‡ï¼š å¦‚æœclassä¸å«ææ„å‡½æ•°ï¼Œæ„å‘³ç€ä¸è¢«ç”¨ä¸ºä¸€ä¸ªbase class å½“classä¸­å¸¦æœ‰è™šå‡½æ•°ï¼Œæ‰éœ€è¦æœ‰è™šææ„å‡½æ•° pure virtual: çº¯è™šå‡½æ•°ï¼Œé˜»æ­¢åˆå§‹åŒ–ï¼› æ„é€ çº¯è™šç±»ï¼šçº¯è™šææ„å‡½æ•°ï¼ŒåŒæ—¶éœ€è¦æä¾›ææ„å‡½æ•°å®ç°ï¼šæœ€æ·±å±‚æ´¾ç”Ÿçš„classå…ˆè¢«è°ƒç”¨ï¼Œç„¶åæ‰æ˜¯base classã€‚å¦‚æœpure virtual destructoræ²¡æœ‰å®ç°ï¼Œåˆ™è¯¥ç±»æ— æ³•ææ„ï¼Œè¿æ¥å™¨æŠ¥é”™ã€‚ 12345class AMOV { public: virtual ~AMOV() = 0;}AMOV::~AMOV() {} item 8: ææ„å‡½æ•°ä¸å¯æµå‡ºå¼‚å¸¸ å¦‚æœä¸éœ€è¦å¤„ç†ï¼Œtry...catch...ï¼Œç„¶åå¸æ”¶æˆ–è€…ç»“æŸç¨‹åº å¦‚æœéœ€è¦å¤„ç†ï¼Œå•ç‹¬æˆç«‹ä¸€ä¸ªå‡½æ•°è®©ç”¨æˆ·handleå¼‚å¸¸ item 9â€‹ æ„é€ /ææ„å‡½æ•°ä¸­ï¼Œå¦‚æœå‡ºç°è™šå‡½æ•°ï¼Œè¢«æ„é€ /ææ„çš„æ—¶å€™æ´¾ç”Ÿç±»ä¼šè°ƒç”¨åŸºç±»æ„é€ /ææ„å®ç°ã€‚å¯¼è‡´æœªå®šä¹‰é”™è¯¯ã€‚pure virtualå‡½æ•°åŒç†ã€‚ item 10: operator=â€‹ operator=è¿”å›*thisï¼Œå¯ä»¥ä½¿å¾—è¡Œä¸ºä¸åŸºç¡€ç±»å‹ä¸€è‡´ã€‚ item 11 =çš„è‡ªæˆ‘èµ‹å€¼â€‹ è§£å†³ = è‡ªæˆ‘èµ‹å€¼é—®é¢˜ï¼šcopy-and-swap 12345widget &amp; widget::operator=(const widget&amp; rhs) { widget tmp(rhs); swap(tmp); return *this;} item 12 ç»§æ‰¿ã€æ‹·è´é—®é¢˜â€‹ ç»§æ‰¿-æ‹·è´é—®é¢˜ï¼šæ´¾ç”Ÿç±»èµ‹å€¼éœ€è¦è€ƒè™‘åŸºç±»çš„æ•°æ®ç»§æ‰¿é—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘ç”¨åŸºç±»çš„operator=è¿›è¡Œèµ‹å€¼æ“ä½œã€‚ 12345class D : public B { D(const D&amp; d){ B::Operator=(d); }} item 17â€‹ ç‹¬ç«‹ç”Ÿæˆnewè¯­å¥ï¼Œæ”¾å…¥æ™ºèƒ½æŒ‡é’ˆï¼Œä»¥é¿å…é¡ºåºç”Ÿæˆå¼‚å¸¸é€ æˆçš„å†…å­˜æ³„æ¼ã€‚ 12345678910void processWidget(std::share_ptr&lt;int&gt;(new int[12]), priority());/* å¦‚æœnewå‡ºé”™ï¼Œpriorityå·²å®Œæˆï¼Œé‚£priorityå¯èƒ½å†…å­˜æ³„æ¼ å¦‚æœpriorityå‡ºé”™ï¼Œnewå®Œæˆä½†æœªè¿›å…¥share_ptr, new int[12] å°†å†…å­˜æ³„æ¼*//* æ­£ç¡®ç¤ºèŒƒ */std::share_ptr&lt;int&gt; tmp(new int[12]);void processWidget(tmp, priority()); item 19 ~ 25: æé«˜å°è£…æ€§ï¼Œå¯ç”¨æ€§ï¼Œä»£ç æ¸…æ™°åº¦ é¢å‘å¯¹è±¡çš„ä¸‰ç‰¹æ€§ï¼šå°è£…æ€§ï¼Œç»§æ‰¿æ€§ï¼Œå¤šæ€æ€§ å°è£…æ€§è¶Šé«˜ï¼Œåº•å±‚å®ç°çš„çµæ´»åº¦è¶Šé«˜ï¼› å£°æ˜æˆå‘˜å˜é‡ä¸ºprivateï¼Œå¹¶ç”¨getterã€setterï¼Œä»¥é˜²æ­¢ç›´æ¥æ“ä½œï¼šæˆå‘˜å˜é‡æè¿°å†…éƒ¨çŠ¶æ€ï¼Œå…¬å…±æˆå‘˜å‡½æ•°æä¾›æ¥å£ï¼› non-member non-friend å‡½æ•°æ›¿ä»£ member å‡½æ•°ï¼šé™ä½å¤–éƒ¨è®¿é—®åº¦ï¼Œæé«˜å°è£…æ€§ operatorï¼Œç­‰å‡½æ•°ï¼šå¯¹äºç±»ï¼Œpass-by-reference-to-constï¼Œå‡å°‘å¯èƒ½çš„å¤åˆ¶(c++17 æœ‰ä¼˜åŒ–ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šè¿›è¡Œä¸€å®šçš„ä¼˜åŒ–) argument dependent lookup: å¯¹äºä¸åŒå‘½åç©ºé—´å†…çš„å‡½æ•°ï¼Œæ ¹æ®argument dependent lookup åŸåˆ™ï¼Œé¦–å…ˆä¼šè°ƒç”¨æœ¬å…¨å±€å‡½æ•°ï¼Œå†ï¼ˆè‡ªèº«ï¼‰å‘½åç©ºé—´å†…çš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼š 123456789template&lt;typename T&gt;void doS(T&amp; l, T&amp; r) { using namespace std; // ... swap(l, r);}// ç¼–è¯‘å™¨é¦–å…ˆæœå¯»å…¨å±€åŸŸï¼Œçœ‹æ˜¯å¦æœ‰lï¼Œrçš„å…¨ç‰¹åŒ–ï¼›ç„¶åå¯»æ‰¾lï¼Œræ‰€å±ç±»æ‰€å±å‘½åç©ºé—´ï¼ŒæŸ¥æ‰¾æ˜¯å¦æœ‰// å…¨ç‰¹åŒ–ï¼Œæœ€åå†è°ƒç”¨æ ‡å‡†çš„swap. æˆå‘˜å‡½æ•°swapç‰¹åŒ–å…·æœ‰STLçš„ä¸€è‡´æ€§ï¼Œä½†ä¾æ—§éœ€è¦æä¾›éæˆå‘˜å‡½æ•°swapï¼Œä»¥æé«˜å°è£…æ€§ä¸å¯æ“ä½œæ€§ã€‚ï¼ˆä¸ªäººè§è§£ï¼‰ item 26ï¼šå°½å¯èƒ½å»¶åå®šä¹‰å¼çš„å‡ºç°ï¼Œé¿å…ä¸å¿…è¦çš„æ„é€ /ææ„æˆæœ¬å½“å‡½æ•°å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡åï¼Œä¼šè°ƒç”¨é»˜è®¤ï¼ˆæˆ–ç»™å®šï¼‰æ„é€ å‡½æ•°ï¼Œå¹¶åœ¨åŒºåŸŸç»“æŸæ—¶ä¼šè°ƒç”¨ææ„å‡½æ•°ï¼›ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œéåˆ°å¯¹è±¡åˆå€¼ç¡®å®šï¼Œä¸å¯¹å…¶è¿›è¡Œå®šä¹‰ï¼›è‹¥åœ¨å¾ªç¯ä½“ä¸­ï¼Œåº”è€ƒé‡æ„é€ ã€ææ„ã€èµ‹å€¼çš„å¼€é”€ã€‚ 123456789101112131415161718192021void doSTH(std::string a) { /* å¦‚æœifå†…æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™bçš„æ„é€ ã€ææ„å¼€é”€æ˜¯æ— ç”¨çš„ */ std::string b; if (a) { // ... } return b;}// æ–¹æ³•1Widget w;for (int i = 0; i &lt; n; ++i) { w = impl; // ...}// æ–¹æ³•2for (int i = 0; i &lt; n; ++i) { Widget w(impl); // ...} item 29: å¼‚å¸¸å®‰å…¨ ï¼ˆimportantï¼‰çº¿ç¨‹å®‰å…¨å‡½æ•°çš„ä¿è¯ï¼š åŸºæœ¬æ‰¿è¯ºï¼šå¦‚æœå¼‚å¸¸è¢«æŠ›å‡ºï¼Œç¨‹åºå†…ä»»ä½•äº‹ç‰©ä»ç„¶å¤„äºæœ‰æ•ˆçŠ¶æ€ã€‚æ‰€æœ‰åŸæœ‰çŠ¶æ€ä¸æ”¹å˜ã€‚ å¼ºçƒˆä¿è¯ï¼šç¨‹åºçŠ¶æ€ä¸æ”¹å˜ï¼šcommit or rollback nothrowä¿è¯ï¼šå‡½æ•°ä¸æŠ›å‡ºå¼‚å¸¸ å¼‚å¸¸å®‰å…¨å…·æœ‰éšåæ€§ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°ä¸­åŒ…å«åŸºæœ¬å®‰å…¨å‡½æ•°ã€å¼ºçƒˆå®‰å…¨å‡½æ•°ï¼Œé‚£è¯¥å‡½æ•°çš„å®‰å…¨æ€§ä¸ºåŸºæœ¬å®‰å…¨ã€‚ item 31: ç¼–è¯‘å£å’The PIMPL idiom item 32-33: public inherit: is-aç»§æ‰¿å…³ç³»ï¼Œis-a; é¿å…derived classçš„ä½œç”¨åŸŸè¦†ç›–é—®é¢˜ï¼š è‹¥derived classä¸­å¤å†™base classä¸­çš„æ–¹æ³•ï¼Œåˆ™åŸºç±»åŒåæ–¹æ³•ä¸å¯ç”¨ã€‚ ä¸ç®¡base classé‡Œæ˜¯å¦virtualï¼Œéƒ½ä¼šå› ä¸ºè¦†å†™è€Œè¢«å±è”½ã€‚ 1234567891011121314151617class B { private: int a; float b; public: void mt1(); void mt1(double);}class D : public B { public: void mt1();}////////D dm;dm.mt1() // dm.D::mt1()dm.mt1(x); // é”™è¯¯ï¼overwriteï¼ è§£å†³æ–¹æ¡ˆï¼š 123456class D : public B { public: using B::mf1; // æ­¤å¤„åªèƒ½ç”¨mf1ä¸èƒ½mf1(double), // åç§°ä¸å‘½åç©ºé—´çš„å¼•ç”¨ã€‚ void mf1();} å…³é”®å­—ï¼šusing å¦å¤–æ–¹æ³•ï¼šforwardingï¼š 123virtual void mf1() { Base::mf1();} Item 34: åŒºåˆ†æ¥å£ç»§æ‰¿ä¸å®ç°ç»§æ‰¿ æˆå‘˜å‡½æ•°çš„æ¥å£æ€»ä¼šè¢«ç»§æ‰¿ pure virtual funcæ˜¯ä¸ºäº†ç»§æ‰¿æ¥å£ impure virtual funcç»§æ‰¿çš„åŒæ—¶æä¾›äº†ç¼ºçœå®ç° non-virtual funcç»§æ‰¿æä¾›äº†å¼ºå®ç°ï¼Œä¸å…è®¸é‡å†™ æ¥å£æœ‰é™ç»§æ‰¿ï¼Œé¿å…é»˜è®¤åŸºç±»æ–¹æ³•ï¼šï¼ˆæ˜¾å¼æŒ‡å®šç¼ºçœæ–¹æ³•ï¼‰ protected default function: 123456789101112131415class A { public: virtual void echo() = 0; protected: defaultEcho() { std::cout &lt;&lt; \"echo::A\" &lt;&lt; std::endl; }}class B : public A { public: virtual void echo() { defaultEcho(); }} instantiation for pure virtual function: 123456789101112131415class A { public: virtual void echo() = 0;}void A::echo() { std::cout &lt;&lt; \"echo::A\" &lt;&lt; std::endl;}class B : public A { public: virtual void echo() { A::echo(); }} Item 37ï¼švirtual å‡½æ•°å‚æ•°ç¼ºçœå€¼é—®é¢˜ä¸è¦é‡å¤å®šä¹‰ä¸€ä¸ªç»§æ‰¿è€Œæ¥çš„ç¼ºçœå‚æ•°å€¼ï¼Œä¼šå¯¼è‡´æ´¾ç”Ÿç±»çš„ç¼ºçœå€¼å¤±æ•ˆã€‚ åŠ¨æ€ç±»å‹ä¸é™æ€ç±»å‹åŠ¨æ€ç±»å‹ç»‘å®š(dynamically bound)ä¸é™æ€ç±»å‹ç»‘å®š(statically bound)é—®é¢˜ï¼šå£°æ˜ä¸­æ‰€é‡‡ç”¨çš„ç±»å‹ï¼Œæˆä¸ºé™æ€ç±»å‹ï¼›å®é™…ä½¿ç”¨ä¸­çš„ç±»å‹ï¼Œç§°ä¸ºåŠ¨æ€ç±»å‹ã€‚e.g.:123456789101112131415161718192021222324252627class Shape {public: virtual void echo(int i = 0) { std::cout &lt;&lt; i &lt;&lt; \"Shape\" &lt;&lt; std::endl; }; // ...private: // ...}class Circle : public Shape {public: virtual void echo(int i = 2) { std::cout &lt;&lt; i &lt;&lt; \"Circle\" &lt;&lt; std::endl; }}/** * psä¸ºShape*ç±»å‹ï¼Œé™æ€ç±»å‹ä¸ºShape* * psæŒ‡å‘äº†Circleï¼Œå…¶åŠ¨æ€ç±»å‹ä¸ºCircle * psè°ƒç”¨virtualå‡½æ•°ä¼šä½¿ç”¨Circleçš„å®ç° */Shape* ps = new Circle; ä¸ºæå‡è¿è¡ŒæœŸæ•ˆç‡ï¼Œåœ¨ç¼–è¯‘æœŸå†³å®šç¼ºçœå‚æ•°å€¼ï¼ŒC++ä¼šä½¿ç”¨åŸºç±»ä¸­virtualå‡½æ•°çš„ç¼ºçœå‚æ•°å€¼ã€‚e.g.:1234// æ­¤å‘½ä»¤ä¼šä½¿ç”¨Shapeæä¾›çš„ i = 0;ps-&gt;echo();// è¾“å‡ºçš„ç»“æœæ˜¯ï¼š// 0Circle\\n ä¸ºè§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå¹¶é™ä½æ´¾ç”Ÿç±»ä¸­çš„ä»£ç é‡å¤ï¼Œé˜²æ­¢ä¸€ä¸ªç¼ºçœå€¼å‡ºç°å¤šæ¬¡ï¼Œå¯ä»¥é‡‡ç”¨item35æåŠçš„NVIæ–¹æ³•æˆ–è€…å…¶ä»–æ›¿ä»£æ–¹æ¡ˆã€‚ä¾‹å¦‚NVIï¼Œå°†å®é™…è¿è¡Œå‡½æ•°ç½®äºprivateä¸­ï¼Œç„¶ååŸºç±»ä¸­ä½¿ç”¨non-virtual publicå‡½æ•°è°ƒç”¨privateå‡½æ•°ã€‚12345678910111213141516171819202122class Shape {public: void echo(int i = 0) { doEcho(i); }private: virtual void doEcho(int i) { //... }}class Circle : public Shape {public: //...private: virtual void doEcho(int i) { //... }}Shape* ps = new Circle;ps-&gt;echo(); // æ­¤å¤„ä½¿ç”¨çš„i = 0;","link":"/2019/01/01/effective-cpp-notes/"},{"title":"HAProxyå®ç°å‰-åç«¯çƒ­è°ƒè¯•","text":"ç”±äºå‰ç«¯ç”¨äº†vueï¼Œåç«¯ç”¨äº†goï¼Œwebpackçš„proxyæ˜¯ä¸€ç§ç­–ç•¥ï¼Œå¯æ˜¯vue createæ„å»ºçš„åº”ç”¨ä¼¼ä¹æ‰¾ä¸åˆ°å…¥å£ï¼ŒåŠ ä¸Šå¯¹webpackçš„ä¸ç†Ÿæ‚‰ï¼Œä¾¿ç”¨haproxyè¿›è¡Œåä»£è°ƒè¯•ã€‚å‰åç«¯ä»»æ„è°ƒè¯•çš„è¿‡ç¨‹ä¸­éƒ½ä¸éœ€è¦åœæœº-æ„å»º-å¯åŠ¨-çœ‹æƒ…å†µçš„è¿‡ç¨‹ï¼Œå®ç°äº†çƒ­è°ƒè¯•ã€‚ ä»£ç å¦‚ä¸‹123456789101112131415161718192021222324252627282930global maxconn 4000 daemon # turn on stats unix socketdefaults mode http option redispatch retries 3 timeout http-request 10s timeout queue 1m timeout connect 10s timeout client 1m timeout server 1m timeout http-keep-alive 10s timeout check 10s maxconn 4000frontend http-in bind *:80 mode http acl url_backend path_beg -i /api use_backend backend_servers if url_backend default_backend front_serversbackend backend_servers server imgsrv1 127.0.0.1:4000 check maxconn 1000backend front_servers cookie srv insert nocache server websrv1 127.0.0.1:8080 check maxconn 1000 cookie websrv1 é€šè¿‡å¦‚ä¸Šè®¾ç½®ï¼ŒæœåŠ¡ç«¯æ˜ å°„åˆ°/apiè·¯ç”±ä¸‹ï¼Œæ˜¯4000ç«¯å£-80ç«¯å£ï¼›å®¢æˆ·ç«¯æ˜ å°„åˆ°/è·¯ç”±ä¸‹ï¼Œæ˜¯8080-80ç«¯ã€‚è¿™æ ·è°ƒè¯•çš„æ—¶å€™å°±é¿å¼€äº†è·¨åŸŸé—®é¢˜ï¼Œå¯¹å¾€åçš„éƒ¨ç½²æœ‰æ›´å¥½çš„éä¾µå…¥æ€§ã€‚","link":"/2018/12/15/haproxy/"},{"title":"Hello World","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" $$ e = mc^2 $$ More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","link":"/2017/08/09/hello_world/"},{"title":"LeetCode T15 - 3Sum","text":"LeetCode T 15: 3Sumæ˜¯ä¸€ä¸ªæ¯”è¾ƒæ™®é€šçš„é—®é¢˜ï¼Œè€ƒéªŒä¸€å®šçš„æ€ç»´å’Œç¼–ç¨‹èƒ½åŠ›ã€‚ æè¿°ï¼šç»™å®šä¸€ä¸ªé•¿ä¸º$n$çš„æ•°ç»„numsï¼Œè¯·é—®æ•°ç»„ä¸­æ˜¯å¦åŒ…å«ä¸‰ä¸ªå…ƒç´ a, b, c, ä½¿å¾— a + b + c = 0? æ‰¾åˆ°æ•°ç»„ä¸­æ‰€æœ‰è¿™ç±»å…ƒç´ çš„ä¸‰å…ƒç»„ã€‚æ³¨æ„ï¼šè§£å†³æ–¹æ¡ˆä¸­ä¸å¾—åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚ ä¾‹å­ï¼š1234567Given array nums = [-1, 0, 1, 2, -1, -4],A solution set is:[ [-1, 0, 1], [-1, -1, 2]] ä»é¢˜ç›®æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œéœ€è¦æ‰¾åˆ°æ‰€æœ‰ä¸é‡å¤çš„$(a, b, c)$ï¼Œä½¿å¾—$a + b + c = 0$ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªå…³é”®ç‚¹ï¼šä¸é‡å¤ã€‚ ä¸ºè¾¾åˆ°è¿™ä¸ªç›®æ ‡ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦å¯¹åŸæ•°ç»„è¿›è¡Œæ’åºï¼Œä»¥è¿›è¡Œåºåˆ—çš„æ¯”è¾ƒç­›é™¤é‡å¤çš„å…ƒç´ ã€‚å¦‚ï¼š[0, 0, 0, 0]ï¼Œå¦‚æœä¸è¿›è¡Œç­›é™¤ï¼Œå°†ä¼šå¾—åˆ°[[0, 0, 0], [0, 0, 0]]ï¼Œè¿™æ˜¯ä¸ç¬¦åˆè§„èŒƒçš„ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œæœç´¢ï¼Œéœ€è¦ä¸€å®šçš„æ—¶é—´ä¼˜åŒ–ã€‚å¦‚æœç”¨æš´åŠ›ï¼Œå°†æ˜¯$O(n^3)$çš„æ—¶é—´å¤æ‚åº¦ï¼Œè¿™å°†æ˜¯éå¸¸ä»¤äººä¸æ»¡çš„ã€‚å› ä¸ºLeetCodeä¼šæŠ¥TLEã€‚äºæ˜¯ï¼Œè®¾è®¡äº†ä¸€ä¸ªæ€è·¯ï¼šæŒ‡é’ˆi, j, kåˆ†åˆ«æŒ‡å‘ä¸‰ä¸ªå…ƒç´ ï¼Œiä»0å¼€å§‹è¿­ä»£åˆ°len(nums)-2ï¼Œjä»i+1å¼€å§‹è¿­ä»£åˆ°len(nums)-1ï¼Œké‡‡ç”¨äºŒåˆ†æŸ¥æ‰¾ã€‚ æœ€åä»£ç æ˜¯è¿™æ ·(Golang)ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859func threeSum(nums []int) [][]int { // æ’åº sort.Ints(nums) lens := len(nums) var matrix [][]int // é•¿åº¦ä¸å¤Ÿï¼Œè¿”å›ç©º if len(nums)&lt;=2 { return matrix } for i := 0; i &lt; lens-2; i++ { // ç¬¬ä¸€ä¸ªå…ƒç´ å°±&gt;0, æ„å‘³ç€æ‰€æœ‰å…ƒç´ &gt;0 if nums[0] &gt; 0 { break } for j := i + 1; j &lt; lens-1; j++ { l := j + 1 r := lens - 1 // äºŒåˆ†æŸ¥æ‰¾ for l &lt; r { if l == r-1 { if nums[i]+nums[j]+nums[l] == 0 { matrix = append(matrix, []int{nums[i], nums[j], nums[l]}) } else if nums[i]+nums[j]+nums[r] == 0 { matrix = append(matrix, []int{nums[i], nums[j], nums[r]}) } break } mid := (l + r) / 2 if nums[i]+nums[j] &lt; -nums[mid] { l = mid } else if nums[i]+nums[j] &gt; -nums[mid] { r = mid } else { matrix = append(matrix, []int{nums[i], nums[j], nums[mid]}) for j &lt; lens-1 &amp;&amp; nums[j] == nums[j+1] { j++ } break } } // åªæœ‰1ä¸ªå…ƒç´ çš„ç‰¹æ®Šæƒ…å†µ if l == r { if nums[i]+nums[j]+nums[l] == 0 { matrix = append(matrix, []int{nums[i], nums[j], nums[r]}) } } // è¿­ä»£å®Œæˆï¼Œå»é™¤é‡å¤å…ƒç´  for j &lt; lens-1 &amp;&amp; nums[j] == nums[j+1] { j++ } } // iè¿­ä»£å®Œæˆï¼Œå»é™¤é‡å¤å…ƒç´  for i &lt; lens-2 &amp;&amp; nums[i] == nums[i+1] { i++ } } return matrix} è¿™ä¸ªç­”æ¡ˆä¾ç„¶ä¸æ˜¯æœ€å¥½çš„ï¼Œæ—¶é—´å·²ç»æ˜¯1024msï¼Œè¶…è¿‡äº†ä¸€èˆ¬è§„å®šçš„1000msã€‚å…¶å®ï¼Œ3Sumé—®é¢˜æœ¬è´¨ä¸Šæ˜¯2Sumé—®é¢˜ã€‚å› ä¸ºa = -(b+c)ï¼Œæ‰€ä»¥aä»0è¿­ä»£åˆ°len(nums)-2ï¼Œåªè¦ä¿è¯jï¼Œkæ„æˆçš„2Sumå’ŒaåŠ èµ·æ¥æ˜¯0å°±æ­£ç¡®ã€‚è¿™å°±æ˜¯æœ€ä¼˜çš„è§£å†³æ–¹æ¡ˆã€‚","link":"/2018/12/20/leetcode15/"},{"title":"åæ ‡åœ°å€æ‹¾å–å™¨","text":"å›½èµ›æ¨¡å°±è¿™æ ·æ„‰å¿«åœ°ç»“æŸäº†ï¼Œç”¨äº†ä¸€å¤§å †çš„å·¥å…·å’Œè¯­è¨€ã€‚åšäº†å¾ˆå¤šç¹ççš„å·¥ä½œã€‚ä»Cè¯­è¨€åˆ°Råˆ°Matlabï¼Œåšäº†ä¸å°‘å›¾ã€‚ å…¶ä¸­æœ‰ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„ä¸œè¥¿ï¼Œåˆ©ç”¨ç™¾åº¦åœ°å›¾çš„åæ ‡æ‹¾å–ç³»ç»Ÿè·å–ç»çº¬åº¦å¯¹åº”çš„åœ°å€ã€‚æ˜¯ä¸€ä¸ªè¢«çˆ¬å–å‡ºæ¥çš„åœ°å›¾APIã€‚ http://api.map.baidu.com/?qt=rgc&amp;x=13407612.87&amp;y=3550364.78&amp;dis_poi=1å‚è€ƒsaitjrçš„åšå®¢è·å–çš„æ¶ˆæ¯ï¼Œå°†ç»çº¬åº¦åæ ‡è½¬æ¢æˆå¢¨å¡æ‰˜åæ ‡ï¼Œç„¶åå‘ç™¾åº¦å‘è¯·æ±‚ï¼Œå°±å¯ä»¥getåˆ°äº†å…·ä½“çš„åœ°ç†ä½ç½®äº†ã€‚ ç„¶åå‘¢ï¼Œæˆ‘ç»™å®ƒå¥—äº†ä¸ªå£³ã€‚ä»¥æ–¹ä¾¿å¿«æ·åœ°ä½¿ç”¨ã€‚ä¸è¿‡è¿˜æ˜¯æœ‰ç‚¹å®³æ€•ã€‚ä¸‡ä¸€appending modeæŠŠåˆ«äººçš„æ–‡æ¡£æåäº†å‘¢ã€‚ã€‚ï¼ˆé€ƒ ä»“åº“åœ¨è¿™é‡Œï½ ï¼ˆå¼€å‘å®Œæˆã€‚ã€‚ã€‚ï¼‰","link":"/2017/09/22/lla/"},{"title":"LeetCode T17 - Phone Number","text":"åˆ·LeetCodeçš„æ—¶å€™å‘ç°ä¸€ä¸ªé“ç†ã€‚ç”¨goè¯­è¨€å†™ï¼šâ€œå“‡å¡ï¼Œæˆ‘æŒºå‰å®³çš„å˜›â€ï¼›ç”¨c++å†™ï¼šâ€œå“‡é ï¼Œåƒåœ¾ç¨‹åºçš„å…¸èŒƒï¼ğŸ˜­â€ç¬¬17é¢˜æ˜¯ä¸€ä¸ªå…¸å‹é€‰æ‹©é—®é¢˜ï¼Œè¦æ±‚ä»ç»™å®šçš„æ•°å­—ä¸­é€‰æ‹©å‡ ä¸ªéœ€è¦çš„å­—æ¯ã€‚è§£æ³•å­˜åœ¨ä¼˜åŒ–ï¼Œä½†åŸºæœ¬ä¸Šå°±æ˜¯DFSã€‚leetcode 17 é¢˜çš„ä¸€ä¸ªè§£æ³•å¦‚ä¸‹ã€‚ è¿™é‡Œæ˜¯é€’å½’çš„åšæ³•ï¼Œéå¸¸å¥½ç†è§£ï¼š base caseï¼šå¦‚æœæœ€åä¸€ä¸ªæ•°å­—ï¼Œåˆ™é€ä¸€æ·»åŠ æ¯ä¸ªå­—æ¯åˆ°éœ€è¦è¢«æ·»åŠ çš„å­ä¸²ä¸­ï¼› recurrence caseï¼šå¦‚æœéæœ€åä¸€ä¸ªï¼Œåˆ™éå†å½“å‰çš„æ‰€æœ‰å­—æ¯ï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯ã€‚ å…¶å®ï¼Œè¿™ç§ç±»ä¼¼å°¾é€’å½’çš„åšæ³•ï¼Œç¼–è¯‘å™¨å¯ä»¥ä¼˜åŒ–ã€‚ä½†åšé¢˜çš„æ—¶å€™ï¼Œleetcodeå¥½åƒå‡ºäº†é—®é¢˜ï¼Œä¸ç®¡æ€ä¹ˆä¼˜åŒ–éƒ½æ²¡æ³•åšåˆ°0msã€‚ã€‚ã€‚ 123456789101112131415161718192021222324252627282930string mapping[8]{\"abc\", \"def\", \"ghi\", \"jkl\", \"mno\", \"pqrs\", \"tuv\", \"wxyz\"};class Solution { public: Solution() {} ~Solution() {} vector&lt;string&gt; letterCombinations(string digits) { if (digits.length()&lt;=0) return vector&lt;string&gt;{}; vector&lt;string&gt; m; for (char&amp; i : digits) { m.push_back(getString(i - '0')); } solve(m, \"\", 0, digits.length()); return this-&gt;s; } void solve(vector&lt;string&gt; &amp;m, string candidate, int ptr, int len) { if (ptr == len - 1) { for (char&amp; i : m[ptr]) { s.push_back(candidate + i); } } else { for (char&amp; i : m[ptr]) { solve(m, candidate+i, ptr+1, len); } } } private: vector&lt;string&gt; s; inline string getString(const int a) { return mapping[a - 2]; };}; é€’å½’æ”¹è¿­ä»£ï¼š 12345678910111213141516171819202122232425262728293031class Solution { public: Solution() {} ~Solution() {} vector&lt;string&gt; letterCombinations(string digits) { unordered_map&lt;char, string&gt; mapping{ {'2', \"abc\"}, {'3', \"def\"}, {'4', \"ghi\"}, {'5', \"jkl\"}, {'6', \"mno\"}, {'7', \"pqrs\"}, {'8', \"tuv\"}, {'9', \"wxyz\"}}; if (digits.empty()) return {}; vector&lt;int&gt; steps{1}; int sum = 1; for (auto&amp; i : digits) { sum *= mapping[i].length(); steps.push_back(sum); } vector&lt;string&gt; m(sum); for (size_t i = 0; i &lt; digits.length(); i++) { string&amp; s = mapping[digits[i]]; int j = 0; while (j &lt; sum) { for (int k = j; k &lt; j + sum / steps[i + 1]; k++) { m[k] += s[(k / (sum / steps[i + 1])) % s.length()]; } j += sum / steps[i + 1]; } } return m; }};","link":"/2019/02/05/leetcode17/"},{"title":"åä¸ºç¬”è¯• - å ä½ç¬¦æ›¿æ¢","text":"2020æ˜¥æ‹›åä¸ºå‡ºäº†3é“ç®—æ³•é¢˜ã€‚ä¸¤é“æœç´¢ä¸€é“æ²¡çœ‹ã€‚å…¶ä¸­ç¬¬ä¸€é“æ˜¯Linux Shellå ä½ç¬¦æ›¿æ¢ã€‚ç”¨äº†æ·±æœè§£å†³ã€‚ é¢˜ç›®å¤§æ„åœ¨Linux Shellä¸­ï¼Œå¸¸ç”¨${xx}çš„å½¢å¼åšå‘½ä»¤çš„å ä½æ›¿æ¢ã€‚å½“shellçš„å­—ç¬¦ä¸²ä¸­å±€éƒ¨éœ€è¦å…¶ä»–å˜é‡æ›¿æ¢çš„æ—¶å€™ï¼Œå°±ç”¨æ­¤å ä½ç¬¦æ¥ä»£è¡¨å˜é‡çš„ä»£å…¥ã€‚ä¾‹å¦‚ï¼š12a=1234b=/abc/${a}/ åˆ™bå˜é‡æœ€ç»ˆæ•°æ®ä¸ºï¼š1/abc/1234/ ç°åœ¨æœ‰ä¸€ç»„ï¼ˆå¯èƒ½ï¼‰åŒ…å«å ä½ç¬¦çš„å˜é‡ï¼Œä»–ä»¬çš„å ä½ç¬¦æ›¿æ¢ä¸å¾ªç¯å¼•ç”¨ã€‚é—®è¿™ç»„å˜é‡æœ€åçš„å˜é‡åº”è¯¥è¢«æ›¿æ¢ä¸ºæ€ä¹ˆæ ·çš„å­—ç¬¦ä¸²ï¼Ÿå¦‚ï¼š123a=abcb=de/${a}/fgc=/hj/${b}/${a} aæ›¿æ¢å¦‚bå˜é‡ä¸­çš„å ä½ç¬¦ï¼Œå¾—ï¼š/de/abc/fgbæ›¿æ¢cå˜é‡ä¸­çš„å ä½ç¬¦ï¼Œå¾—ï¼š/hj/de/abc/fg/abcå¦‚æ­¤ï¼Œæœ€åä¸€è¡Œå¾—è¾“å‡ºä¸ºï¼š/hj/de/abc/fg/abc è¾“å…¥ä¸€å…±$N$è¡Œã€‚ç¬¬1è¡Œä¸ºä¸€ä¸ªæ•´æ•°$n$ï¼Œå³åç»§æ‹¥æœ‰å¾—å˜é‡æ•°ã€‚ç¬¬2åˆ°ç¬¬$N-1$ä¸€å…±$n$è¡Œï¼Œä¸ºæ¯ä¸ªå˜é‡å¼çš„è¡¨è¾¾ï¼›12343a=abb=cd/${a}c=/def/${b}/${a} è¾“å‡ºä¸€è¡Œï¼Œä¸ºç¬¬nè¡Œçš„æ›¿æ¢åçš„ç»“æœã€‚ä¸Šè¿°è¾“å…¥ç»“æœï¼š1/def/cd/ab/ab Write Upæ­¤é¢˜è§£æ³•å¤šï¼Œæ·±æœæœ€å¥½ç†è§£ï¼šç”¨ä¸€ä¸ªä¸²æ¥è®°å½•ç»“æœã€‚å‡è®¾ä¸ºå­—ç¬¦ä¸²$S$ã€‚ä»å¤´åˆ°å°¾æœç´¢æœ€åä¸€ä¸ªå˜é‡çš„ä¸²ã€‚é‡åˆ°å ä½ç¬¦ï¼Œç«‹å³æœç´¢è¯¥å ä½ç¬¦ï¼Œç„¶ååŠ ä¸Šå»ã€‚ä¸‰ç§å½¢å¼ï¼š å¦‚æœæ²¡æœ‰${xxx}è¿™ç§å½¢å¼ï¼Œåˆ™åç»­å­—ç¬¦ä¸²æ²¡æœ‰å˜é‡ï¼Œé™„åŠ ä¸Šå»å°±å¥½ï¼›å¦‚ï¼ša=abï¼Œæ²¡æœ‰ä»»ä½•ä¸œè¥¿ã€‚S += &quot;ab&quot; =&gt; &quot;ab&quot;ï¼›è¿™æ˜¯é€’å½’ç»“æŸæƒ…å†µã€‚å› ä¸ºåŸé¢˜æè¿°ï¼Œè¯¥å›¾ä¸ºDAGã€‚ å¦‚æœç¬¬1ä¸ªå­—ç¬¦ä¸º$ï¼Œåˆ™è¯´æ˜å¼€å¤´å³å˜é‡ï¼Œæœç´¢ã€‚å¦‚ï¼ša=ab, b=${a}ï¼Œéœ€è¦æœç´¢å˜é‡aé™„åŠ ä¸Šå»ï¼› å…¶ä½™æƒ…å†µï¼šå…ˆé™„åŠ ä¸€éƒ¨åˆ†ï¼Œæˆªå–å­ä¸²ï¼›å¦‚ï¼šcurrent -&gt; /ab/${a}ï¼Œåˆ™å…ˆS += &quot;/ab/&quot;ï¼Œå†æœç´¢${a} å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263#include &lt;cmath&gt;#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;vector&gt;using namespace std;struct thePair { string first; string second; thePair(string a, string b) : first(a), second(b) {}};vector&lt;thePair&gt; p;string finalRes = \"\";void dfs(string cur) { while (cur.size() &gt; 0) { int pos = cur.find_first_of(\"$\"); if (pos == string::npos) { finalRes += cur; return; } if (pos != 0) finalRes += cur.substr(0, pos); pos = cur.find_first_of(\"{\"); int left = cur.find_first_of(\"}\"); string next = cur.substr(pos + 1, left - pos - 1); for (thePair&amp; j : p) { if (j.first == next) { dfs(j.second); break; } } cur = cur.substr(left + 1); }}thePair split(string n) { int i = 0; for (; i &lt; n.size(); i++) { if (n[i] == '=') { break; } } return thePair(n.substr(0, i), n.substr(i + 1));}int main(int argc, char const* argv[]) { int n; cin &gt;&gt; n; vector&lt;string&gt; vec; for (int i = 0; i &lt; n; i++) { string m; cin &gt;&gt; m; p.push_back(split(m)); } string target = p[p.size() - 1].second; dfs(target); cout &lt;&lt; finalRes &lt;&lt; endl; return 0;} finalResä¸ºæœ€ç»ˆéœ€è¦çš„ç»“æœã€‚thePairä¸ºåˆ†å‰²å˜é‡ä¸å­—ç¬¦ä¸²æ‰€ç”¨ã€‚ä¸æ–­ç¼©çŸ­curï¼Œå³ç›®å‰çŠ¶æ€ï¼Œæœ€åæ¸…é›¶ã€‚finalResä¸ºå…¨å±€å˜é‡ï¼Œåœ¨oiä¸­å¾ˆä¹ æƒ¯ä½¿ç”¨ã€‚","link":"/2020/03/15/mask-huawei/"},{"title":"Manacher ç®—æ³•ï¼šæ±‚æœ€é•¿å›æ–‡å­ä¸²","text":"ç½‘ç»œä¸Šå…³äºæœ€é•¿å›æ–‡å­ä¸²çš„æ–‡ç« å¾ˆå¤šï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†è®°å½•ä¸€ä¸‹æ€è·¯ä¸è¿‡ç¨‹ã€‚ æ¦‚è¿°manacherç®—æ³•æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„å¯»æ‰¾æœ€é•¿å›æ–‡å­ä¸²çš„ç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦å‡ä¸º$O(n)$ï¼Œç›¸æ¯”äºæœ´ç´ ç®—æ³•æœ‰å¾ˆé«˜çš„ä¼˜åŠ¿ã€‚å®ƒåˆ©ç”¨äº†å›æ–‡ä¸²é•œåƒå¯¹ç§°çš„æ€§è´¨ï¼Œé€šè¿‡ä¸æ–­ï¼ˆé—´æ¥ï¼‰è®°å½•ä»¥æ¯ä¸€ä¸ªå­—ç¬¦ä¸ºä¸­å¿ƒçš„å›æ–‡ä¸²é•¿åº¦ï¼Œæ‰¾åˆ°æœ€å¤§çš„å›æ–‡å­ä¸²ã€‚ å›æ–‡ä¸²å®šä¹‰å›æ–‡ä¸²ï¼Œå°±æ˜¯å¯¹ç§°çš„ä¸²ã€‚æ¯”å¦‚ï¼šabaï¼Œabcbaã€‚æœ€å¤§å›æ–‡å­ä¸²ï¼Œå°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­å­˜åœ¨ä¸€ä¸ªå­ä¸²ï¼Œä½¿å¾—å®ƒçš„é•¿åº¦æ˜¯æ‰€æœ‰å›æ–‡å­ä¸²ä¸­æœ€é•¿çš„ã€‚ä¾‹å¦‚ï¼šabcbacæœ€é•¿çš„ï¼Œabcbaï¼Œé•¿åº¦ä¸º5ï¼Œæ˜¯æœ€å¤§çš„å›æ–‡å­ä¸²ã€‚ ä¸ºäº†æ–¹ä¾¿è®¨è®ºï¼Œæˆ‘ä»¬å‡è®¾æ€»å­—ç¬¦ä¸²ä¸º$S$, å›æ–‡ä¸²ä¸º$s$, å¯¹äºä¸€ä¸ªå›æ–‡ä¸²ï¼Œå®šä¹‰ï¼š1234s.center # å›æ–‡ä¸²çš„ä¸­å¿ƒä½ç½®ï¼Œæš‚ä¸åŒºåˆ†å¥‡å¶s.st # å›æ–‡ä¸²å¼€å§‹çš„ä½ç½®s.nd # å›æ–‡ä¸²ç»“æŸçš„ä½ç½®s.mx # åœ¨s.centerå³æ–¹ï¼Œç¦»s.centeræœ€è¿œçš„ä¸‹æ ‡ æ€§è´¨å¯¹ç§°æ€§å¯¹ç§°ï¼Œæœ€åŸºæœ¬çš„ç‰¹æ€§ã€‚str = abcbaï¼Œé‚£ä¹ˆstr[i] == str[len(str)-i-1]ã€‚å°±æ˜¯ï¼Œç¬¬ä¸€ä¸ªaå’Œæœ€åä¸€ä¸ªaï¼Œç¬¬äºŒä¸ªbå’Œå€’æ•°ç¬¬äºŒä¸ªbï¼Œéƒ½è·Ÿä¸²çš„ä¸­å¿ƒï¼Œcï¼Œå¯¹ç§°ã€‚ æ¨è®ºåœ¨ä¸€ä¸ªå›æ–‡ä¸²$s, s.size == n$ä¸­ï¼Œè‹¥ä»¥iä¸ºä¸­å¿ƒçš„å­—ç¬¦ä¸²a[i]ï¼ˆi != s.centerï¼‰ï¼Œæ˜¯ä¸€ä¸ªå›æ–‡ä¸²ï¼Œé‚£ä¹ˆï¼Œå¯¹åº”çš„sçš„ä¸­å¿ƒå¯¹ç§°çš„ä½ç½®ä¹Ÿæ˜¯ä¸€ä¸ªå›æ–‡ä¸²ã€‚ e.g.: 1str = \"a b a a b a\" åœ¨strä¸­ï¼Œè‹¥ä»¥str[1]ä¸ºä¸­å¿ƒï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªå›æ–‡ä¸²abaã€‚åœ¨str[1]ä»¥str.centerå¯¹ç§°çš„ä½ç½®ä¸Šï¼Œstr[4]ä¹Ÿæ˜¯ä¸€ä¸ªå›æ–‡ä¸²ï¼Œaba. è¿™å¹…å›¾é˜è¿°äº†è¿™ä¸ªæ€§è´¨ã€‚ä»¥idä¸ºä¸­å¿ƒï¼Œmxä¸ºè¾¹ç•Œï¼Œæ˜¯ä¸€ä¸ªå›æ–‡ä¸²ã€‚åŒæ—¶ï¼Œä»¥jä¸ºä¸­å¿ƒå­˜åœ¨ä¸€ä¸ªå›æ–‡ä¸²$s_1$ã€‚é‚£ä¹ˆï¼Œä»¥idå¯¹ç§°çš„ä½ç½®ï¼Œä¹Ÿä¼šæœ‰ä¸€ä¸ªä¸€æ ·çš„å­—ç¬¦ä¸²$s_2$å­˜åœ¨ã€‚iå°±æ˜¯è¿™ä¸ªä¸²çš„ä¸­å¿ƒã€‚ ç„¶è€Œï¼Œå¹¶éiå¤„çš„å›æ–‡ä¸²ä¸€å®šå’Œjå¤„çš„ç›¸åŒã€‚æœ‰å¯èƒ½ä¼šæœ‰æ›´é•¿çš„æƒ…å†µï¼Œä½†è¿™ç§æƒ…å†µåªåœ¨iå‡ºç°ï¼Œä¸åœ¨jå‡ºç°ï¼Œäºæ˜¯ä¹éœ€è¦ä»åŸå§‹çš„$s_2$è¾¹ç•Œå¼€å§‹ï¼Œå‘å¤–æœç´¢ï¼Œå°±å¯ä»¥å¾—åˆ°ä»¥iä¸ºä¸­å¿ƒçš„æœ€é•¿ä¸²ã€‚ ç®—æ³•è®¾è®¡åˆ©ç”¨è¿™å†™ç‰¹æ€§ï¼Œæˆ‘ä»¬æ¥è®¾è®¡ç®—æ³•ï¼šgoçš„ä»£ç å®ç°ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950// min æ±‚ä¸¤ä¸ªintçš„æœ€å°å€¼func min(a, b int) int { if a &lt; b { return a } return b}// longestPalindrome ä¸»è¦å‡½æ•°func longestPalindrome(s string) string { var buf bytes.Buffer // ç”¨æ¥æ‹¼æ¥å­—ç¬¦ä¸²çš„buffer // predo for i := 0; i &lt; len(s); i++ { buf.WriteByte('#') buf.WriteByte(byte(s[i])) } buf.WriteByte('#') // ç»™å­—ç¬¦ä¸²æ¯ä¸€ä¸ªå­—ç¬¦ä¹‹é—´åŠ ä¸€ä¸ª#ï¼Œä¾‹å¦‚ï¼š // abcbacï¼Œ--&gt; #a#b#c#b#a#c# // è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œæ— è®ºåŸæ¥çš„å­—ç¬¦ä¸²æ˜¯å¥‡æ•°ä¸²è¿˜æ˜¯å¶æ•°ä¸²ï¼Œ // éƒ½å¯ä»¥æ ¼å¼åŒ–ä¸ºå¥‡æ•°ä¸²ï¼Œè¿™æ ·s.centerå°±ä¸ä¼šæ˜¯ä¸€ä¸ª // çš„é—´éš™ format := buf.String() p := make([]int, len(format)) center, mx := 0, 0 for i := 1; i &lt; len(format); i++ { if i &lt; mx { p[i] = min(mx-i, p[2*center-i]) } else { p[i] = 1 } for i-p[i] &gt;= 0 &amp;&amp; i+p[i] &lt; len(format) &amp;&amp; format[i+p[i]] == format[i-p[i]] { p[i] += 1 } if mx-center &lt; p[i] { mx = i + p[i] center = i } } var resBuf bytes.Buffer st := center - (p[center] - 1) for i := st; i &lt; p[center]+center; i++ { if format[i] != '#' { resBuf.WriteByte(format[i]) } } return resBuf.String()} å®ç°æ­¥éª¤é¢„å¤„ç†ï¼šè½¬æ¢ä¸ºå¥‡å­—ç¬¦ä¸²å¯¹å­—ç¬¦ä¸²$S$ï¼Œåˆ©ç”¨#å¡«å……å­—ç¬¦ä¹‹é—´çš„ç©ºéš™ï¼Œä»¥è¾¾åˆ°å°†å…¶è½¬æ¢ä¸ºå¥‡æ•°ä¸²çš„ç›®çš„ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œä»»æ„ä¸‹æ ‡çš„å­—ç¬¦ä¸²éƒ½æ˜¯ä¸€ä¸ªå¥‡æ•°ä¸²ï¼Œä¸­å¿ƒæ˜¯å¯ä»¥ç”±ä¸‹æ ‡ç¡®å®šçš„ï¼Œè€Œä¸æ˜¯åƒabbaè¿™æ ·ï¼Œä¸­å¿ƒåœ¨é—´éš™ä¸­ã€‚è¯æ˜ï¼šä»»æ„ä¸²sï¼Œè®¾ l = s.length()ï¼Œé‚£åŒ…æ‹¬ä¸¤ç«¯ï¼Œlçš„é—´éš™åŒ…å«l+1ä¸ªç©ºä½ã€‚é‚£ä¹ˆï¼Œå¡«å……ä¹‹åçš„å­—ç¬¦ä¸²$Sâ€™$å°±åŒ…å«$2l+1$ä¸ªå­—ç¬¦ï¼Œæ˜¯ä¸€ä¸ªå¥‡ä¸²ã€‚å³ä½¿å­˜åœ¨å¶æ•°å›æ–‡ä¸²ï¼Œé‚£ä¹Ÿå¯ä»¥ä»¥#ä¸ºä¸­å¿ƒå‘ä¸¤ç«¯æ‰©å¼ æœç´¢ã€‚e.g.:1234567s = \"abcdcbac\"s1 = \"#a#b#c#d#c#b#a#c#\"// center == s1[7] == 'd's = \"abbac\"s1 = \"#a#b#b#a#c#\"// center == s1[4] == '#' å›æ–‡ä¸²æœç´¢Manacherç®—æ³•çš„åŸºç¡€æ­¥éª¤æ˜¯ï¼Œä»å¤´åˆ°å°¾ï¼Œä»¥æ¯ä¸€ä¸ªå­—ç¬¦ä¸ºä¸­å¿ƒï¼Œå‘ä¸¤ç«¯æœç´¢ï¼Œä»¥è·å¾—æœ€å¤§çš„å›æ–‡å­ä¸²çš„ä¸­å¿ƒç‚¹åŠè¾¹ç•Œã€‚åœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œç®—æ³•è¿˜è®°å½•æ¯ä¸ªä¸‹æ ‡çš„å­—ç¬¦æ‰€æ‹¥æœ‰çš„æœ€é•¿å­ä¸²ä»ä¸­å¿ƒåˆ°è¾¹ç•Œçš„é•¿åº¦ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå­˜åœ¨æ ‡è®°mxï¼Œå³è¾¹ç•Œï¼Œcenterï¼Œä¸­å¿ƒï¼Œp []int, æ¯ä¸ªä¸‹æ ‡å¯¹åº”çš„å›æ–‡å­ä¸²é•¿åº¦ã€‚ä¾‹å¦‚ï¼š12345678910111213141516171819202122232425262728init:mx = 0 // æœ€å¤§å›æ–‡å­ä¸²çš„æœ€å³è¾¹ç•Œï¼š0ä¸ºåˆå§‹å€¼center = 0 // æœ€å¤§å›æ–‡å­ä¸²çš„ä¸­å¿ƒï¼Œ0 inits1 = \"#a#b#c#b#a#c#\" // å¤„ç†è¿‡çš„å­—ç¬¦ä¸²// ç”¨äºè®°å½•æ¯ä¸€ä¸ªä¸‹æ ‡å¯¹åº”çš„æœ€å¤§å­ä¸²p = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]iterate:for i := 1; i &lt; len(s1); i++ { if i &lt; mx { p[i] = min(mx-i, p[2*center-i]) } else { p[i] = 1 } // è‹¥iï¼Œå³å½“å‰ä¸­å¿ƒåœ¨å›æ–‡ä¸²é‡Œæ—¶ï¼Œæœ‰å¯èƒ½ä»¥è¿™ä¸ªä¸­å¿ƒåŒ…å«ä¸€ä¸ªå›æ–‡ä¸²ï¼Œ // é‚£ä¹ˆè¿™ä¸ªä¸­å¿ƒçš„æœ€å¤§åç§»æ•°å°±æ˜¯å¯¹ç§°ç‚¹çš„æœ€å¤§åç§»æ•°ï¼› for i-p[i] &gt;= 0 &amp;&amp; i+p[i] &lt; len(format) &amp;&amp; format[i+p[i]] == format[i-p[i]] { p[i] += 1 } // ä»åŸºç¡€å€¼å¼€å§‹ï¼Œå¯»æ‰¾åœ¨æœ€å¤§åç§»å¤–éƒ¨çš„ä¸² if mx-center &lt; p[i] { mx = i + p[i] center = i } // è®°å½•æœ€å¤§çš„å›æ–‡ä¸²} é€šè¿‡è¿™ä¸‰ä¸ªæ­¥éª¤ï¼Œæœ€ç»ˆå¾—åˆ°æœ€å¤§å­ä¸²çš„ä¸­å¿ƒå’Œè¾¹ç•Œï¼Œè¿™æ ·å°±å¯ä»¥ä»ä¸­è¿‡æ»¤å‡ºæœ€å¤§å›æ–‡å­ä¸²äº†ã€‚","link":"/2018/12/01/manacher/"},{"title":"æ–°çš„å­¦æœŸ","text":"&emsp;&emsp;æ—¶é—´è¿‡å¾—å¾ˆå¿«çš„ã€‚ä¸€ä¸‹å­å°±äºŒå¹´çº§äº†ã€‚ä¸è¿‡å¿ƒæ€è¿˜å’Œä»¥å‰å·®ä¸å¤šã€‚æ„Ÿè§‰ä¸€åˆ‡è¿˜æ˜¯æŒ‰éƒ¨å°±ç­åœ°èµ°ï¼Œæ²¡æœ‰ç‰¹åˆ«çš„å¥½ï¼Œä¹Ÿæ²¡æœ‰ç‰¹åˆ«çš„åã€‚ä¸€ç›´åˆé¢„æ„Ÿè¿™ä¸ªå­¦æœŸä¼šä¸å¥½è¿‡ï¼Œä¹Ÿè®¸ä¼šå¦‚æ­¤å§ã€‚&emsp;&emsp;ä¸Šä¸ªå­¦æœŸæœ€å¤§çš„æ”¶è·å³é˜…è¯»äº†å¤§éƒ¨åˆ†çš„CLRSã€‚è·å¾—äº†è®¸å¤šç®—æ³•ä¸æ•°æ®ç»“æ„çŸ¥è¯†ã€‚CLRSæ˜¯è®¡ç®—æœºå­¦ä¹ ä¸­çš„ä¸€ä¸ªå°å°çš„é‡Œç¨‹ç¢‘ï¼Œè¿™æ ·ï¼Œä¸€ä¸ªååˆå‹‰å‹‰å¼ºå¼ºè¿‡å»äº†ã€‚è¿™ä¸ªå­¦æœŸå¤„ç†çš„æ˜¯ CS:APP, ç›¸å¯¹è€Œè¨€å¯¹åŠ¨æ‰‹çš„è¦æ±‚ä¼šå¤šä¸€ç‚¹ã€‚å®è·µæ€§éå¸¸å¼ºã€‚åšäº†ä¸¤ä¸ªlabï¼Œè§‰å¾—æœ‰æŒ‘æˆ˜æ€§ã€‚å€¼å¾—å¥½å¥½å­¦ä¹ ï¼Œä½†æˆ‘å¹¶ä¸æ€ä¹ˆè®¤ä¸ºè¿™æ˜¯ä¸€æœ¬é‡Œç¨‹ç¢‘å¼çš„ä¹¦ç±ã€‚çœŸæ­£çš„ä¸‹ä¸€ä¸ªé‡Œç¨‹ç¢‘ï¼Œåº”è¯¥æ˜¯ITOCï¼ŒSICPï¼Œä»¥åŠLADRã€‚&emsp;&emsp;è™½ç„¶é¢„æ–™è¿™ä¸ªå­¦æœŸä¼šæœ‰å¾ˆå¤šäº‹ä»¶å‘ç”Ÿï¼Œä½†æœ‰äº›è¿˜æ˜¯çŒä¸åŠé˜²ã€‚è¿˜æ˜¯åº”è¯¥å¤„å¤„å°å¿ƒï¼Œå¤„å¤„è°¨æ…ã€‚é­é‡å¤šå°‘ï¼Œé¢†æ‚Ÿå¤šå°‘ã€‚ &emsp;&emsp;æˆ‘ä»¬åˆ«æ— é€‰æ‹©ï¼Œåªèƒ½åœ¨é»‘å¤œä¸­çš„é“è·¯ä¸Šå‰è¡Œã€‚å³ä¾¿å››å‘¨åƒç™½æ˜¼ä¸€æ ·æ˜äº®ï¼Œé‚£ä¹Ÿåªæ˜¯ä¸çœŸå®çš„ç™½æ˜¼ã€‚å¯¹æ­¤æˆ‘ä»¬æ—©å·²ä»»å‘½ã€‚","link":"/2017/09/03/new-semester/"},{"title":"æ´›è°·P1481ï¼šæœ€é•¿ä¸ä¸‹é™å­åºåˆ—","text":"P1481æ˜¯æœ€é•¿ä¸ä¸‹é™å­åºåˆ—çš„ä¸­äºŒç‰ˆã€‚ä¸€ä¸ªè¯æ˜¯å¦ä¸ºå¦ä¸€ä¸ªè¯çš„åºåˆ—ï¼Œçœ‹æ˜¯å¦ä¸ºä»–çš„å‰ç¼€ã€‚è¿™é‡Œæœ‰ç‚¹å°å‘çš„é—®é¢˜åœ¨äºDPçš„ä¸€äº›ç‰¹æ€§ã€‚ æ­¤å¤„çš„å‘åœ¨äºï¼ŒDPï¼ˆè®°å¿†åŒ–æœç´¢ï¼‰çš„ç‰¹æ€§éœ€æ±‚ï¼š æ•°æ®è¢«ä½¿ç”¨ä¹‹å‰éœ€è¦å·²ç»è¢«ç®—å‡ºæ¥ é€’å½’å­å¼ä¸èƒ½æœ‰åæ•ˆæ€§ æ‰€ä»¥ï¼Œç¬¬äºŒå±‚é€’å½’ä»å°åˆ°å¤§ï¼Œä¼šé‡åˆ°æœªè®¡ç®—çš„æƒ…å†µã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#include &lt;cstring&gt;#include &lt;iostream&gt;#include &lt;string&gt;using namespace std;int n;int* dp;string* strs;int common(string a, string b) { int res = 0; int len = (a.size() &lt; b.size()) ? a.size() : b.size(); for (size_t i = 0; i &lt; len; i++) { if (a[i] == b[i]) { res++; } else { return 0; } } return res;}int main() { ios::sync_with_stdio(0); cin &gt;&gt; n; strs = new string[n + 1]; dp = new int[n + 1]; memset(dp, 0, sizeof(int) * (n + 1)); int ans = 1; for (int i = 1; i &lt;= n; i++) { cin &gt;&gt; strs[i]; } dp[1] = 1; for (int i = 2; i &lt;= n; i++) { for (int j = i; j &gt;= 1; j--) { if (strs[i].find(strs[j]) == 0) { dp[i] = max(dp[i], dp[j] + 1); ans = max(ans, dp[i]); } } } for (int i = 0; i &lt; n; i++) { cout &lt;&lt; dp[i + 1] &lt;&lt; ' '; } cout &lt;&lt; ans &lt;&lt; endl; delete[] strs; return 0;}","link":"/2020/01/29/non-decrease-sequence/"},{"title":"OS Lab FTPå®¢æˆ·ç«¯å®ç°ä¸­è¸©è¿‡çš„å‘","text":"æ¦‚è¿°ä»Šå¹´å¤§äºŒä¸‹OS labä»HTTPè½¬å˜ä¸ºFTPï¼Œè¦æ±‚å®ç°å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ã€‚å‚è€ƒæ–‡æ¡£ä¸ºRFC 959ï¼Œè¯­è¨€ä¸é™ï¼ˆLJJè€å¸ˆå•¥éƒ½æ²¡è¯´ï¼‰ï¼Œåšæ³•ä¸é™ï¼ˆå…´è®¸ä¸è¦import ftpå°±è¡Œã€‚ã€‚ã€‚ï¼‰ï¼Œè¿™é‡Œç»†æ•°ä¸€ä¸‹å®¢æˆ·ç«¯ç¼–å†™è¿‡ç¨‹ä¸­è¸©è¿‡çš„å‘ã€‚ç”±äºè¿˜æ²¡æœ‰æäº¤ä½œä¸šï¼Œå°±ä¸è´´uglyçš„ä»£ç äº†ã€‚ã€‚ã€‚æ ·ä¾‹FTPå®¢æˆ·ç«¯åŸºäºC++åŠPocoç¼–å†™ï¼Œåˆ©ç”¨Pocoçš„StreamSocketæˆ–è€…DialogSocketä¸è¿œç«¯FTPæœåŠ¡å™¨äº¤äº’ã€‚FTPæ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€åè®®ï¼Œä½†å¯¹äºçŠ¶æ€ï¼Œå¤§éƒ¨åˆ†çš„å·¥ä½œåªè¦æœåŠ¡å™¨è®°ä½å°±è¡Œã€‚å®¢æˆ·ç«¯å°±å¯ä»¥ä¹±æ¥äº†ã€‚FTPä¸è¿œç«¯åŒ…å«ä¸¤ä¸ªè¿æ¥ï¼Œctrl-connection å’Œ data-connectionã€‚å¤§éƒ¨åˆ†çš„å‘½ä»¤é€šè¿‡ctrlèµ°responseï¼Œå°éƒ¨åˆ†ï¼ˆLISTï¼ŒRETRï¼Œç­‰æ•°æ®äº¤äº’ï¼‰é€šè¿‡dataèµ°ã€‚å¯¹äºä¸€ä¸ªç”¨æˆ·ä¸€ä¸ªä¼šè¯ï¼Œæ‰€æœ‰å·¥ä½œå‡ ä¹éƒ½æ˜¯é˜»å¡çš„ï¼ˆABORå‘½ä»¤é™¤å¤–ï¼‰ã€‚å› æ­¤ï¼Œè‹¥å®ç°minimum implementationï¼Œåªè¦åŒæ­¥çš„æ¨¡å‹å°±å¯ä»¥å®Œæˆã€‚ctrl-connectionå’Œdata-connectionç”±åŒä¸€ä¸ªçº¿ç¨‹å‘èµ·ï¼Œå¤©ç„¶åœ°ä¿è¯Nï¼ŒN+1ç«¯å£ä¸è¿œç«¯äº¤äº’ã€‚ problemsä¸€ä¸ªåŸºæœ¬çš„æ§åˆ¶äº¤äº’è¿‡ç¨‹æ˜¯ï¼Œæœ¬åœ°ç”Ÿæˆsocketï¼Œå‘è¿œç«¯å»ºç«‹è¿æ¥ï¼Œåˆ©ç”¨socketè¿›è¡Œå®æ—¶é€šä¿¡ã€‚æ‰€æœ‰çš„äº¤äº’éƒ½æ˜¯æ˜æ–‡äº¤äº’ï¼Œå› æ­¤å¯ä»¥è¯»å–ã€è§£æå›å¤æ˜¯ä»€ä¹ˆä¸œè¥¿ã€‚è‡³äºå„ä¸ªå›å¤ï¼ŒRFC959è¯´å¾—å°±å¾ˆæ¸…æ¥šäº†ã€‚123456789101112131415161718int Session::pasv() { ob buf; string format = \"PASV\\r\\n\"; RegularExpression pasv(\"(\\\\d{1,3}),(\\\\d{1,3})\\\\)\"); ctrl_cnn.sendBytes(format.c_str(), format.length()); ctrl_cnn.receiveBytes(buf, buf.length()); reply rp = replyParser(buf.read()); CHECK(rp, StatusPassiveMode); vector&lt;string&gt; filter; pasv.split(rp.des, filter); desDataPort = (stoi(filter[1]) &lt;&lt; 8) | stoi(filter[2]); data_cnn.connect(Net::SocketAddress(addr.host(), desDataPort)); return rp.code;} åœ¨è¿™è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€äº›è®©äººå¡å£³çš„äº‹æƒ…ï¼Œæ€»æ˜¯å¯¼è‡´it works, why? è¿™é‡Œä¾‹ä¸¾äº†ä¸€ä¸‹ã€‚ CMAKEæ‰¾ä¸åˆ°åº“æˆ‘ä»¥åŠä¸€äº›åŒå­¦çš„é¡¹ç›®ä¸­ä½¿ç”¨äº†CMAKEï¼Œæ‰€è°“makefile for makefileã€‚ã€‚ã€‚ç„¶é¹…å¼•ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œæ˜¯éœ€è¦é€šè¿‡find_libraryå’Œtarget_link_libraryæ‰èƒ½æ‰¾åˆ°ç›¸åº”çš„ä¸œè¥¿ã€‚CMAKEä¼šç»™makefileæ·»åŠ ç‰¹å®šçš„é“¾æ¥å‚æ•°ï¼Œè¿™æ ·æ‰å¯ä»¥æ‰¾åˆ°æˆ‘ä»¬ä½¿ç”¨çš„åº“æ–‡ä»¶ã€‚å•å¥çš„å‘½ä»¤å¦‚ä¸‹ï¼š1clang++ -g file.cpp -o -file -lPocoNet -lPocoFoundation -lm å¦‚æœæ²¡æœ‰æ·»åŠ é“¾æ¥å‚æ•°ï¼Œ0opsï¼Œå¤´æ–‡ä»¶æ‰¾ä¸ç€äº†ã€‚æœ€åCMakeList.txtå¤§æ¦‚é•¿è¿™æ ·ï¼š12345678910111213141516171819202122232425cmake_minimum_required(VERSION 3.0.0)project(final_lab_v2 VERSION 0.1.0)set(CMAKE_CXX_STANDARD 17)include(CTest)enable_testing()add_executable(final_lab_v2 main.cpp FrontEnd.cpp Connector.cpp Session.cpp OnceBuffer.cpp Buffer.cpp)find_library(POCO_NET PocoNet)find_library(POCO_FD PocoFoundation)target_link_libraries(final_lab_v2 ${POCO_NET} ${POCO_FD})add_definitions(-I/usr/local/opt/openssl/include)set(CPACK_PROJECT_NAME ${PROJECT_NAME})set(CPACK_PROJECT_VERSION ${PROJECT_VERSION})include(CPack) socketæ•°æ®ä¼ è¾“çš„å®Œæ•´æ€§é—®é¢˜è¿™é‡Œæ¶‰åŠçš„ï¼Œå°±åŒ…æ‹¬ä»€ä¹ˆæ—¶é—´ä¼ è¾“å®Œï¼Œä»€ä¹ˆæ—¶é—´æ¥æ”¶å®Œï¼Œä»¥åŠç²˜åŒ…é—®é¢˜ã€‚åœ¨socketç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬åº•å±‚è°ƒç”¨çš„å‡½æ•°ä¸ºrecvå’Œsendï¼Œè€Œè¿™ä¸¤ä¸ªå‡½æ•°å¯ä»¥è®¾ç½®ä¸ºé˜»å¡/éé˜»å¡ï¼Œåˆ©ç”¨å¤šçº¿ç¨‹æŠ€æœ¯å¯ä»¥å®ç°åŒæ­¥/å¼‚æ­¥ã€‚ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°ï¼Œæ¯æ¬¡sendä¸€å¥å‘½ä»¤ï¼Œè¯»çš„æ—¶å€™æ€»èƒ½å®Œæ•´åœ°è¯»åˆ°ç›¸åº”çš„responseã€‚It worksï¼Œwhyï¼Ÿ è¿™é‡Œå°±è¦æ¶‰åŠé˜»å¡ã€éé˜»å¡çš„è¡Œä¸ºï¼šé˜»å¡æƒ…å†µä¸‹:åœ¨é˜»å¡æ¡ä»¶ä¸‹ï¼Œread/recv/msgrcvçš„è¡Œä¸º: å¦‚æœæ²¡æœ‰å‘ç°æ•°æ®åœ¨ç½‘ç»œç¼“å†²ä¸­ä¼šä¸€ç›´ç­‰å¾…ï¼Œ å½“å‘ç°æœ‰æ•°æ®çš„æ—¶å€™ä¼šæŠŠæ•°æ®è¯»åˆ°ç”¨æˆ·æŒ‡å®šçš„ç¼“å†²åŒºï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªæ—¶å€™è¯»åˆ°çš„æ•°æ®é‡æ¯”è¾ƒå°‘ï¼Œæ¯”å‚æ•°ä¸­æŒ‡å®šçš„é•¿åº¦è¦å°ï¼Œread å¹¶ä¸ä¼šä¸€ç›´ç­‰å¾…ä¸‹å»ï¼Œè€Œæ˜¯ç«‹åˆ»è¿”å›ã€‚read çš„åŸåˆ™:æ˜¯æ•°æ®åœ¨ä¸è¶…è¿‡æŒ‡å®šçš„é•¿åº¦çš„æ—¶å€™æœ‰å¤šå°‘è¯»å¤šå°‘ï¼Œæ²¡æœ‰æ•°æ®å°±ä¼šä¸€ç›´ç­‰å¾…ã€‚æ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹:æˆ‘ä»¬è¯»å–æ•°æ®éƒ½éœ€è¦é‡‡ç”¨å¾ªç¯è¯»çš„æ–¹å¼è¯»å–æ•°æ®ï¼Œå› ä¸ºä¸€æ¬¡read å®Œæ¯•ä¸èƒ½ä¿è¯è¯»åˆ°æˆ‘ä»¬éœ€è¦é•¿åº¦çš„æ•°æ®ï¼Œread å®Œä¸€æ¬¡éœ€è¦åˆ¤æ–­è¯»åˆ°çš„æ•°æ®é•¿åº¦å†å†³å®šæ˜¯å¦è¿˜éœ€è¦å†æ¬¡è¯»å–ã€‚éé˜»å¡æƒ…å†µä¸‹:åœ¨éé˜»å¡çš„æƒ…å†µä¸‹ï¼Œread çš„è¡Œä¸º: å¦‚æœå‘ç°æ²¡æœ‰æ•°æ®å°±ç›´æ¥è¿”å›ï¼Œ å¦‚æœå‘ç°æœ‰æ•°æ®é‚£ä¹ˆä¹Ÿæ˜¯é‡‡ç”¨æœ‰å¤šå°‘è¯»å¤šå°‘çš„è¿›è¡Œå¤„ç†ï¼æ‰€ä»¥:read å®Œä¸€æ¬¡éœ€è¦åˆ¤æ–­è¯»åˆ°çš„æ•°æ®é•¿åº¦å†å†³å®šæ˜¯å¦è¿˜éœ€è¦å†æ¬¡è¯»å–ã€‚å¯¹äºè¯»è€Œè¨€: é˜»å¡å’Œéé˜»å¡çš„åŒºåˆ«åœ¨äºæ²¡æœ‰æ•°æ®åˆ°è¾¾çš„æ—¶å€™æ˜¯å¦ç«‹åˆ»è¿”å›ï¼ recv ä¸­æœ‰ä¸€ä¸ªMSG_WAITALL çš„å‚æ•°:1recv(sockfd, buff, buff_size, MSG_WAITALL), åœ¨æ­£å¸¸æƒ…å†µä¸‹recv æ˜¯ä¼šç­‰å¾…ç›´åˆ°è¯»å–åˆ°buff_size é•¿åº¦çš„æ•°æ®ï¼Œä½†æ˜¯è¿™é‡Œçš„WAITALL ä¹Ÿåªæ˜¯å°½é‡è¯»å…¨ï¼Œåœ¨æœ‰ä¸­æ–­çš„æƒ…å†µä¸‹recv è¿˜æ˜¯å¯èƒ½ä¼šè¢«æ‰“æ–­ï¼Œé€ æˆæ²¡æœ‰è¯»å®ŒæŒ‡å®šçš„buff_sizeçš„é•¿åº¦ã€‚æ‰€ä»¥å³ä½¿æ˜¯é‡‡ç”¨recv + WAITALL å‚æ•°è¿˜æ˜¯è¦è€ƒè™‘æ˜¯å¦éœ€è¦å¾ªç¯è¯»å–çš„é—®é¢˜ï¼Œåœ¨å®éªŒä¸­å¯¹äºå¤šæ•°æƒ…å†µä¸‹recv (ä½¿ç”¨äº†MSG_WAITALL)è¿˜æ˜¯å¯ä»¥è¯»å®Œbuff_sizeï¼Œæ‰€ä»¥ç›¸åº”çš„æ€§èƒ½ä¼šæ¯”ç›´æ¥read è¿›è¡Œå¾ªç¯è¯»è¦å¥½ä¸€äº›ã€‚ So, é˜»å¡çŠ¶æ€ä¸‹ï¼Œconnectï¼Œsendä¸€å¥ï¼Œreceiveä¸€å¥ï¼Œå®Œæ•´çš„ï¼Œit worksã€‚æ­£ç¡®æ€§ç”±Linuxå†…æ ¸ä¿è¯ã€‚å‚è€ƒä¹¦ç›®ï¼šUnixç½‘ç»œç¼–ç¨‹ã€‚è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯ç²˜åŒ…é—®é¢˜ã€‚ç²˜åŒ…é—®é¢˜åœ¨golang TCPç¼–ç¨‹ä¸­æ˜¯ä¸€ä¸ªå…¸å‹çš„é—®é¢˜ã€‚æ¯”å¦‚ä½ å‘äº†RETRå‘½ä»¤ï¼ŒæœåŠ¡ç«¯é¦–å…ˆä¼šå‘ä¸€ä¸ª150çš„å›å¤ï¼Œåœ¨dataä¼ è¾“å®Œæˆä¹‹åï¼Œä¼šå‘ä¸€ä¸ª226çš„å›å¤ã€‚å¦‚æœä½ æ²¡æœ‰æ­£ç¡®çš„æ—¶é—´ç‚¹è¯»åˆ°ï¼Œä¸¤æ¡å›å¤å°±ä¼šç²˜åœ¨ä¸€èµ·ã€‚è¿™æ—¶å€™ä½ å°±å°´å°¬äº†ï¼Œå¦‚ä½•parseä¹Ÿæ˜¯ä¸ªé—®é¢˜ã€‚æ‰€ä»¥ï¼Œé˜»å¡çŠ¶æ€ä¸‹ï¼Œsendä¸€ä¸ªRETRï¼Œè¯»150çš„responseï¼Œç„¶åå†å¼€å§‹data_connectionä¼ é€æ•°æ®ï¼Œç„¶åå†ctrl_cnn.recvï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯æ­£ç¡®çš„æ—¶åºã€‚ç²˜åŒ…é—®é¢˜åœ¨FTPä¸­åŸºæœ¬å°±é‡ä¸åˆ°äº†ã€‚ ä¸€äº›çç¢é—®é¢˜ æ¯æ¬¡å‘é€/æ¥æ”¶å®Œæ•°æ®ï¼Œä½¿ç”¨å®Œæ¯•åï¼Œbufferéƒ½è¦æ¸…ç©ºï¼Œå› ä¸ºä¸Šä¸€æ¬¡çš„æ•°æ®ä¼šç²˜åœ¨\\0åé¢ã€‚ä¸€ä¸ªå­—ç¬¦ä¸²è¯»å®Œäº†ï¼Œä½†\\0åé¢å¯èƒ½ä¼šä¿ç•™ä¸Šä¸€æ¬¡çš„ä¸œè¥¿ï¼Œåœ¨æ•°æ®å†™/ctrl parsingçš„æ—¶å€™ï¼Œå°±å®¹æ˜“å‡ºé”™ã€‚å¯ä»¥åˆ†è£…ä¸€ä¸ªOnceBufferã€‚ç”¨memsetå»æ¸…ç©ºå°±è¡Œäº†ã€‚ å‘é€/æ¥æ”¶æ–‡ä»¶å¿…é¡»ä¿è¯è¯»å®Œï¼Œå¦å¤–å†™socket/æ–‡ä»¶çš„æ—¶å€™ï¼Œä¸è¦å›ºå®šbufferï¼Œè¦æ ¹æ®fread/receiveBytesçš„è¿”å›å€¼æ¥ç¡®å®šåˆ°åº•å†™å¤šå°‘ã€‚æ¯”å¦‚ï¼Œå›ºå®šbufferé•¿åº¦å¯èƒ½å¯¼è‡´æ–‡ä»¶æœ«å°¾å¤šå‡ºäº†å¾ˆå¤šæ— ç”¨çš„0çš„é—®é¢˜ã€‚ #pragma onceä¿è¯äº†ä¸ä¼šé‡å¤åŒ…å«ã€‚ å¤šè¡Œå›å¤ï¼ˆHELPï¼‰å’±å°±ä¸åšäº†ï¼Œåæ­£ä¹Ÿä¸ä¼šç»™ç”¨æˆ·è£¸å‘½ä»¤ï¼ˆé€ƒ æˆ‘ä»¬å®¢æˆ·ç«¯æ˜¯connectionï¼Œç”¨TCPserveræ˜¯ä¸è¡Œçš„ï¼ˆè¿™æ˜¯fei huaã€‚ã€‚ï¼‰ unique_ptrå¤§å¹…åº¦é™ä½å†…å­˜æ³„æ¼é—®é¢˜ ç”¨pythonå†™ä¼šæ›´åŠ å¿«ï¼Œä¼šæ›´åŠ æ²¡æœ‰å¹³å°ç›¸å…³æ€§ï¼Œç”šè‡³å¯ä»¥ç”¨æ¥å†™GUIã€‚ å‘éƒ½æ˜¯ä¸€èµ·è¸©çš„å‘ï¼Œè¿™é‡Œæ„Ÿè°¢æ²‰è¿·MCçš„é»„æ¿æ¡¥åŒå­¦ï¼Œæ²‰è¿·WOWçš„å‘æ—¥è‘µåŒå­¦ï¼Œå’Œåƒéº¦å½“åŠ³çš„ZLTåŒå­¦hhhhhh","link":"/2018/07/15/os_lab_ftp/"},{"title":"å¥ é€å»çš„å¥½æˆ˜å‹","text":"2020å¹´4æœˆ5æ—¥å‡Œæ™¨ï¼Œæ›¾ç»çš„å¥½å‹ï¼Œå…±åŒå­¦ä¹ æˆé•¿çš„æˆ˜å£«ï¼Œç¦»å¼€äº†äººä¸–ã€‚å®˜æ–¹è¯´è¾æ˜¯ï¼Œå‘ç”Ÿäº†æ„å¤–ã€‚ Hwongä¸æˆ‘ä»¬è™½ç„¶å¸¸åœ¨ä¸€ä¸ªè®¨è®ºç­å­¦ä¹ ï¼Œä¹Ÿæ˜¯å…¶ä¸­æœ€ä¼˜ç§€çš„ä¸€å‘˜ã€‚ä½†ä»–åœ¨4æœˆ5æ—¥æ°¸è¿œç¦»å¼€äº†æˆ‘ä»¬ã€‚æˆ‘ä»¬æ€ä¹ˆä¹Ÿä¸èƒ½æƒ³åˆ°çš„æ˜¯ï¼Œè¿™æ ·ä¸€ä¸ªä¼˜ç§€çš„åŒå­¦ï¼Œå¤šæ¬¡æ–©è·è…¾è®¯ã€pingcapã€å¤´æ¡Offerçš„åŒå­¦ï¼Œä¼šåšå‡ºå¦‚æ­¤è®©äººæƒ‹æƒœçš„äº‹æƒ…ã€‚æ ¹æ®æˆ‘ä»¬å¯¹ä»–çš„ç†è§£ï¼Œå‘ç”Ÿæ„å¤–ä¹Ÿè®¸åªæ˜¯å®˜æ–¹ä¸ºäº†å¤§äº‹åŒ–å°çš„è¯´è¾ã€‚æ¯•ç«Ÿï¼Œåœ¨è¥¿ä¸‰ç”Ÿæ´»äº†4å¹´ï¼Œç¯å¢ƒå¦‚æ­¤ç†Ÿæ‚‰ï¼Œä¼šæœ‰ä»€ä¹ˆæ„å¤–ï¼Œæ˜¯æƒ³ä¸åˆ°çš„å‘¢ã€‚ä¹Ÿè®¸Hwongåªæ˜¯åšå‡ºäº†è‡ªå·±æœ€æ— å¥ˆçš„é€‰æ‹©ç½¢äº†ã€‚è‡³äºä¸ºä½•ä¼šè®©ä»–è§‰å¾—èµ°æŠ•æ— è·¯ï¼Œæˆ‘ä»¬ä¸å¾—è€ŒçŸ¥ã€‚ä¹Ÿè®¸æ˜¯å®¶åº­ï¼Œä¹Ÿè®¸æ˜¯åˆ«çš„ï¼Œä»€ä¹ˆéƒ½ä¸å¥½è¯´ã€‚å¸Œæœ›å®ƒèƒ½å¤Ÿåœ¨å¦ä¸€ä¸ªä¸–ç•Œå®‰æ¯ï¼Œä¸è¦å†å½“ç¨‹åºå‘˜äº†ã€‚","link":"/2020/05/05/rip_hwang/"},{"title":"LeetCode 54 - Spiral Order","text":"è¿™é“é¢˜ï¼Œè§¦åŠæˆ‘å¾ˆå¤šä¼¤ç—›ã€‚é«˜ä¸­OIï¼Œå¤§å­¦ACMï¼Œé¢è¯•ï¼Œä»Šå¤©ç»ˆäºå®Œæ•´å†™å®Œäº†ã€‚ã€‚ã€‚ ä¸Šä¸‹å·¦å³æ­å»º4é¢å¢™ï¼Œä½œä¸ºå“¨å…µæ¡ä»¶ã€‚æ¯è·³å‡ºä¸€è¾¹ï¼Œå¢™å°±å‘ä¸­é—´ç§»åŠ¨ä¸€æ¬¡ã€‚è®°å¾—æ¯æ¬¡éƒ½ç¡®è®¤æ˜¯å¦å¢™è¶Šç•Œäº†ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142class Solution { public List&lt;Integer&gt; spiralOrder(int[][] matrix) { List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); if (matrix.length == 0) return list; int up = 0, down = matrix.length - 1, left = 0, right = matrix[0].length - 1; int i = left; while (up &lt;= down) { i = left; while (i &lt; right + 1) { list.add(matrix[up][i++]); } i = up + 1; up++; if (up &gt; down) break; while (i &lt; down + 1) { list.add(matrix[i++][right]); } i = right - 1; right--; if (left &gt; right) break; while (i &gt;= left) { list.add(matrix[down][i--]); } i = down - 1; down--; if (up &gt; down) break; while (i &gt;= up) { list.add(matrix[i--][left]); } left++; if (left &gt; right) break; } return list; }}","link":"/2020/03/06/spiral-order/"},{"title":"CS: APP CH5ï¼šç¼–è¯‘å™¨/å¤„ç†å™¨è§†è§’çš„ç¨‹åºä¼˜åŒ–","text":"å€Ÿbannerä»¥è¡¨è¾¾å¯¹MCçš„çƒ­çˆ±ã€‚ã€‚ã€‚(ï¿£â–½ï¿£)v0.1: initial commitv0.1.1: æ„Ÿè°¢å°ç¥å¸ˆå…„çš„æé†’ä¸æŒ‡å¯¼ï¼ CS: APP ç¬¬äº”ç« ä»ç¼–è¯‘å™¨ä¸å¤„ç†å™¨çš„è§’åº¦ï¼Œåˆ©ç”¨cè¯­è¨€å®ç°ï¼Œæè¿°äº†ç¨‹åºé€šç”¨çš„ä¼˜åŒ–æ–¹æ³•ã€‚è¿™ç§é€šç”¨çš„æ–¹æ³•çš„åº¦é‡å› ä¸åŒå¤„ç†å™¨è€Œå¼‚ï¼Œä½†ç­–ç•¥æ˜¯ç›¸ä¼¼çš„ã€‚é™¤å¼€ç®—æ³•ä¸Šçš„ä¼˜åŒ–ï¼ŒåŸºäºæœºå™¨çš„ç³»æ•°çº§ä¼˜åŒ–æ˜¯æœ¬ç« çš„é‡ç‚¹ã€‚æˆ‘ä»¬åˆ©ç”¨CPE(Cycle Per Element)æ¥åº¦é‡ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼Œä»¥4ä»£ core i7-47x0 ä»¥åŠ GCC4.8.x ä¸ºæ ·ä¾‹æœºå™¨ï¼Œé€šè¿‡å¤šç§æ–¹å¼æ¥å¯¹ç¨‹åºè¿›è¡Œç³»æ•°çº§ä¼˜åŒ–ã€‚æ²¡æœ‰ä¹¦çš„åŒå­¦ç‚¹è¿™é‡Œâ€¦â€¦ï¼ˆç¬¬äºŒç‰ˆä¸ç¬¬ä¸‰ç‰ˆç±»ä¼¼ï¼Œå°½ç®¡æˆ‘ä»¬ç”¨çš„æ˜¯ç¬¬ä¸‰ç‰ˆï¼‰ æ¦‚è¿°&emsp;&emsp;å¯¹ç¨‹åºè¿›è¡Œç³»æ•°çº§çš„ä¼˜åŒ–ï¼Œå¦‚ä¹¦ä¸­æ‰€è¯´ï¼Œæ˜¯ä¸€ä»¶éå¸¸magicçš„äº‹æƒ…ã€‚æœ‰äº›çœ‹ä¸Šå»å¯èƒ½æœ‰æ‰€ä¼˜åŒ–çš„ä¸œè¥¿ï¼Œå…¶å®å¯¹ç¨‹åºå¹¶æ²¡æœ‰å¤ªå¤§çš„å½±å“ï¼›è€Œæœ‰äº›å¾®ä¸è¶³é“çš„åŠ¨ä½œï¼Œå¯èƒ½å°±å¸¦æ¥å·¨å¤§çš„æ€§èƒ½æå‡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸æ–­å°è¯•ï¼Œä¸æ–­å¯»æ‰¾æœ€ä¼˜è§£ï¼Œæœ€ååˆ¤å®šä¼˜åŒ–çš„ç“¶é¢ˆåœ¨å“ªé‡Œã€‚è¿™æ˜¯ç®—æ³•ç†è®ºä¸å®ç°ç»†èŠ‚çš„ç»“åˆï¼Œéœ€è¦å¤šæ–¹é¢çš„å¯»æ‰¾æœ€ä½³çš„è§£å†³æ–¹æ¡ˆã€‚&emsp;&emsp;ç†è§£ç¼–è¯‘å™¨ä¸å¤„ç†å™¨çš„è¿è¡Œç‰¹ç‚¹ï¼Œä»è€Œè¿›è¡Œç¨‹åºä¼˜åŒ–æ˜¯æœ¬ç« çš„ä¸»é¢˜ã€‚ä¹¦ä¸­é’ˆå¯¹ç¼–è¯‘å™¨ä¸å¤„ç†å™¨ä¸¤ä¸ªæ–¹é¢æå‡ºäº†ä¸åŒçš„è§£å†³æ–¹æ¡ˆã€‚è¿™ä¸¤ä¸ªæ–¹æ¡ˆåœ¨å®è·µä¸­åŒç­‰é‡è¦ï¼Œå„è‡ªæœ‰ä¸åŒçš„æ„ä¹‰ã€‚é€šè¿‡å¯¹ç¼–è¯‘å™¨åŠ¨ä½œçš„äº†è§£ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£å“ªé‡Œå¯ä»¥è®©ç¼–è¯‘å™¨äº§ç”Ÿä¼˜ç§€çš„æ±‡ç¼–æŒ‡ä»¤ï¼Œå‡å°‘PCè·³è½¬ï¼Œä»¥åŠä¸å¿…è¦çš„å†…å­˜è®¿é—®æˆ–å…¶ä»–æ“ä½œï¼Œè¿™ç§æ“ä½œæ˜¯ä¸å–å†³äºæœºå™¨ç§ç±»çš„ï¼›é€šè¿‡å¯¹å¤„ç†å™¨çš„äº†è§£ï¼Œæˆ‘ä»¬å¯ä»¥å‡å°‘æ•°æ®ä¾èµ–ï¼Œä»¥è¾¾åˆ°æœ€å¤§çš„æ•°æ®å¹³è¡Œè®¡ç®—(parallelism)ï¼Œè¿½æ±‚æœ€é«˜çš„è¿è¡Œé€Ÿåº¦ã€‚æˆ‘ä»¬é€šè¿‡ä¸æ–­ä¿®æ”¹è‡ªå·±çš„ä»£ç ï¼Œä»è€Œè¾¾åˆ°ä¸€ä¸ªæ¨¡å—åŒ–ä¸é«˜æ•ˆæ€§ä¹‹é—´çš„å¹³è¡¡ã€‚ ç¨‹åºæ•ˆç‡çš„è¡¨è¾¾&emsp;&emsp;ç”±äºç¨‹åºæ•ˆç‡è·Ÿå¤„ç†æ•°æ®çš„é€Ÿåº¦æœ‰å…³ï¼Œå¯¹äºç¨‹åºçš„æ•ˆç‡ï¼Œä¹¦ä¸­ç”¨äº†â€œCPEâ€çš„å•ä½æ¥è¡¨è¾¾ã€‚å³â€Cycles per elementâ€ã€‚å–å¤„ç†æ¯ä¸ªå…ƒç´ æ‰€éœ€çš„å¤„ç†å™¨å‘¨æœŸä½œä¸ºæŒ‡æ ‡ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä¼šå–ä¸€ç»„æ•°å­—è¿›è¡Œæ›²çº¿æ‹Ÿåˆï¼Œè·å–ä¸€æ¬¡å¤šé¡¹å¼æ‹Ÿåˆçš„æ–œç‡ä½œä¸ºè¡¡é‡æŒ‡æ ‡ï¼šCPEã€‚(Figure5.2)&emsp;&emsp;è¿™é‡Œçš„å‘¨æœŸï¼Œæ˜¯æŒ‡å®Œæˆä¸€ä¸ªå…ƒç´ å¤„ç†æ‰€éœ€è¦çš„å¹³å‡å‘¨æœŸã€‚åœ¨å¯¹è¿™ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†çš„æ—¶å€™ï¼Œéœ€è¦çš„å‘¨æœŸè¶ŠçŸ­ï¼Œé€Ÿåº¦å°±è¶Šå¿«ã€‚$$CPE = \\frac{cycles}{element}$$&emsp;&emsp;åœ¨å›¾5.2ä¸­ï¼Œpsum1çš„CPEæ˜¯9.0ï¼Œ psum2çš„æ˜¯6.0ã€‚å¯è§ï¼Œé¢å¯¹ä¸åŒçš„ç­–ç•¥ï¼Œæ˜¾ç„¶æ•ˆç‡æœ‰æ‰€ä¸åŒã€‚&emsp;&emsp;è¿™é‡Œçš„å‘¨æœŸï¼Œæ˜¯æŒ‡å®Œæˆä¸€ä¸ªå…ƒç´ å¤„ç†æ‰€éœ€è¦çš„å¹³å‡å‘¨æœŸã€‚åœ¨å¯¹è¿™ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†çš„æ—¶å€™ï¼Œéœ€è¦çš„å‘¨æœŸè¶ŠçŸ­ï¼Œé€Ÿåº¦å°±è¶Šå¿«ã€‚åŒæ—¶ï¼Œè¡¡é‡ä¸€ä¸ªç¨‹åºæ˜¯å¦ä¼˜åŒ–åˆ°ç“¶é¢ˆï¼Œè¿˜éœ€è¦æ›´å¤šçš„è¡¡é‡æ ‡å‡†ã€‚ç°æœ‰çš„è¡¡é‡æ ‡å‡†ï¼Œæ˜¯åœ¨ä¸€å®šçš„CPUæŒ‡æ ‡çš„åŸºç¡€ä¸Šè¿›è¡Œåº¦é‡ã€‚æˆ‘ä»¬çš„æ ·ä¾‹CPU(Core i7 4e)çš„æ€§èƒ½è¿›è¡Œåˆ†æä¹Ÿæ˜¯å¦‚æ­¤ã€‚åº¦é‡çš„æ–¹æ³•æœ‰ï¼š å•ä½è€—æ—¶(latency): åšè¿ç»­åŒä¸€ç§è¿ç®—æ—¶ï¼Œæ¯æ¬¡è¿ç®—æ‰€éœ€æ¶ˆè€—çš„æ—¶é—´ã€‚ ååé‡æé™(throuput bound): è·ŸCPUçš„ååèƒ½åŠ›æœ‰å…³ å¤„ç†æ—¶é—´(issue time): æ¯æ¡æŒ‡ä»¤å¤„ç†æ—¶é—´ å¤„ç†å®¹é‡(capability): ä¸CPUåŠŸèƒ½å•å…ƒæœ‰å…³çš„èƒ½åŠ› ä¾‹å¦‚ï¼šï¼ˆå•ä½ï¼šCPEï¼‰ op Latency Issue capacity float addition 3 1 1 int addition 3 1 4 float multiplication 5 1 2 è¿™äº›æŒ‡æ ‡è·ŸCPUä»¥åŠç¨‹åºçš„è¿è¡ŒçŠ¶æ€æ¯æ¯ç›¸å…³ï¼Œå› ä¸ºå®ƒä»¬æ ‡å¿—ç€å¤„ç†å™¨çš„èƒ½åŠ›æé™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¶Šæ¥è¿‘å¤„ç†å™¨æœ¬èº«çš„æé™ï¼Œç¨‹åºä¼˜åŒ–å¾—å°±è¶Šå¥½ã€‚å…¶ä¸­latency boundæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æé™ï¼Œç„¶åthroughput boundæ˜¯æœ€ç»ˆå¾—æé™ã€‚æœ‰äº†è¿™æ ·çš„åŸºå‡†ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æµ‹è¯•ç¨‹åºçš„è¿è¡Œæ•ˆç‡äº†ã€‚åŒæ—¶ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™æˆ‘ä»¬å¼€å¯ -O1 ä¼˜åŒ–å¼€å…³ï¼Œåˆ©ç”¨ä¼˜åŒ–å‰åçš„æ¯”è¾ƒè§‚å¯Ÿä¼˜åŒ–æ•ˆæœã€‚ ç¼–è¯‘å™¨è§†è§’çš„ä¼˜åŒ–&emsp;&emsp;ä»ç¼–è¯‘å™¨çš„è§†è§’ä¼˜åŒ–ï¼Œæ„æ€æ˜¯å†™å‡ºèƒ½è®©ç¼–è¯‘å™¨èƒ½äº§ç”Ÿæ›´é«˜æ•ˆçš„æ±‡ç¼–æŒ‡ä»¤çš„ä»£ç ã€‚åœ¨è¿™ä¸ªå±‚é¢ä¸Šï¼Œæˆ‘ä»¬å°±éœ€è¦ç†è§£ç¼–è¯‘å™¨æ‰€åšçš„å·¥ä½œã€‚ ç¼–è¯‘å™¨çš„èƒ½åŠ›ä¸éšœç¢&emsp;&emsp;ç°ä»£ç¼–è¯‘å™¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¼šç”¨å¤æ‚çš„ç®—æ³•åˆ†ææˆ‘ä»¬çš„ä»£ç å¹¶è¿›è¡Œä¼˜åŒ–ã€‚åŒæ—¶ï¼Œå®ƒé€šå¸¸é™„å¸¦æœ‰-Og,-O1ç­‰ä¼˜åŒ–å¼€å…³ï¼Œå…è®¸æˆ‘ä»¬å†³å®šä¼˜åŒ–çš„æ¿€è¿›ç¨‹åº¦ã€‚è¿™ç§ç¼–è¯‘ç¼–è¯‘å™¨å–å†³çš„ä¼˜åŒ–å·¥ä½œæˆ‘ä»¬å¾ˆéš¾è¿›è¡Œå¤„ç†ã€‚ç„¶è€Œï¼Œè®¸å¤šå·¥ä½œéƒ½æ˜¯åŸæœ‰çš„ä¼˜åŒ–æ— æ³•å®Œæˆçš„ï¼Œè¿™äº›æ— æ³•å®Œæˆçš„å·¥ä½œç§°ä¹‹ä¸ºâ€œä¼˜åŒ–éšœç¢â€( optimization blockers )ã€‚è¿™ç§ä¼˜åŒ–éšœç¢åœ¨ç¼–è¯‘å™¨å±‚é¢æ˜¯æ— å¯é¿å…çš„ï¼Œå› ä¸ºåªå®ƒä¼šåœ¨å®‰å…¨çš„åŸºç¡€ä¸Šä¼˜åŒ–æˆ‘ä»¬çš„ä»£ç ï¼Œä½¿å…¶åœ¨æ±‡ç¼–å±‚é¢ä¸Šæ›´åŠ é«˜æ•ˆã€‚for example:12345678void twiddle1(long *xp, long *yp) { *xp += *yp; *xp += *yp;}void twiddle2(long *xp, long *yp) { *xp += 2 * *yp;} &emsp;&emsp;æ˜¾ç„¶ï¼Œtwiddle1ç›¸å¯¹äºtwiddle2ä½æ•ˆï¼Œå› ä¸ºç¬¬ä¸€ä¸ªè¿›è¡Œäº†6æ¬¡å†…å­˜è®¿å­˜ï¼Œç¬¬äºŒä¸ªè¿›è¡Œäº†3æ¬¡ã€‚ç„¶ç¼–è¯‘ç¼–è¯‘å™¨å¹¶ä¸ä¼šæŠŠç¬¬ä¸€ç§ä¼˜åŒ–æˆç¬¬äºŒç§ï¼Œå› ä¸ºæ¶‰åŠåˆ°äº†å†…å­˜åˆ«å(memory aliasing)é—®é¢˜ã€‚è‹¥ç¬¬ä¸€æ¬¡è¾“å…¥çš„å‚æ•°ä¸º(xp, xp), åˆ™ä¸¤æ¬¡è¿ç®—éƒ½åªæ˜¯å¯¹xpè¿›è¡Œæ“ä½œã€‚è¿™æ ·äº§ç”Ÿçš„æ•ˆæœï¼Œæˆ–å‰¯ä½œç”¨(side effact)å°±ä¸twiddle2ä¸ä¸€è‡´ã€‚è¿™ç§æ”¹å˜è¡Œä¸ºçš„ä¼˜åŒ–ï¼Œç¼–è¯‘å™¨ä¸ä¼šåšã€‚&emsp;&emsp;ä¸ä»…å¦‚æ­¤ï¼Œåœ¨å‡½æ•°è°ƒç”¨æ–¹é¢ï¼Œå¤§å¤šæ•°ç¼–è¯‘å™¨ä¹Ÿä¸ä¼šåˆ¤æ–­ä¸€ä¸ªå‡½æ•°æ˜¯å¦é€ æˆäº†å‰¯ä½œç”¨ã€‚å› æ­¤åœ¨ä¼˜åŒ–çš„æ—¶å€™æ€»æ˜¯ä»¥æœ€åæƒ…å†µæ¥åšï¼Œå³ä¿ç•™åŸæœ‰çš„å‡½æ•°è°ƒç”¨ã€‚å¦‚ï¼š12345678long f();long func1() { return f()+ f()+ f()+ f();}long func2() { return 4 * f();} &emsp;&emsp;ç¼–è¯‘å™¨ä¸ä¼šæŠŠç¬¬ä¸€ç§ä¼˜åŒ–ä»¥è¾¾åˆ°ç¬¬äºŒç§çš„æ•ˆæœï¼Œå®ƒä¼šä¿ç•™å‡½æ•°è°ƒç”¨ï¼Œæ¯æ¬¡è§¦å‘å°±è¿›è¡Œä¸€æ¬¡è·³è½¬ï¼Œè¿”å›ã€‚å› ä¸ºå®ƒä¸ä¼šé¢„æµ‹f()æ˜¯å¦æ”¹å˜äº†ä»€ä¹ˆã€‚ &emsp;&emsp;ä¸è¿‡ï¼Œå…¶ä¸­çš„ä¸€ä¸ªå°æ’æ›²æ˜¯ï¼Œå°½ç®¡ç¼–è¯‘å™¨é€šå¸¸æœ‰ä¼˜åŒ–å¼€å…³ï¼Œä¾‹å¦‚åœ¨ä¼˜åŒ–å‚æ•°ä¸º-O2çš„ç”šè‡³æ›´é«˜æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±ä¼šæ›´åŠ æ¿€è¿›åœ°ä¿®é¥°ä»£ç ï¼Œä½†è¿™æ ·å°±æé«˜äº†æ½œåœ¨çš„å‰¯ä½œç”¨ä¸Šçš„é£é™©ã€‚&emsp;&emsp;ä¸¾ä¸ªä¹¦æœ¬å¤–çš„ä¾‹å­ï¼š12345678910111213141516171819202122232425262728#include &lt;cstdint&gt;#include &lt;iostream&gt;#ifndef count#define count 2000#endif__inline__ uint64_t perf_counter(void) { uint32_t lo, hi; // take time stamp counter, rdtscp does serialize by itself, and is much // cheaper than using CPUID __asm__ __volatile__(\"rdtscp\" : \"=a\"(lo), \"=d\"(hi)); return ((uint64_t)lo) | (((uint64_t)hi) &lt;&lt; 32);}int main() { int i = 0; int a[count]; uint64_t t1 = perf_counter(); while (i++ &lt; count / 3) { a[3 * i - 3] = 11; a[3 * i - 2] = 11; a[3 * i - 1] = 111; a[3 * i] = 121; } uint64_t t2 = perf_counter(); std::cout &lt;&lt; t2 - t1 &lt;&lt; std::endl; return 0;} &emsp;&emsp;è¿™ä¸ªç¨‹åºåµŒå…¥äº†ä¸€æ®µæ±‡ç¼–ä»£ç ï¼Œä»¥è¯»å–æ‰§è¡Œwhileå¾ªç¯å‰åçš„CPUå‘¨æœŸå·®å€¼ã€‚å½“é»˜è®¤ä¼˜åŒ–æˆ–è€…ä¸º-O1çš„æ—¶å€™ï¼Œç¨‹åºæ­£å¸¸è¾“å‡ºå‘¨æœŸå·®ï¼›ä½†å¦‚æœå¼€å¯äº†-O2ï¼ˆåœ¨Apple clang 8.0.0 ä¸‹ï¼‰ï¼Œæƒ…å†µå°±ä¸ä¸€æ ·äº†ã€‚è¾“å‡ºçš„å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚ &emsp;&emsp;é‰´äºæ­¤ï¼Œæˆ‘ä»¬å°±æœ‰åœ¨ç¼–è¯‘å™¨å±‚é¢ä¸Šä¼˜åŒ–çš„æ€è·¯äº†ã€‚ åœ¨ä¹¦ä¸­æˆ‘ä»¬å¤šæ¬¡ä½¿ç”¨äº†ä¸‹é¢è¿™ä¸ªç¨‹åºæ ·æœ¬ï¼šè¿™æ˜¯ä¸€ä¸ªå‘é‡çš„å®ç°ï¼Œæ•ˆæœç±»ä¼¼äºc++ STLé‡Œé¢çš„vectorï¼š12345678910111213141516171819202122#define OP *#define IDENT 1/* Create vector of specified length */vec_ptr new_vec(long len);/* Retrieve vector element and store at dest */int get_vec_element(vec_ptr v, long index, data_t *dest);/* Return lenght of */long vec_length(vec_ptr v);void combine1(vec_ptr v, data_t *dest) { long i; *dest = IDENT; for(i = 0; i &lt; vec_length(v); i++) { data_t val; get_vec_element(v, i, &amp;val); *dest = *dest OP val; }} &emsp;&emsp;å…¨ç« åŸºæœ¬ä¸Šéƒ½æ²¿ç”¨è¿™æ ·çš„ä¸ªä¾‹å­çš„å»¶ä¼¸ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„é˜è¿°ä¹Ÿå›´ç»•å®ƒè¿›è¡Œã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥åšçš„å·¥ä½œæœ‰ï¼š ä¼˜åŒ–å¾ªç¯æ•ˆç‡ é™ä½è¿‡ç¨‹è°ƒç”¨ å»é™¤ä¸å¿…è¦çš„å†…å­˜è®¿é—® è¿™ä¸‰é¡¹å·¥ä½œæ˜¯ç›¸è¾…ç›¸æˆçš„ï¼Œå®ƒä»¬çš„ç»“åˆæ‰ä¼šæœ‰æœ€ä¼˜çš„ç»“æœã€‚ 1.1 ä¼˜åŒ–å¾ªç¯æ•ˆç‡&emsp;&emsp;ä»combine1ä¸­æˆ‘ä»¬ä¸éš¾è§‚å¯Ÿåˆ°ï¼Œå¯¹æ•´ä¸ªcombineå‡½æ•°å½±å“æœ€å¤§çš„æ˜¯ for å¾ªç¯ã€‚å› ä¸ºå®ƒæ˜¯å‡½æ•°çš„åŠŸèƒ½ä¸»é¢˜ã€‚é€šè¿‡è§‚æµ‹å¯ä»¥å¾—åˆ°ä¹¦æœ¬ä¸Šçš„å€¼ï¼š Function Page Method + (int) * (int) +(float) * (float) combine1 507 -Og 22.68 20.02 19.98 20.18 combine1 507 -O1 10.12 10.12 10.17 11.14 ä¹Ÿå°±æ˜¯è¯´ï¼Œcombine1åœ¨å¼€å¯O1çš„æ—¶å€™ï¼ŒCPEæ˜¯10.12åˆ°11.17ä¹‹é—´ã€‚ä½†å¦‚æœæ”¹å˜äº†å¾ªç¯çš„æ–¹å¼ï¼Œå°±å¯ä»¥å¾—åˆ°æ›´å¥½çš„ç»“æœã€‚ 123456789101112131415161718192021/* * Retrieve vector element and store at dest. * Return 0 (out of bounds) or 1 (successful) */int get_vec_element(vec_ptr v, long index, data_t *dest) { if (index &lt; 0 || index &gt;= v-&gt;len) return 0; *dest = v-&gt;data[index]; return 1;}/* Move call to vec_length out of loop */void combine2(vec_ptr v, data_t *dest) { int i; int length = vec_length(v); for(i = 0; i &lt; length; i++){ data_t val; get_vec_element(v, i, &amp;val); *dest = *dest OP val; }} åœ¨è¿™ç§ç­–ç•¥ä¸‹ï¼Œè¿™ä¸ªå‡½æ•°çš„CPEå¯ä»¥å¾—åˆ°ä¸€å®šçš„æå‡ã€‚ Function Page Method + (int) * (int) +(float) * (float) combine1 507 -O1 10.12 10.12 10.17 11.14 combine2 509 Move vec_length 7.02 9.03 9.02 11.03 è¿™é‡Œçš„å‡½æ•°å’Œcombine1()æ˜æ˜¾ä¸åŒçš„æ˜¯ï¼Œæ¯æ¬¡å¾ªç¯è°ƒç”¨çš„vec_length()ç§»åˆ°äº†å¤–éƒ¨ã€‚è¿™æ˜¯ä¸€ç§ä»£ç ç§»åŠ¨(code motion)å·¥ä½œï¼Œæ„å›¾å°†å¾ªç¯æ— å…³å˜é‡vec_length(v)åœ¨å¤–éƒ¨è¿›è¡Œåˆå§‹åŒ–ä»¥è¾¾åˆ°ä¼˜åŒ–æ•ˆæœï¼Œå› è€Œåˆç§°ä¸ºloop invariant code motionã€‚ Loop-invariant code which has been hoisted out of a loop is executed less often, providing a speedup. We can therefore move the computation to an earlier section of the code that does not get evaluated as often. wikipedia: Loop-invariant code motion åœ¨è¿™é‡Œæ„Ÿè°¢å°ç¥å¸ˆå…„çš„æŒ‡æ­£ã€‚æ­¤å¤„å› ä¸ºä»£ç ç§»åŠ¨è€Œéä»£ç ä¿®é¥°ï¼Œä¿®é¥°å¯ä»¥å‚é˜…ECMAScript 6çš„ã€ä¿®é¥°å™¨ã€‘éƒ¨åˆ† &emsp;&emsp;è¿™ç§ç¼–è¯‘å™¨å› ä¸ºå¯èƒ½çš„å‰¯ä½œç”¨é—®é¢˜ä¸ä¼šè€Œä¸ä¼šåšçš„ä¼˜åŒ–éœ€è¦æˆ‘ä»¬è‡ªå·±åšã€‚åœ¨æ­¤ï¼Œå°±éœ€è¦è¾¨åˆ«ä¸€äº›å¾ªç¯ä¸­è¢«è®¡ç®—å¤šéä½†å´ä¸ä¼šå˜çš„è¿‡ç¨‹è®¡ç®—ã€‚ç¬¬ä¸€ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¯¹äºæ¯æ¬¡å¾ªç¯ï¼Œéƒ½ä¼šè°ƒç”¨ä¸€æ¬¡vec_length() å‡½æ•°ã€‚ä¿®æ”¹åçš„ä»£ç åªè°ƒç”¨äº†ä¸€æ¬¡ vec_length ã€‚è¿™æ ·ï¼Œå¾ªç¯å°±å‡å°‘äº†å‡½æ•°è°ƒç”¨ï¼Œå»é™¤äº†é‡å¤çš„é•¿åº¦è®¡ç®—ï¼Œé™ä½äº†è€—æ—¶ã€‚ è¿™ç§æ’é™¤å¾ªç¯æ— å…³å˜é‡é‡å¤è¿­ä»£çš„æ–¹æ³•æœ‰æ—¶å€™æ•ˆæœæ˜¯æ˜¾è‘—çš„ã€‚ç”šè‡³æç«¯æƒ…å†µä¸‹å¯ä»¥é¿å…æ½œåœ¨çš„æ¸è¿‘æ—¶é—´å¤æ‚åº¦æå‡ã€‚ä¸€ä¸ªæç«¯çš„ä¾‹å­ï¼šstring.h ä¸­æœ‰å«strlen()çš„å‡½æ•°ï¼Œå®ƒé€šè¿‡éå†æ¯ä¸€ä¸ªå­—ç¬¦æ¥è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚å¦‚æœæˆ‘æŠŠå‡½æ•°è°ƒç”¨æ”¾åœ¨å¾ªç¯é‡Œï¼š12345const char str[]=\"VeryGG!!!\";for(int i = 0; i &lt; strlen(str); i++) { // statement // O(n)} &emsp;&emsp;è™½ç„¶çœ‹ä¸Šå»æ²¡æ¯›ç—…ï¼Œä½†å…¶å®è¿™é‡Œå°±å·²ç»æœ‰ä¸ªæ½œåœ¨çš„ $O(n^2)$ ã€‚å› ä¸ºstrlen()çš„æœºåˆ¶ï¼Œæ¯æ¬¡å¾ªç¯éƒ½è¦éå†æ•´ä¸ªå­—ç¬¦ä¸²ï¼ŒåŠ ä¸ŠåŸå§‹çš„ $O(n)$ ï¼Œé‚£å°±æˆäº†ä¸€ä¸ªæŒ‡æ•°æ¸è¿›çš„å¾ªç¯ã€‚è€Œè¿™ç§ä½æ•ˆå¯¹ç¨‹åºæ•ˆç‡çš„å½±å“æ˜¯è‡´å‘½çš„ï¼Œå®ƒä¼šä¸¥é‡æ‹‰ä½ç¨‹åºçš„æ•ˆç‡ã€‚ &emsp;&emsp;ä¸¤ç§å¾ªç¯çš„æ•ˆç‡å¤§æ¦‚å¦‚ä¸‹å›¾ï¼š &emsp;&emsp;ä¸ºä½•è¿™æ ·æ¸ºå°çš„ä¿®æ”¹å¯ä»¥å¾—åˆ°æ•ˆç‡çš„æé«˜å‘¢ï¼Ÿè¿™å°±éœ€è¦ç†è§£ç¼–è¯‘å™¨çš„å·¥ä½œã€‚ç¼–è¯‘å™¨åœ¨ç¼–è¯‘ç¬¬ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå¯¹äºæ¯æ¬¡å¾ªç¯ï¼Œéƒ½ä¼šè°ƒç”¨ä¸€æ¬¡ vec_length() å‡½æ•°ã€‚ä¿®æ”¹åçš„ä»£ç åªè°ƒç”¨äº†ä¸€æ¬¡ vec_length å‡½æ•°ã€‚è¿™æ ·ï¼Œå¾ªç¯å°±å‡å°‘äº†å‡½æ•°è°ƒç”¨ï¼Œé™ä½äº†è€—æ—¶ã€‚&emsp;&emsp;è¿™ç§åšæ³•ç¡®å®åŠ å¿«äº†è¿è¡Œé€Ÿåº¦ã€‚ç„¶è€Œï¼Œè¿™ç§ä»£ç ç§»åŠ¨å¹¶éç¼–è¯‘å™¨éƒ½ä¼šä¸ºå¼€å‘è€…å®Œæˆã€‚å› ä¸ºä¿®æ”¹å‰åå¯èƒ½é¢ä¸´ç€ç»“æœä¸åŒçš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯å‰¯ä½œç”¨(site effact)é—®é¢˜ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°åœ¨ä¼˜åŒ–å‰å’Œä¼˜åŒ–åå¯¹äºé¢„æ–™ï¼Œæˆ–è€…è¯´ä»»ä½•ç»“æœéƒ½æ˜¯æ²¡æœ‰å·®å¼‚çš„ï¼Œé‚£ä¼˜åŒ–å°±æ˜¯æœ‰æ•ˆçš„ã€‚ä½†é¢å¯¹è¿™ç§åšæ³•çš„æ—¶å€™ï¼Œé‡åˆ°æŒ‡é’ˆåˆ«åé—®é¢˜(Pointer Aliasing)ç­‰é—®é¢˜æ—¶ï¼Œç»“æœæ˜¯ä¼šå‡ºç°å·®å¼‚çš„ã€‚å°½ç®¡ç¼–è¯‘å™¨è¯•å›¾é‡‡ç”¨ä»£ç ç§»åŠ¨ï¼Œä½†å±€é™æ€§å¯¼è‡´å…¶é‡‡å–äº†ä¿å®ˆçš„ç­–ç•¥ã€‚åœ¨ä¼˜åŒ–å‚æ•°ä¸º-O2çš„ç”šè‡³æ›´é«˜æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±ä¼šæ›´åŠ æ¿€è¿›ç§»åŠ¨ä»£ç ï¼Œä½†è¿™æ ·å°±æé«˜äº†æ½œåœ¨çš„å‰¯ä½œç”¨ä¸Šçš„é£é™©ã€‚ é™ä½è¿‡ç¨‹è°ƒç”¨é™ä½è¿‡ç¨‹è°ƒç”¨çš„æ„å›¾éå¸¸æ˜æ˜¾ã€‚è¿‡ç¨‹è°ƒç”¨ä¸­å› å¸¸å‡ºç°é‡å¤è®¡ç®—æˆ–æ£€ç´¢é—®é¢˜(overhead)è€Œå¯¼è‡´ä½æ•ˆã€‚ä¾‹å¦‚ä¸‹åˆ—è¿‡ç¨‹è°ƒç”¨ï¼š123456789101112131415/* get_vec_start */data_t *get_vec_start(vec_ptr v) { return v-&gt;data;}/* Direct access to vector data */void combine3(vec_ptr v, data_t *dest) { long i; long length = vec_length(v); data_t *data = get_vec_start(v); *dest = IDENT; // identical element for (i = 0; i &lt; length; i++) { *dest = *dest OP data[i]; // OP refer to + or * }} combine3çš„for æ¯”combine2ä¸­çš„é«˜æ•ˆï¼Œå› ä¸ºcombine2ä¸­æ¯æ¬¡æ£€ç´¢æ•°æ®éƒ½è¦å°†å‘é‡éå†ä¸€éï¼ˆæˆåŠŸæˆ–å¤±è´¥éƒ½ç±»ä¼¼ï¼‰ã€‚æ­¤å¤„é€šè¿‡å°†è¯»å–å®¹å™¨å…ƒç´ çš„è¿‡ç¨‹æ”¹å†™ä¸ºç›´æ¥è®¿é—®åœ°å€ï¼Œä»è€Œé™ä½è¿‡ç¨‹è°ƒç”¨ï¼Œæé«˜äº†æ•ˆç‡ã€‚è¿™ç§ç›´æ¥çš„åœ°å€è®¿é—®é™ä½äº†è¿‡ç¨‹è¿è¡Œçš„æˆæœ¬ã€‚ç±»ä¼¼çš„é™ä½è¿‡ç¨‹è°ƒç”¨çš„å·¥ä½œå‡ è¿‘ä¼˜åŒ–ç¨‹åºçš„ç“¶é¢ˆã€‚ 1.3 å‡å°‘å†…å­˜è®¿é—®&emsp;&emsp;å†…å­˜è®¿é—®çš„é€Ÿåº¦æ¯”å¯„å­˜å™¨è®¿é—®æ…¢å¾ˆå¤šï¼Œè¿™æ˜¯â€¦â€¦æ­£å¸¸äººéƒ½çŸ¥é“çš„å¸¸è¯†ã€‚å‡å°‘å†…å­˜è®¿é—®ï¼Œå³åˆ©ç”¨ä¸´æ—¶(å¾ªç¯)å˜é‡æ¥æ›¿ä»£ç›´æ¥çš„æŒ‡é’ˆè¿­ä»£ã€‚å¦‚æœæ¯ä¸€æ¬¡è¿­ä»£éƒ½é€šè¿‡æŒ‡é’ˆè§£å¼•ç”¨æ¥æ›´æ”¹æ‰€æŒ‡çš„æ•°æ®ï¼Œé‚£å³æ„å‘³ç€æ¯æ¬¡éƒ½è¦ä»å†…å­˜è¯»å–å†™å…¥ï¼ˆè¿™åªæ˜¯é€šç”¨çš„ç›´è§‚çš„è¯´æ³•ï¼Œæ›´å¤æ‚çš„æƒ…å†µåº”è¯¥åœ¨å¤„ç†å™¨è§†è§’å‚æ•°ï¼‰ã€‚è¿™æ ·ç›¸å¯¹äºç›´æ¥çš„å˜é‡è¿­ä»£æ•ˆç‡ä¸€å®šæ˜¯ä½ä¸‹çš„ã€‚&emsp;&emsp;æœ‰å‡ ç§å¾ˆå¸¸è§çš„çŠ¶å†µï¼š æŒ‡é’ˆä½œä¸ºè¿­ä»£å˜é‡ æŒ‡é’ˆæœç´¢ä¸ä½ç§» &emsp;&emsp;åœ¨è¿™é‡Œå°±ä¸ä¸¾ä¾‹å­äº†ï¼Œè‡ªå·±æ„ä¼šå“ˆï½ å°ç»“&emsp;&emsp;é€šè¿‡äº†è§£ç¼–è¯‘å™¨çš„èƒ½åŠ›ä¸é™åˆ¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹ç—‡ä¸‹è¯ï¼Œè€Œä¸æ˜¯ç›²ç›®åœ°é™ä½ç¨‹åºçš„å¯è¯»æ€§ä¸æ¨¡å—åŒ–ç¨‹åº¦ï¼Œç»™è‡ªå·±å’Œä»–äººçš„ç†è§£å¸¦æ¥å›°æ‰°ï¼Œç ´åè½¯ä»¶å·¥ç¨‹çš„åŸºæœ¬åŸåˆ™ã€‚åœ¨ç°ä»£è¶³å¤Ÿæ™ºèƒ½çš„ç¼–è¯‘å™¨çš„æƒ…å†µä¸‹ï¼Œè®¤è¯†åˆ°åœ¨è¿™ä¸ªè§†è§’èƒ½å¹²ä»€ä¹ˆæ˜¾å¾—éå¸¸å¿…è¦ã€‚ å¤„ç†å™¨è§†è§’çš„ä¼˜åŒ–&emsp;&emsp;å¤„ç†å™¨è§†è§’ä¼˜åŒ–ï¼Œç›¸å¯¹äºå‰è€…è€Œè¨€ï¼Œæ˜¯åœ¨æœºå™¨å±‚é¢ä¸Šçš„ä¼˜åŒ–ã€‚ä¸åŒçš„æœºå™¨æœ‰ä¸åŒçš„ç‰¹ç‚¹ï¼Œæ‰€ä»¥è¦æ ¹æ®æœºå™¨æ¥å¤„ç†ç»†èŠ‚ã€‚ä½†æ˜¯ï¼Œåœ¨ä¸å¤±ä¸€èˆ¬æ€§çš„æƒ…å†µä¸‹ï¼Œå…·æœ‰ç›¸ä¼¼çš„ç­–ç•¥ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±æ ¹æ®æ ·æœ¬æœºå™¨æ¥åˆ†æã€‚ä¸åŒæœºå™¨å°±è¦æœ‰ç»†èŠ‚ä¸Šçš„ä¿®é¥°ã€‚&emsp;&emsp;ç°ä»£å¤„ç†å™¨å’Œç¬¬å››ç« çš„æµæ°´çº¿æ¨¡å‹ä¹Ÿæœ‰å¾ˆå¤§çš„ä¸åŒã€‚ç°ä»£ä¹±åºå¤„ç†å™¨æ›´å¤æ‚ã€‚ç°ä»£ä¹±åºå¤„ç†å™¨ç®€å•åŒºåˆ†å‘¢ICUï¼ˆInstruction Control Unitï¼‰å’ŒEUï¼ˆExecutive Unitï¼‰ã€‚&emsp;&emsp;æ€»çš„æ¥è¯´ï¼Œç°ä»£CPUæœ‰èƒ½åŠ›è¶…å‰åœ°è·å–å³å°†è¿è¡Œçš„æ•°æ®ä¸æŒ‡ä»¤ï¼Œå¹¶åˆ©ç”¨åˆ†æ”¯é¢„æµ‹ï¼Œè¿›è¡Œæå‰æ¼”ç®—ï¼Œåœ¨åˆ†æ”¯è¯­å¥è¢«æ‰§è¡Œçš„æ—¶å€™å†³å®šæ˜¯å¦è¿è¡Œã€å†™å…¥ã€‚å­˜å‚¨ä¸åŠ è½½åœ¨cacheå­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œä¹Ÿæœ‰èƒ½åŠ›è¶…å‰åœ°fetchæ•°æ®ã€‚åœ¨æ­¤å…¶ä¸­ï¼Œåœ¨æ•°æ®å¤„ç†çš„é€Ÿåº¦æ–¹é¢ï¼Œæœ€ä¸»è¦å…³ç³»çš„å°±æ˜¯EUä¸­çš„åŠŸèƒ½å•å…ƒâ€”â€”å¤„ç†å•ä¸€stateçš„åŸºç¡€æ¨¡å—ã€‚ä¸€ä¸ªCPUä¸­å¯èƒ½æœ‰å¤šä¸ªè¿™æ ·çš„æ¨¡å—ï¼Œè€Œè¿™äº›æ¨¡å—èƒ½å¦æœ€å¤§åŒ–å¹¶è¡Œåœ°è¿ä½œï¼Œè¿ä½œç»“æœæ˜¯å¦æœ‰æ•ˆï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå†³å®šäº†ç¨‹åºèƒ½å¦é«˜æ•ˆè¿è¡Œã€‚è€Œæ•°æ®èƒ½å¦åœ¨å¤„ç†å™¨å±‚é¢å¹¶è¡Œåœ°è¿ç®—ï¼Œåˆä¸æ•°æ®çš„ä¾èµ–ç¨‹åº¦æœ‰å…³ã€‚æ•°æ®è¶…å‰è¿ç®—æ˜¯å¦ç”Ÿæ•ˆï¼Œåˆä¸åˆ†æ”¯é¢„æµ‹çš„ç»“æœç›¸å…³ã€‚å› æ­¤ï¼Œ å°½é‡åœ¨æ•°æ®ä¸Šé™ä½ä¾èµ–ç¨‹åº¦ï¼Œå®ç°å¹¶è¡Œå¤„ç†çš„æœ€å¤§åŒ–ï¼Œ é™ä½åˆ†æ”¯é¢„æµ‹é”™è¯¯æ¦‚ç‡ï¼Œé¿å…è¯¯åˆ¤çš„æ—¶é—´é«˜æ¶ˆè€—ï¼Œ æˆ‘ä»¬å°±æœ‰æœºä¼šå†™å‡ºé«˜æ•ˆè¿è¡Œçš„ä»£ç ã€‚ &emsp;&emsp;æˆ‘ä»¬åœ¨è¿™ä¸€ç« èŠ‚ä¸Šçš„è®¨è®ºï¼ŒåŸºäº Intel i7 Haswell è¿™ä¸€æ ·æœ¬æœºå™¨ã€‚å®ƒæ‹¥æœ‰8ä¸ªåŠŸèƒ½å•å…ƒï¼ŒåŸºæœ¬æƒ…å†µæ˜¯ï¼š Integer arithmetic, floating-point multiplication, integer and floating-point division, branches Integer arithmetic, floating-point addition, integer multiplication, floating-point multiplication Load, address computation Load, address computation Store Integer arithmetic Integer arithmetic, branches Store address computation åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥å®ç°çš„æ•ˆæœï¼š Operation Latency Issue Capacity (integer) Addition 1 1 4 Multiplication 3 1 1 Division 3-30 3-30 1 (floating point) Addition 3 1 1 Multiplication 5 1 2 Capacity 3-15 3-15 1 &emsp;&emsp;æ ¹æ®è¿™æ ·è¯¦ç»†çš„å®šä¹‰ï¼Œæ’é™¤cacheæ–¹é¢å¯èƒ½çš„å¹²æ‰°ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æ ·æœ¬æœºä¸Šé‡åŒ–è®¡ç®—äº†ã€‚ ä¹¦ä¸­å¯¹äºé™ä½ä¾èµ–ç¨‹åº¦æœ‰å¦‚ä¸‹æ–¹æ³•ï¼š å¾ªç¯è§£å…ƒ(loop unrolling) æé«˜å¹³è¡Œæ€§(enhancing Parallelism) å¯¹äºé™ä½è·³è½¬è¯¯åˆ¤æ¦‚ç‡ï¼Œè§£é‡Šæ¯”è¾ƒç®€ç•¥ï¼Œå³å°½é‡è®©ç¼–è¯‘å™¨ç”ŸæˆCMOVçš„ä»£ç ï¼Œè€Œä¸æ˜¯JMPã€‚ åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬è¦æœ‰ä¸€å®šçš„è¯­è¨€ä¸æ–¹æ³•æ¥åˆ¤æ–­æ•°æ®ï¼ˆæŒ‡ä»¤ï¼‰çš„ä¾èµ–æ€§ï¼Œä»¥åŠæŒ‡ä»¤çš„æ‰§è¡Œæµç¨‹ã€‚å› æ­¤è¿ç”¨äº†æ•°æ®æµç¨‹å›¾(Data-flow graph)è¿™ä¹ˆä¸ªæ–¹æ³•è§£é‡Šã€‚å¦‚ï¼Œå¯¹äºä¹¦ä¸­çš„combine4ï¼Œæ±‡ç¼–çš„ç»“æœä¸ºï¼š1234567combine4: data_t = float, OP = *i in %rdx, data in %rax, limit in %rbp, acc in %xmm0.L488: mulss (%rax, %rdx, 4), %xmm0 # Multiply acc by data[i] addq $1, %rdx # Increment i cmpq %rd, %rbp # Compare limit:i jg .L488 # If &gt;, goto loop å¾—åˆ°çš„data-flow graphä¸ºï¼š![å±å¹•å¿«ç…§ 2017-11-03 ä¸‹åˆ10.12.35.png][5]ç»è¿‡é‡æ–°ç¼–æ’ï¼Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥æ™“æ•°æ®ä¹‹é—´çš„ä¾èµ–æ€§ã€‚![20171103.png][6]æ‰€ä»¥åœ¨è¿™ä¸ªå‡½æ•°é‡Œå¤´ï¼Œload-&gt;mulæ˜¯ä¸€æ¡ä¸»è¦æ—¶é—´çº¿ï¼Œè¿™ä¸€æ¬¡è¿­ä»£çš„ä¸»è¦å½±å“å°±è·Ÿä¹˜æ³•ç›¸å…³ã€‚ åœ¨è¿™æ ·çš„è¯­è¨€è¡¨ç¤ºä¸‹ï¼Œæˆ‘ä»¬å°±æœ‰åŠæ³•è§£é‡Šä¸ºä»€ä¹ˆå¾ªç¯è§£å…ƒä¸å¹³è¡Œå¢å¼ºå¯¹ç¨‹åºèµ·ä¼˜åŒ–ä½œç”¨äº†ã€‚ å¾ªç¯è§£å…ƒ(loop unrolling)&emsp;&emsp;loop unrollingçš„æ€è·¯æ˜¯ï¼Œé€šè¿‡åœ¨è®¡ç®—ä¸Šçš„åˆ†æ­¥è¿è¡Œå¹¶æœ€ç»ˆåˆå¹¶ç»“æœï¼Œå®ç°æé«˜ä¸€æ¬¡å¾ªç¯ä¸­CPEçš„æ•ˆæœã€‚ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯å°†ä¸€æ¬¡å¾ªç¯æ‰€èƒ½åšçš„å…ƒç´ ä¿®æ”¹æé«˜ã€‚å…¶å®åœ¨è¿™ä¸ªæ–¹æ³•ä¸Šä¸å¢å¼ºå¹³è¡Œæ€§æ˜¯ç›¸è¾…ç›¸æˆçš„ï¼Œå› ä¸ºåˆ†å¼€è¿›è¡Œè¿ç®—æ„å‘³ç€æ›´å……åˆ†åœ°ä½¿ç”¨äº†æœ‰æ•ˆçš„function unitã€‚ ä¸¾ä¸ªğŸŒ°ï¼š1234567int combine(int arr[10]) { int i, acc = 0; for(i = 0; i &lt; 10; i++) { acc += arr[i]; } return acc;} è¿™ç§æƒ…å†µä¸‹ï¼Œæ•ˆç‡æ˜¯1xçº¿æ€§çš„ï¼Œå› ä¸ºæ¯æ¬¡å¤„ç†ä¸€ä¸ªå…ƒç´ ã€‚ç¨åŠ ä¿®é¥°ï¼Œå°±å¯ä»¥å˜å¾—çº¦ä¸º2å€ã€‚123456789101112int combine(int arr[n]) { int it = n / 2 * 2; int i, acc = 0, acc1 = 0; for(i = 0; i &lt; it; i+=2) { acc += arr[i]; acc1 += arr[i+1]; } for(;i &lt; n; i++) { acc += arr[i]; } return acc + acc1;} &emsp;&emsp;è¿™æ ·çš„ä»£ç ä¿®é¥°ï¼Œå®ç°äº†ä¸€æ¬¡è¿­ä»£ä¸­å¹¶è¡Œåœ°å¤„ç†2ä¸ªæ•°æ®ã€‚å› ä¸ºaccä¸acc1æ²¡æœ‰è€¦åˆï¼Œå¤„ç†å™¨å¯ä»¥å¹¶è¡Œåœ°è¿›è¡Œè®¡ç®—ã€‚å¦‚æ­¤ä¿®æ”¹ï¼Œæé«˜äº†å¤„ç†å•å…ƒä¸Šçš„å¹¶è¡Œæ€§ï¼Œå› ä¸ºæ ·æœ¬æœºå™¨ä¸€æ¬¡å¯å¤„ç†çš„4ä¸ªåŠ æ³•ï¼Œå¤§äºç›®å‰çš„æ‰€éœ€å¹¶è¡Œè®¡ç®—æ•°ç›®ï¼Œé€Ÿåº¦çº¦ä¸ºåŸæ¥çš„2xã€‚ç„¶è¿™ç§k-degreeå¹¶éè¶Šå¤§è¶Šå¥½ï¼Œå› ä¸ºunrollingåå¦‚æœdegreeå¤ªé«˜ï¼Œä¼šäº§ç”ŸåŠ è½½ã€è®¡ç®—ä¸Šçš„ç­‰å¾…ï¼Œé€ æˆdebuffã€‚ ä¾èµ–è§£ç»‘&emsp;&emsp;ä¾èµ–è§£ç»‘çš„æ„æ€æ˜¯ï¼Œå¯ä»¥åˆ†å¼€ç®—çš„æ•°æ®ï¼Œå°±ä¸è¦ä½¿å…¶å‡ºç°ä¾èµ–å…³ç³»ã€‚å› ä¸ºä¸€æ—¦æ²¡æœ‰ä¾èµ–ï¼Œå¯ä»¥å¹¶è¡Œåœ°è®¡ç®—ã€‚for exampleï¼Œ 12345678int calcu(int arr1[n], int x) { int tmp = 1; int acc = arr1[0]; for(int i = 1; i &lt; n; i++) { tmp *= x; acc += arr[i] * tmp; } return acc; &emsp;&emsp;è¿™æ˜¯ç»å…¸çš„è¾“å…¥ä¸€ä¸ªå¤šé¡¹å¼ä»¥åŠxï¼Œè¾“å‡ºè¿ç®—ç»“æœçš„å‡½æ•°ã€‚å®ƒæ²¡æœ‰ç»è¿‡è§£å…ƒçš„æ“ä½œï¼Œä»¥ä¾¿æˆ‘ä»¬çš„è®²è§£ã€‚å› æ­¤ï¼Œå®ƒçš„æ•ˆç‡æ˜¯è¾ƒä¸ºä¸€èˆ¬çš„ã€‚ç„¶è€Œï¼Œå¦ä¸€ç§ï¼Œä¾æ®ç§¦ä¹éŸ¶ç®—æ³•: $$a_0 + x(a_1 + x(a_2+â€¦+ x(a_{n-1} + xa_n)â€¦))$$å³ï¼š123456789int calcu1(int arr1[n], int x) { int i; // int tmp = x; int acc = arr1[n]; for ( i = n - 1; i &gt;= 0; i--) { acc = arr1[i] + x * acc; } return acc;} è¿™ç§å†™æ³•æ˜¯åŠå…¶ä½æ•ˆçš„ï¼ç°ä»£å¤„ç†å™¨åœ¨cacheçš„å¸®åŠ©ä¸‹ï¼Œå¯ä»¥åœ¨ä¸Šä¸€æ¬¡å¾ªç¯çš„æ—¶å€™å°±åŠ è½½ä¸‹ä¸€æ¬¡å¾ªç¯ä¸­æ‰€éœ€è¦çš„æ•°æ®ï¼›è€Œä¿®æ”¹åçš„ä»£ç æ¯ä¸€æ¬¡çš„è¿ç®—éƒ½åŸºäºä¸Šä¸€æ¬¡çš„ç»“æœï¼Œäº§ç”Ÿäº†ä¸€ä¸ªload-use dependency; è€Œå‰ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œtmp å’Œ acc æ˜¯ç‹¬ç«‹å¼€æ¥çš„ï¼Œä»–ä»¬çš„è¿ç®—æ˜¯å¹¶è¡Œçš„ï¼Œè€Œä¸”æ¯æ¬¡ç®—å¥½åªè¦åŠ è½½è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯å³å¯ç«‹å³ä½¿ç”¨ã€‚ã€‚è¿™æ ·ï¼Œå°±ä¼šæŠŠloadçš„æ—¶é—´æ’åœ¨äº†useçš„å‰é¢ï¼Œè€Œä¸æ˜¯ç‹¬ç«‹å¼€æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼š123456789101112131415161718192021222324252627282930313233æ”¹å˜ä¹‹å‰ï¼š(è¿è¡Œæ—¶é—´ï¼‰+-----+ +----+| cal | | ld || | | || | | || | +----+| | +----+| | | ld |+-----+ | |+-----+ | || cal | +----+| | | || | | || |+-----+æ”¹å˜ä¹‹åï¼š(è¿è¡Œæ—¶é—´ï¼‰+-----+| cal || || || || || |+-----++-----+| || ld || |+-----+ 1234567891011121314151617 || arr[n] x || || | |+-----+ +--------+ +-----+| acc | | arr[n] | | x || | | (load) | | |+-----+ +--------+ +-----+ || ||________| | || |___________| || || | | ||_____(calcu)___|| | | |_________________| | | || | | || | |+-----+ +--------+ +-----+| acc | | arr[n] | | x || | | (load) | | |+-----+ +--------+ +-----+ load-useç‹¬ç«‹å¼€æ¥ï¼Œæ—¶é—´å°±å–å†³äºuseï¼Œè€Œä¸æ˜¯ load + useã€‚è¿™å°±æ˜¯é«˜æ•ˆä¹‹å¤„ã€‚ç”±æ­¤å¯çŸ¥ï¼Œä¸Šè¿°ä¸¤ç§æ–¹æ³•ç›¸äº’ä¾èµ–ã€‚ç»“åˆä½¿ç”¨ï¼Œæ‰èƒ½æœ‰æ•ˆåœ°è¿›è¡Œç³»æ•°çº§åˆ«çš„ä¼˜åŒ–ã€‚ å‡å°‘è·³è½¬&emsp;&emsp;å‡å°‘è·³è½¬çš„å…³é”®åœ¨äºï¼Œä½¿å¾—ä»£ç å°½é‡ä½¿ç”¨CMOV, è€Œä¸æ˜¯JMPã€‚å› ä¸ºJMPæ¶‰åŠäº†PCæ›´æ”¹ä»¥åŠé¢„è¿ç®—æ¸…ç©ºé—®é¢˜ï¼Œäº§ç”Ÿäº†æ—¶å»¶ï¼ˆå‚è€ƒç¬¬4ç« ä¸­PIPEçš„å®ç°ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ç”¨ä¸‰ç›®è¿ç®—ç¬¦å¤„ç†çš„ï¼Œä¸ç”¨if...elseï¼›å°½é‡ç”¨inlineç­‰ã€‚ç°ä»£å¤„ç†å™¨å·²ç»å¯ä»¥90%åšå‡ºå‡†ç¡®åˆ¤æ–­ï¼Œä¾‹å¦‚å¾ªç¯çš„å®ç°ï¼Œä¸å¿…äº§ç”Ÿä»»ä½•è·³è½¬ã€‚åªæœ‰åœ¨å¾ªç¯ç»“æŸã€æ¡ä»¶å‡½æ•°è°ƒç”¨çš„æ—¶å€™ï¼Œæ‰å¯èƒ½äº§ç”Ÿè·³è½¬ã€‚å› æ­¤ï¼Œè¿™æ–¹é¢æˆ‘ä»¬èƒ½åšçš„æ¯”è¾ƒå°‘ã€‚ ä¼˜åŒ–çš„é™åˆ¶å› ç´ å¯„å­˜å™¨ä¸ªæ•°é™åˆ¶&emsp;&emsp;å¯„å­˜å™¨çš„ä¸ªæ•°å†³å®šäº†ä¸€æ¬¡å¯ä»¥loadçš„æ•°é‡ã€‚ä¸€æ—¦ loop unrolling è¿‡åº¦ï¼Œè¶…è¿‡äº†å¯„å­˜å™¨å¯ä»¥æ‰¿è½½çš„æ•°é‡ï¼Œå°±ä¼šäº§ç”Ÿpenaltiesã€‚è¿™ä¸ªæ¯”è¾ƒå¥½ç†è§£ã€‚ è·³è½¬é—®é¢˜&emsp;&emsp;è·³è½¬é—®é¢˜é€šå¸¸æ— æ³•è§£å†³ï¼Œå› ä¸ºå–å†³äºå¤„ç†å™¨çš„ç®—æ³•é—®é¢˜ã€‚ä½†æˆ‘ä»¬å¯ä»¥å°½é‡ä½¿å¾—å…¶äº§ç”ŸCMOVçš„ä»£ç ï¼Œå¤„ç†å™¨ä¼šåˆ†åˆ«è®¡ç®—ç„¶ååŠ è½½æ‰€éœ€è¦çš„æ•°å€¼ã€‚è¿™æ ·å°±å…é™¤äº†è·³è½¬ä¸­äº§ç”Ÿçš„æ—¶å»¶ã€‚ æœªç«Ÿä¹‹å¤„ä¹¦æœ¬å¯¹ä¼˜åŒ–çš„é˜è¿°ä¾ç„¶ç•™ä¸‹äº†ä¸€äº›é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å‡è®¾å¤„ç†å™¨æ˜¯å•æ ¸çš„ï¼Œè€Œç°ä»£å¤„ç†å™¨ä¸€èˆ¬éƒ½æœ‰å¤šæ ¸è¿è¡Œï¼›åŒæ—¶ï¼Œä¹Ÿæ²¡æœ‰è€ƒè™‘å¤šçº¿ç¨‹ã€å¤šè¿›ç¨‹é—®é¢˜ã€‚ç„¶åœ¨æˆ‘ä»¬é˜è¿°çš„æ¨¡å‹åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é¢„æµ‹å¯ä»¥åšåˆ°çš„æ›´å¤šçš„æ“ä½œã€‚ æ€»ç»“&emsp;&emsp;CS:APP ç¬¬5ç« æ ¹æ®ç¼–è¯‘å™¨å’Œå¤„ç†å™¨çš„ç‰¹æ€§ï¼Œæè¿°äº†ä¸€ä¸ªå®Œæ•´çš„ç¨‹åºä¼˜åŒ–è“å›¾ã€‚ç°ä»£çš„ç¼–è¯‘å™¨å·²ç»è¶³å¤Ÿæ™ºèƒ½ï¼Œå–„äºå°½å¯èƒ½åœ°äº§ç”Ÿæœ€ä¼˜çš„ä»£ç ï¼›ç°ä»£å¤„ç†å™¨ä¹ŸåŒæ ·å¦‚æ­¤ï¼Œä¼šå°½é‡åœ°è·‘æ»¡æ‰€æœ‰çš„åŠŸèƒ½å•å…ƒã€‚è€Œæˆ‘ä»¬éœ€è¦åšçš„ï¼Œå°±æ˜¯å®Œæˆç¼–è¯‘å™¨ã€å¤„ç†å™¨æ— æ³•å®Œæˆçš„å·¥ä½œï¼Œè§£å†³æ•°æ®æœå¯»ä¸­çš„ä½æ•ˆé—®é¢˜ï¼Œè§£ç»‘æ•°æ®ä¾èµ–ï¼Œä»è€Œè®©æœºå™¨èƒ½å¤Ÿåœ¨æ•°æ®å®‰å…¨çš„æƒ…å†µä¸‹ï¼Œåœ¨ function unit å±‚é¢ä¸Šå¹¶è¡Œåœ°è®¡ç®—ã€‚å¦‚æ­¤é’ˆå¯¹æ€§åœ°è¿›è¡Œä¼˜åŒ–ï¼Œè€Œä¸æ˜¯åšç±»ä¼¼äº i / 2 æ”¹æˆ i &gt;&gt; 2 ï¼Œä»¥åŠå°†å‡½æ•°èåˆåˆ°ä¸€èµ·ä¹‹ç±»çš„çš„åŠ¨ä½œï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å°½é‡ä¸é™ä½ç¨‹åºæ¨¡å—ä¸å¯è¯»æ€§ä¸Šï¼ŒçœŸæ­£è¾¾åˆ°ä¼˜åŒ–çš„ç›®çš„ï¼Œè€Œä¸æ˜¯æ—¢æ²¡æœ‰æé«˜æ•ˆç‡ï¼Œåˆä½¿å¾—ä»£ç ä¸å¿…è¦åœ°ä¸‘é™‹ã€‚","link":"/2017/09/27/opt-program-perf/"},{"title":"CS: APP chapter 3 notes: (variable) stack frame","text":"IntroductionChapter III of CS: APP mainly describes x86_64 assembly in details, which gives a dictionary-like introduction. Nevertheless, the reason why performming this chapter is to give a vivid adhere of chapter V. In this post, I just elaborate a small part introduced by a few of section, that is the runtime stack.Refers to section 3.7~3.10, Stack frame is a major part in procedure calling and manipulation. It stores variables, procedure return address, and any thing may be pushed in according to complierâ€™s flavor. Big picture Stack frame is a memory structure holds procedure. The main function of it is similar to the figure delivered above: control transfer, data transfer, local variables storage. Notes: Regarding the array and struct or union, however, they are just stored in memory, without being specified whether should be stored in stack or heap file. Every function refers to a particular interval of stack. As figured in the picture above, stack stores arguments for the calling of next procedure, caller preserve variable in register and memory and return address of the caller, which note as the PC back point. When we combine control and data together, it will be more complex than before. That is what we refer as variable stack frame, and another miscellaneous. Control transferControl transfer of procedure refers to the function calling. Suppose that function P() wonna call function Q(), once you embody this process, the program should pass some arguments, transfer the PC of %rip to the function Q(), then it go through the instructions in Q(), at last go back to the origin address of %rip when meet ret, which means that return the funtion P(). In x86_64 instruction set, there are three control instructions: Instruction Description call Label Procedure call call *Operand ;; ret Return from call The call instruction has a target indicating the address of the instruction where the called procedure starts. Its operand, which is the address, could be direct or indirect. Go back to figure 3.3 could get more details. Suppose we have details of function below: 1234567891011121314151617181920212223Q: 0x400540 addq %rdi, %rdi 0x400543 movq %rdi, %rax 0x400546 ret P: 0x400560 movq $-1, %rdi 0x400563 call Q 0x400568 ret-------Origin status before call-------%rsp: 0x7fffffffe888 --&gt; 0x0%rip: 0x400560----------------------------------------------After execute call--------------%rsp: 0x7fffffffe880 --&gt; 0x400568(The address of the next ins of call)%rip: 0x400540 (The atart of Q)---------------------------------------------------After ret------------------%rsp: 0x7fffffffe888 --&gt; 0x0%rip: 0x400568 (last ins of P)--------------------------------------- In this simple case, once P call Q, P push its next instruction address as its return address to the stack, then %rip gets start address of Q. When meeting ret, %rip get that address from stack then add address of %rsp according to the size of the cell. It is easy, right? Data transferWhen passing control to another procedure, we usually pass arguments to the callee one, so as to evaluate the data then get target result. As is mentioned before, we refer %rdi as the 1st argument, %rsi the second, and so on. It is a convention of how x86-64 pass arguments. Marked in details, as below: Argument sequence Registers notes 1st %rdi few bits portable 2nd %rsi could be accept 3rd %rdx 4th %rcx 5th %r8 6th %r9 more than 6 STORE IN STACK The point here is, also combine the control transmission, the caller should push itâ€™s variable stored in callee saved registers, set the argument registers into target arguments, after preparing for the function call, the PC go to the target procedure. As an example: 123456789101112131415161718192021222324252627282930proc: pushq %rbp movq %rsp, %rbp # %rbp is a caller saved register add %edi, %esi # add %rdi to %rsi add %rsi, %rdx # --- add %rdx, %rcx # --- sub %rcx, %r8 # --- movq %r8, %rax # --- popq %rbp ret # return call_proc: sub $16, %rsp movq %edi, 8(%rsp) xorq %edi, %edi add $0x8, %edi movq $0x10, %esi movq %0x43(%rsp), %rdx movq $0x125 %rcx call proc movq (%rsp), %edi addq %edi, %rax ret # -------- stack result ---------# | | orig %edi | 8# | (unused) | 0# | return address | -# | orig rbp: 0x0 | callee - 8# ------------------------------- Notes: the unused space is prepare for SIMD usage. On this stage, we can ignore it. The caller saved register %rbp is pushed and set it as origin stack start position. Local variable storageThere many example that variable are stored in registers, but at times that local variable should be load in memory. The common cases is: There are not enough registers to hold all of the local data The address operator â€˜&amp;â€™ is applied to local variable, and hense we must be able to generate an address for it Some of the local variables are arrays or structures so that it should be accessed as array or structure references. As for example code, please refer Figure 3.32 In convention, the former variable should be pushed in the higher address of stack and the later ones could be set in the lower ones. Such as: 1234|_____________________||___x2____|____x1_____| 16|_________x3__________| 8|_______________|__x4_| 0 AlignmentMany computer systems place restrictions on the allowable addresses for primitive data types, requiring that the address for some objects must be a multiple of some value K. Such restrictions simplify the design of hardware forming the interface between the processor and the memory system. Also, address of stack frame do the same thing, so as to be refered in a correct way. As an example of Practice Problem 3.49, 123456789101112131415+------------------------++ return address + 8+------------------------++ saved %rbp + 0+------------------------++ (Unused) + -8+------------------------++ + e1+------------------------++ ++ P + 8n bytes+ ++------------------------++ + e2+------------------------+ Every part of the stack frame should be a multiple of 8, so that e1+P+e2 should be a multiple of 16, hense we could embed a slot of memory which address is a multiple of 8. Variable-Size Stack FramesThe variable-size stack frames means that the size of stack frame could not be determined at compile time. Further more, the variable, maybe array of struct, should be referenced by its address. Therefore, we should use a technique of managing such condition. As Figure 3.43 : 12345678long vframe(long n, long idx, long *q) { long i; long *p[n]; p[0] = &amp;i; for (i = 1; i &lt; n; i++) p[i] = q; return *p[idx];} Portions of generated assembly code: 1234567891011121314151617181920212223242526vframe: pushq %rbp # Set old %rbp movq %rsp, %rbp # Set frame pointer subq $16, %rsp # Allocate space for array p leaq 22(, %rdi, 8), %rax # Make it to be a multiple of 16 andq $-16, %rax subq %rax, %rsp # Allocate space for array p leaq 7(%rsp), %rax shrq $3, %rax leaq 0(, %rax, 8), %r8 movq %r8, %rcx # ..... .L3: movq %rdx, (%rcx, %rax, 8) # Set p[i] to q addq $1, %rax # Increment i movq %rax, -8(%rbp) # Store on the stack.L2: movq -8(%rbp), %rax # Retrieve i cmpq %rdi, %rax jl .L3 # ..... leave ret Note the way to refer the array is that, it refer it by pointer register %rbpAt last of the program, it restore the original pointer to the %rsp, then pop %rbp to restore the callerâ€™s frame. 12movq %rbp, %rsp # Set stack pointer to beginning of framepopq %rbp # Restore This instruction combination has the effect of deallocating the entire stack frame.","link":"/2017/09/05/stack-frame/"},{"title":"è®¡ç½‘-é™æ€è·¯ç”±å®éªŒè§£æ","text":"ç½‘ç»œæ¶æ„æ‹“æ‰‘ç»“æ„ æ ¹æ®å®éªŒæ‰‹å†Œçš„è§„å®šï¼Œæ‹“æ‰‘ç»“æ„å¦‚ä¸Šå›¾ï¼š æ•´ä¸ªæ‹“æ‰‘ç»“æ„è¢«åˆ’åˆ†ä¸º3ä¸ªç½‘æ®µï¼š10ï¼Œ11ï¼Œ12ã€‚å…¶ä¸­10æ®µä¸ºè·¯ç”±å™¨ä¹‹é—´çš„æ®µï¼Œ11æ®µä¸ºRouter1ä¸PCAä¹‹é—´çš„æ®µï¼Œ12æ®µä¸ºRouter2ä¸PCBä¹‹é—´çš„æ®µã€‚è·¯ç”±å™¨ä¸ºå¤šç«¯è®¾å¤‡ï¼Œå› æ­¤æ¯ä¸ªç«¯å£éƒ½æœ‰ä¸€ä¸ªIPåœ°å€ï¼›PCä¸ºå•ç«¯è®¾å¤‡ï¼Œåªæœ‰ä¸€ä¸ªIPåœ°å€ã€‚ æ ¹æ®å®éªŒçš„è®¾ç½®ï¼Œæ•´ä¸ªç»“æ„åŒ…å«ä¸‰ä¸ªç½‘ï¼Œç½‘ç»œåœ°å€åˆ†åˆ«ä¸ºï¼š 10.0.0.0 11.0.0.0 12.0.0.0 ä¸‰ä¸ªåœ°å€å¯¹åº”ä¸‰ä¸ªç½‘çš„åˆ’åˆ†ã€‚ä¸»æœºPCAæƒ³è¦åˆ°è¾¾PCBï¼Œé€”ä¸­å¿…é¡»ç»è¿‡ä¸¤ä¸ªè·¯ç”±å™¨ï¼Œvice versaã€‚ è·¯ç”±å™¨å‘½ä»¤è§£é‡Š 1234567891011121314sys # è¿›å…¥ç³»ç»Ÿè®¾ç½®æ¨¡å¼sysname RT1 # è®¾ç½®ç³»ç»Ÿåå­—ä¸ºRT1int e 0/0 # è¿›å…¥ä»¥å¤ªç½‘0å·ç«¯å£è¿›è¡Œè®¾ç½®ip addr 10.0.0.1 24 # è®¾ç½®è¯¥ç«¯å£(0å·)IPåœ°å€ä¸º10.0.0.1ï¼Œå­ç½‘æ©ç åŒ…å«24ä½(e 0/1 ç±»ä¼¼)display ip routing-table # æ˜¾ç¤ºï¼ŒIPåè®®çš„è®¾ç½®ï¼Œè·¯ç”±è¡¨# è®¾ç½®é™æ€è·¯ç”±ï¼Œä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä¸ºï¼šç›®æ ‡åœ°å€ï¼Œå­ç½‘æ©ç ï¼Œä¸‹ä¸€è·³åœ°å€ip route-static &lt;destinaton&gt; &lt;subnet mask&gt; &lt;nexthop&gt;ip route-static 10.0.0.0 255.255.255.0 10.0.0.2# å»å¾€10.0.0.0ç½‘è·¯ï¼Œå­ç½‘æ©ç ä¸º3ä¸ª255ï¼Œéœ€è¦çš„ä¸‹ä¸€ä¸ªè·¯ç”±ä¸º10.0.0.2undo ... # æ’¤é”€æŸæ¡å‘½ä»¤ è·¯ç”±è¡¨çŠ¶æ€è§£é‡Š 12345Destination/Mask Protocol Pre Cost Nexthop Interface(ç›®æ ‡åœ°å€) åè®® ä¸‹ä¸€è·³ ç½‘ç»œæ¥å£éœ€è¦å‰å»çš„ç›®æ ‡ä¸»æœº è·¯ç”±åè®® è¿™ä¸¤ä¸ªä¸çŸ¥é“ å‰å¾€è¯¥ä¸»æœºï¼Œ å¯¹åº”çš„ç½‘å£ï¼ˆæˆ–è€…å›ç¯ï¼‰ éœ€è¦å‘å“ªä¸ª å›ç¯å°±æ˜¯è‡ªå·± ç«¯å£å‘é€æ•°æ® ä¾‹å¦‚ï¼š 12310.0.0.0/24 Direct 0 0 10.0.0.2 Ethernet0/0å‰å¾€10.0.0.0è¿™ä¸ªç½‘ï¼Œéœ€è¦å‘10.0.0.2å‘é€æ•°æ®ã€‚è¿™ä¸ªè·¯ç”±æ˜¯æ¥å£ç›´æ¥è¿æ¥å¾—æ¥çš„ï¼Œæ‰€ä»¥åè®®ä¸ºDirectï¼ˆç›´æ¥ï¼‰ ![æœªå‘½åæ–‡ä»¶ (3).png][1] å› æ­¤ï¼Œåœ¨è¿™ä¸ªæ‹“æ‰‘å†…ï¼š PCA ping Router1æ˜¯å¯ä»¥pingé€šçš„ï¼Œåœ¨è®¾ç½®äº†PCAçš„IPåœ°å€åï¼›Router1 å¯¹ Router2æ˜¯å¯ä»¥pingé€šçš„ï¼Œå…¶ä»–ç›´è¿è·¯äº¦ç„¶ã€‚å› ä¸ºä»–ä»¬ç›´æ¥è¿èµ·æ¥äº†ã€‚ ç„¶é¹…ï¼ŒPCAæ˜¯ä¸å¯ä»¥pingé€šPCBçš„ï¼ŒRouter2ä¹Ÿä¸å¯ä»¥pingé€šPCAçš„ã€‚R1åŒæ ·pingä¸é€šPCBçš„ã€‚Whyï¼Ÿè¿™é‡Œå°±è¦è§£é‡Šä¸€ä¸‹pingçš„åŸç†å’Œè·¯ç”±çš„åŸç†ã€‚ è·¯ç”± è·¯ç”±ï¼Œrouteï¼Œæ„æ€æ˜¯ï¼Œè·¯å¾„ï¼Œå³ä»æŸç‚¹aåˆ°æŸç‚¹bçš„ä¸€æ¡é“è·¯ã€‚è·¯ç”±åŒ…å«äº†ç›®æ ‡åœ°å€ï¼Œä¸‹ä¸€è·³åœ°å€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥ä¸Šé¢çš„ä¸ºä¾‹å­ï¼Œå»å¾€10.0.0.0è¿™ä¸ªç½‘ï¼Œè·¯ç”±å™¨éœ€è¦å‘å¾€10.0.0.2è¿™ä¸ªåœ°å€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç„¶é¹…ï¼Œåœ¨æ²¡æœ‰è®¾ç½®è·¯ç”±çš„æƒ…å†µä¸‹ï¼ŒPCBæƒ³è¦åˆ°PCAï¼Œå®ƒæŠŠåŒ…å‘ç»™Router2ï¼Œï¼ˆå› ä¸ºåªæœ‰ä¸€ä¸ªå£å¯ä»¥å‘å‡ºå»ï¼‰ï¼Œç„¶é¹…router2ä¸çŸ¥é“è¯¥å‘ç»™è°ï¼Œå®ƒå°±æŠŠåŒ…ä¸¢æ‰äº†ã€‚æ‰€ä»¥è®¾ç½®ä¹‹å‰ï¼ŒPCAå’ŒPCBæ˜¯ä¸äº’è”çš„ã€‚ åœ¨åç»­çš„å®éªŒæ­¥éª¤ä¸­ï¼ŒåŒ…å«äº†è®¾ç½®è·¯ç”±çš„æ“ä½œï¼Œç›®çš„å°±æ˜¯å‘Šè¯‰è·¯ç”±å™¨ï¼Œå‰å¾€11ï¼Œæˆ–è€…12è¿™ä¸¤ä¸ªç½‘æ®µï¼Œéœ€è¦æŠŠåŒ…å‘ç»™è°ã€‚ä¾‹å¦‚ï¼Œåœ¨Router1è®¾ç½®ï¼š 1ip route-static 12.0.0.0 255.255.255.0 10.0.0.2 å°±æ˜¯å‘Šè¯‰è·¯ç”±å™¨ï¼Œè‹¥11æ®µè¦å‰å¾€12æ®µï¼Œéœ€è¦æŠŠæ•°æ®åŒ…å‘ç»™10.0.0.2è¿™ä¸ªå£ã€‚å­ç½‘æ©ç æ˜¯ä¸ºäº†ç¡®è®¤ä¸¤ä¸ªç½‘æ˜¯å¹³è¡Œçš„ï¼Œä¸å±äºè°çš„å­ç½‘ã€‚ è®¾ç½®å®Œè¿™ä¸ªé€‰é¡¹åï¼Œå½“PCAå‘é€åŒ…å‡ºå»ï¼Œå‘é€ç»™è·¯ç”±å™¨æ—¶ï¼Œè·¯ç”±å™¨å°±ä¼šå‘é€ç»™10.0.0.2è¿™ä¸ªå£ã€‚äºæ˜¯Router2å°±ä¼šæŠŠæ•°æ®åŒ…æ ¹æ®ç›®æ ‡åœ°å€ï¼Œå‘å‡ºå»äº†ã€‚äºæ˜¯ä¹PCAå°±å¯ä»¥åˆ°è¾¾PCBã€‚ åœ¨Router2çš„è®¾ç½®æ˜¯ç±»ä¼¼çš„ï¼Œä¸ºäº†è®©12æ®µå¯ä»¥åˆ°è¾¾11æ®µã€‚ ç„¶é¹…ï¼Œåªè®¾ç½®ä¸€è¾¹æ˜¯ä¸å¯ä»¥pingé€šçš„ã€‚Whyï¼Ÿè¿™é‡Œè§£é‡Šä¸€ä¸‹pingçš„åŸç†ã€‚ ping program pingå¸¸ç”¨æ¥æ£€æµ‹è·¯å¾„çš„è¿é€šæƒ…å†µã€‚éœ€è¦åŒå‘å¯è¾¾ï¼Œè¿™æ ·æ‰å¯ä»¥pingé€šã€‚è¿™æ˜¯å› ä¸ºpingåˆ©ç”¨çš„ICMPåè®®ï¼Œpingçš„ä¸»æœºå‘é€è¯·æ±‚ï¼Œè¢«pingçš„ä¸»æœºæ”¶åˆ°è¯·æ±‚åå›å¤ã€‚è‡³äºICMPæ˜¯ä»€ä¹ˆï¼Œè¶…å‡ºäº†æˆ‘ä»¬è¦è®¨è®ºçš„èŒƒå›´ã€‚æˆ‘ä»¬çŸ¥é“è¿™æ˜¯ä¸€ç§IPå±‚åè®®ï¼Œä»¥åŠpingçš„è¿‡ç¨‹éœ€è¦ä¸»æœºå‘ç›®æ ‡å‘é€è¯·æ±‚ï¼Œç›®æ ‡è¿”å›ä¸€ä¸ªä¿¡å·ã€‚ pingçš„å·¥ä½œè¿‡ç¨‹å¦‚ä¸‹ï¼š pingç¨‹åºä»¥ç›®æ ‡IPä¸ºåœ°å€ï¼Œå‘é€ä¸€ä¸ªICMPåŒ…(echo request)ã€‚ICMPé€šè¿‡ä¸€å®šçš„è·¯å¾„ï¼Œåˆ°è¾¾äº†ç›®æ ‡ã€‚ç›®æ ‡æ”¶åˆ°åï¼Œç«‹åˆ»è¿”å›ä¸€ä¸ªä¿¡å·(echo reply)ã€‚pingä¸»æœºæ”¶åˆ°ä¿¡å·åï¼Œå°±ç¡®å®šï¼Œåœ¨ä¸¤å°ä¸»æœºä¹‹é—´ï¼Œå­˜åœ¨ä¸€æ¡é€šè·¯ï¼Œå¯ä»¥ä»ä¸€ç«¯åˆ°è¾¾å¦ä¸€ç«¯ã€‚å¦‚æœè¿™ä¸ªåŒ…åœ¨ä¸­é€”è¢«ä¸¢æ‰äº†ï¼Œä¸ç®¡æ˜¯åœ¨å“ªå„¿ä¸¢çš„ï¼Œæœ€åpingçš„ä¸»æœºéƒ½æ— æ³•æ”¶åˆ°å›å¤ï¼Œè¶…å‡ºäº†ä¸€å®šçš„æ—¶é—´æ— æ³•æ”¶åˆ°å›å¤åï¼Œå‘é€ç«¯ä¾¿è®¤ä¸ºï¼Œç›®æ ‡ä¸å¯è¾¾ã€‚ pingçš„è¿‡ç¨‹å°±æ˜¯å¦‚æ­¤ã€‚è‹¥ä¸å­˜åœ¨ä¸€æ¡è·¯ç”±ï¼Œä½¿å¾—ä¸¤ç«¯åŒå‘å¯è¾¾ï¼Œå“ªæ€•å­˜åœ¨é“¾è·¯ï¼Œä¹Ÿæ˜¯ä¸å¯ä»¥pingé€šçš„ã€‚è¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆè®¾ç½®ä¸€ç«¯pingä¸é€šã€‚å‡è®¾pingçš„æ•°æ®åŒ…ä»Aä¸»æœºå‘å‡ºï¼Œåœ¨Router1çš„æŒ‡å¼•ä¸‹å»åˆ°äº†Router2ï¼Œç„¶åRouter2åˆ†å‘ç»™äº†Bã€‚Bç«‹åˆ»å¯¹Açš„åœ°å€è¿›è¡Œå›å¤ï¼Œç„¶é¹…åˆ°äº†Router2åï¼ŒRouter2ä¸çŸ¥é“å‘ç»™è°ï¼Œå°±æŠŠè¿™ä¸ªåŒ…è§†ä¸ºéæ³•åŒ…(invalid)ï¼Œå¯¹å…¶ä¸¢å¼ƒã€‚å› æ­¤Bçš„å›å¤æ°¸è¿œåˆ°ä¸äº†Aï¼ŒAå°±ä¼šè¶…æ—¶ï¼Œè‡ªç„¶ä¼šä¸é€šäº†ã€‚ è®¾ç½®è¿‡ç¨‹ è®¾ç½®è·¯ç”±å™¨ç«¯å£IPã€ä¸»æœºIPï¼ˆç•¥ï¼‰ æŸ¥çœ‹è·¯ç”±è¡¨ï¼ˆç•¥ï¼‰ ç¬¬åæ­¥ï¼šæ·»åŠ é™æ€è·¯ç”±ã€‚è¿™é‡Œå°±æ˜¯æŠŠè·¯ç”±å™¨æ·»åŠ ä¸€æ¡é™æ€è·¯ç”±ï¼Œç›®æ ‡ç½‘ç»œä¸º12.0.0.0ï¼Œä¸‹ä¸€è·³åœ°å€ä¸º10.0.0.2ã€‚å›åˆ°ä¸Šå›¾ï¼Œå°±æ˜¯Router2çš„en0/0ã€‚å› ä¸ºå¯¹äºè·¯ç”±å™¨1ï¼Œæƒ³è¦åˆ°è¾¾12ç½‘ï¼Œå°±å¿…é¡»ä»10.0.0.2è¿™ä¸ªå£è¿›å»ã€‚ç„¶åå‘ç”Ÿäº†ä»€ä¹ˆï¼Œè·¯ç”±å™¨1å°±ä¸éœ€è¦çŸ¥é“äº†ã€‚è¿™æ ·ï¼Œä¸€åˆ‡ä»11æ®µå‘å‡ºå»çš„ï¼Œä»¥åŠè·¯ç”±å™¨1å‘å‡ºå»çš„ï¼Œéƒ½ä¼šè¢«å‘å¾€10.0.0.2ã€‚ ä»PCA ping Router2çš„10.0.0.2ä»¥åŠping PCB è¿™é‡Œï¼Œç»“è®ºæ˜¯ï¼Œping 10.0.0.2ä¸å¯ä»¥é€šï¼ŒPCBä¹Ÿé€šä¸äº†ã€‚åŸå› æ˜¯ï¼ŒRouter2å’ŒRouter1ç›´æ¥ç›¸è¿ï¼Œå› æ­¤Router1çŸ¥é“å»å¾€10æ®µéœ€è¦å‘ç»™Router1çš„10.0.0.2å£ã€‚å› æ­¤ï¼Œping 10.0.0.2æ—¶ï¼Œæ•°æ®åŒ…ä»Aä¸»æœºè·³åˆ°Router1ï¼ŒRouter1æŸ¥è¡¨ï¼Œå‘ç°ç›®æ ‡æ˜¯router2çš„ä¸€ä¸ªå£ï¼Œè€Œä¸”æ˜¯ç›´è¿çš„ï¼Œå°±å‘å‡ºå»äº†ã€‚router2çš„10.0.0.2æ”¶åˆ°åï¼Œç«‹åˆ»å“åº”ï¼Œç„¶è€Œè·¯ç”±2æ²¡æœ‰ä¸€æ¡é€šå¾€11æ®µçš„è®°å½•ï¼Œå°±æ— æ³•æŠŠåŒ…å›ç»™11ç½‘æ®µï¼Œå› æ­¤è¢«ä¸¢å¼ƒã€‚ping Bä¸»æœºçš„åŸç†ç±»ä¼¼ï¼ŒåŒ…åˆ°è¾¾Router1ï¼ŒRouter1å‘ç»™Router2ï¼ŒRouter2åˆ†å‘ç»™PCBï¼ŒPCBå›å¤ï¼Œä½†Router2ä¸çŸ¥é“å‘ç»™è°ï¼Œä¸¢å¼ƒï¼ŒAä¸»æœºå°±æ°¸è¿œæ”¶ä¸åˆ°å›å¤äº†ã€‚GGï¼ åœ¨Router2æ·»åŠ ä¸€æ¡åˆ°11æ®µçš„è·¯ç”± Router2æ·»åŠ å®Œè¿™æ¡è·¯ç”±ï¼Œè·Ÿä¸Šæ–‡é˜è¿°çš„ç±»ä¼¼ï¼Œå®ƒå°±çŸ¥é“äº†å»å¾€11æ®µæ˜¯è¦å‘ç»™10.0.0.1äº†ã€‚æ‰€ä»¥ï¼Œä»Aä¸»æœºping Bï¼Œæˆ–è€…Router2ï¼Œå½“Bä¸»æœºæˆ–è€…Router2å›å¤çš„æ—¶å€™ï¼Œå›å¤çš„æ•°æ®åŒ…åˆ°äº†Router2ï¼Œå°±è¢«å‘å¾€10.0.0.1ã€‚ç„¶åRouter1æ”¶åˆ°ï¼Œåˆ†å‘ç»™è‡ªå·±æˆ–è€…Aä¸»æœºã€‚æ”¶åˆ°è¯·æ±‚ï¼ŒpingæˆåŠŸã€‚ åˆ é™¤RT1æ·»åŠ çš„è·¯ç”±ï¼Œæ·»åŠ é»˜è®¤è·¯ç”± é»˜è®¤è·¯ç”±çš„æ„æ€æ˜¯ï¼Œå½“è·¯ç”±å™¨æ‰¾ä¸åˆ°ç›®æ ‡ä¸»æœºç›¸åº”çš„ä¸‹ä¸€è·³ï¼Œå°±ä¼šå‘ç»™è¿™ä¸ªåœ°å€ã€‚ä¾‹å¦‚ï¼ŒAå‘å¾€Bï¼Œç»è¿‡è·¯ç”±å™¨1ï¼Œè·¯ç”±å™¨1ä¸çŸ¥é“å‘ç»™è°ï¼Œå°±å‘ç»™é»˜è®¤çš„é‚£ä¸ªå£ã€‚è‡³äºç»“æœï¼Œè·¯ç”±å™¨ä¸ç®¡ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ·»åŠ çš„è·¯ç”±æ˜¯ï¼š 10.0.0.0 0.0.0.0 10.0.0.2 å…¨0ï¼Œä»£è¡¨ä»»æ„IPåœ°å€ï¼Œæ„æ€æ˜¯ï¼Œå½“æ‰¾ä¸åˆ°ä¸€æ¡ç‰¹æ®Šçº¦å®šçš„è·¯ç”±ï¼Œå°±ä½¿ç”¨å®ƒã€‚è€Œç”±äºé»˜è®¤è·¯ç”±çš„è§„å®šï¼Œå‘ç»™äº†10.0.0.2ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰¾ä¸åˆ°è¯¥å‘ç»™è°ï¼Œç»Ÿç»Ÿå‘ç»™è¿™ä¸ªåœ°å€ï¼Œ10.0.0.2ã€‚ è¿™æ ·ï¼Œç¬¬ä¸‰æ¬¡pingæ˜¯å¯ä»¥pingé€šçš„ã€‚Aå‘ç»™äº†Router1ï¼ŒRouter1æ‰¾ä¸åˆ°ç›®æ ‡ï¼Œå‘ç»™äº†10.0.0.2ï¼Œç„¶é¹…10.0.0.2å°±æ˜¯æˆ‘ä»¬è¦çš„ç›®æ ‡ï¼Œæ‰€ä»¥Bå¯ä»¥æ”¶åˆ°ï¼Œä¹Ÿå¯ä»¥å›å¤ã€‚å›å¤çš„æ•°æ®åŒ…ç”±äºå…ˆå‰çš„è®¾ç½®ï¼Œä¹Ÿä¼šå‘å›å»ã€‚äºæ˜¯ï¼ŒpingæˆåŠŸã€‚ ä¸€äº›å…¶ä»–çš„è®¾ç½®ï¼š äº¤æ¢æœºä¸ä¸»æœºã€è·¯ç”±å™¨ä¹‹é—´ç”¨ç›´è¿çº¿ï¼Œè·¯ç”±å™¨ã€ä¸»æœºä¹‹é—´ç”¨äº¤å‰çº¿ã€‚äº¤å‰çº¿å°±æ˜¯ä¸¤å¤´çº¿åºä¸ä¸€æ ·çš„çº¿ï¼Œæ¯”å¦‚æ£•è‰²çš„é‚£æ¡ï¼Œä¸€ä¸ªåœ¨ä¸€è¾¹ï¼Œä¸€ä¸ªåœ¨å¦ä¸€è¾¹ è®¾ç½®äº¤æ¢æœºIPï¼Œä¹Ÿéœ€è¦æ‰‹åŠ¨è®¾ç½®ä¸»æœºIP ä»è¶…çº§ç»ˆç«¯pingï¼Œæ˜¯åˆ©ç”¨è·¯ç”±å™¨pingå‡ºå»ã€‚ä»cmd pingï¼Œæ‰æ˜¯ä»ä¸»æœºpingå‡ºå» äº¤å‰çº¿ä¸å¤Ÿï¼Œå¯ä»¥æŠŠç›´è¿çº¿æ’äº¤æ¢æœºï¼Œäº¤æ¢æœºå†æ¥è·¯ç”±å™¨ï¼Œç„¶åå†ä»è·¯ç”±å™¨è¿äº¤æ¢æœºï¼Œç„¶åè¿è·¯ç”±å™¨ã€‚ï¼ˆå…·ä½“çœ‹æ“ä½œå§ï¼Œè¯´ä¸æ¸…æ¥šäº†â€”â€”ï¼‰","link":"/2018/05/05/static_route_lab/"},{"title":"ç®€æ³¨ - Differential Fault Analysis on AES","text":"Differential Fault Analysis, a.k.a DFA, æ˜¯ä¸€ç§ä¾§ä¿¡é“åˆ†ææ‰‹æ®µã€‚é€šè¿‡å¯¹äºŒè¿›åˆ¶è¿›è¡Œæ³¨å…¥æ•…éšœï¼Œå°†ç»“æœä¸åŸå§‹è¿è¡Œæ—¶åšå·®ï¼Œåœ¨ç‰¹å®šçš„å¹³è¡¡ä¸‹å¯è·å¾—ä¸€è½®çš„è½®å¯†é’¥ã€‚åœ¨æœ€è¿‘çš„ç ”ç©¶ä¸­ï¼Œå¯è¢«ç”¨æ¥åšç™½ç›’ç®—æ³•çš„å¯†ç åˆ†æã€‚ ç®€è¿°æœ¬æ–‡ä¸ºå¦‚ä¸‹å·¥ä½œçš„æ€»ç»“ï¼š https://blog.quarkslab.com/differential-fault-analysis-on-white-box-aes-implementations.html Differential Computation Analysis: Hiding Your White-Box Designs is Not Enough. Joppe W. Bos, Charles Hubain, Wil Michiels and Philippe Teuwen, CHES 2016 Differential Fault Analysis on A.E.S. Pierre Dusart, Gilles Letourneux and Olivier Vivolo, ACNS 2003, pages 293-306 DFAæ”»å‡»è¯•å›¾é€šè¿‡æ³¨å…¥é”™è¯¯-ä¸å¯¹ç…§ç»„æ±‚å·®æ±‚å¾—è½®å¯†é’¥ä¸­çš„å­—èŠ‚ã€‚é’ˆå¯¹ä¸€ä¸ªçŠ¶æ€æ³¨å…¥æ—¶ï¼Œæ¯æ³¨å…¥ä¸€ä¸ªæ•…éšœï¼Œå¯ä»¥æ‰°ä¹±4ä¸ªè½®å¯†é’¥å­—èŠ‚ã€‚é‡å¤æ­¤è¿‡ç¨‹ï¼Œå°±å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„çŠ¶æ€è½®å¯†é’¥ã€‚DFAå¹¶ä¸æ˜¯æœ€è¿‘æ‰å‡ºç°çš„ä¸€ä¸ªæ–°æŠ€æœ¯ï¼Œè€Œé…åˆDeadpoolï¼Œåˆ©ç”¨Tracerè·Ÿè¸ªåŠ å¯†å™¨æ•´ä¸ªè¿è¡Œè¿‡ç¨‹ï¼Œä»ä¸­å¾—åˆ°running trace, ç»è¿‡è®¡ç®—å¯ä»¥é’ˆå¯¹æ€§åœ°å¾—åˆ°æ”»å‡»çš„æŸä¸€ç¯ã€‚è·å¾—ä¸€è½®çš„å¯†é’¥ï¼Œæ˜¯DFAæ”»å‡»çš„ç›®çš„ã€‚ æ‰§è¡Œè¿‡ç¨‹å·®åˆ†æ•…éšœçš„æ”»å‡»æ‰§è¡Œè¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š é€šè¿‡ä¸€å®šçš„å·¥å…·ï¼Œåˆ¤æ–­AESæ¯ä¸€è½®çŠ¶æ€çš„ä½ç½® é’ˆå¯¹ç‰¹å®šè½®çŠ¶æ€ï¼Œä»¥åŠç‰¹å®šæ•…éšœç‚¹ï¼š çŠ¶æ€æ­£å¸¸è¿è¡Œä¸€éï¼Œå¾—åˆ°çŠ¶æ€$O$ æ³¨å…¥ä¸€ä¸ªæ•…éšœï¼Œè¿è¡Œï¼Œå¾—åˆ°$Oâ€™$ åˆ©ç”¨ä¸¤æ¬¡æ‰§è¡Œçš„å·®ï¼Œé’ˆå¯¹æ¯ä¸ªå·®å¯¹è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°candidate faultçš„é›† å¤šæ¬¡æ’å…¥æ•…éšœï¼Œå¾—åˆ°ä¸åŒè§£é›†ï¼Œæ±‚äº¤é›†ã€‚æœ€åå¾—åˆ°å›ºå®šçš„ç»“æœ è¯¦è¿°åœ¨AESï¼ˆAES-128ï¼‰çš„DFAä¸­ï¼Œæœ€ä¸»è¦çš„æ˜¯å¾—åˆ°æœ€åä¸€è½®$K_{10}$çš„å€¼ã€‚å› ä¸ºä¸€è½®å¯ä»¥å€’æ¨å‡ºæ‰€æœ‰è½®ï¼Œè¿™æ ·å°±ç›¸å½“äºå¾—åˆ°äº†å¯†é’¥ã€‚å…¶ä¸»è¦å†…å®¹å°±æ˜¯åœ¨æœ€åä¸¤è½®MixColumnä¹‹é—´æ’å…¥ä¸€ä¸ªé”™è¯¯ï¼Œè§‚å¯Ÿé”™è¯¯çš„æ‰©æ•£æƒ…å†µï¼Œç„¶åæ±‚å€¼ã€‚ä»FIPS192çŸ¥é“ï¼Œæœ€åä¸‰è½®çš„è¿‡ç¨‹å¤§çº¦ä¸ºï¼š SubBytes ShiftRows MixColumns AddRoundKey $K_8$ SubBytes ShiftRows MixColumns AddRoundKey $K_9$ SubBytes ShiftRows AddRoundKey $K_{10}$ ç”±äºæ•…éšœæ’å…¥ä½äºä¸¤æ¬¡MixColumnä¹‹é—´ï¼Œæ‰€ä»¥åªæœ‰ä¸€è½®MixColumnä¼šè¢«æ‰§è¡Œã€‚æœ€ç»ˆè¿™ä¸ªé”™è¯¯ä¼šè¢«æ‰©æ•£åˆ°4ä¸ªå­—èŠ‚ä¸Šã€‚ä¸ºæ–¹ä¾¿è®¨è®ºï¼Œæˆ‘ä»¬åœ¨ç¬¬9è½®çš„MixColumnå‰æ’å…¥æ•…éšœï¼Œè§‚å¯Ÿå…¶æ‰©æ•£æƒ…å†µã€‚ä»¥æ’å…¥æ•…éšœçš„è¿è¡Œè¿‡ç¨‹ä¸ºå®éªŒç»„ï¼Œä¸æœªæ’å…¥æ•…éšœçš„è¿è¡Œä¸ºå¯¹ç…§ç»„ã€‚æ’å…¥æ•…éšœ$X$ã€‚æ’å…¥å‰åçš„å¯¹æ¯”ï¼š$$\\begin{pmatrix} A &amp; E &amp; I &amp; M \\\\ B &amp; F &amp; J &amp; N \\\\ C &amp; G &amp; K &amp; O \\\\ D &amp; H &amp; L &amp; P \\end{pmatrix} \\text{å’Œ} \\begin{pmatrix} X &amp; E &amp; I &amp; M \\\\ B &amp; F &amp; J &amp; N \\\\ C &amp; G &amp; K &amp; O \\\\ D &amp; H &amp; L &amp; P \\end{pmatrix}$$åœ¨æ­¤ä¹‹åï¼Œå®éªŒç»„ï¼ˆæ’å…¥æ•…éšœç»„ï¼‰ä¸å¯¹ç…§ç»„å°†ä¼šåŒæ ·è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š MixColumns AddRoundKey $K_9$ SubBytes ShiftRows AddRoundKey $K_{10}$ Mixcolumnåï¼š$$\\begin{pmatrix} 2A+3B+C+D &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ A+2B+3C+D &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ A+B+2C+3D &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ 3A+B+C+2D &amp; \\cdots &amp; \\cdots &amp; \\cdots \\end{pmatrix} \\text{and} \\begin{pmatrix} 2X+3B+C+D &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ X+2B+3C+D &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ X+B+2C+3D &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ 3X+B+C+2D &amp; \\cdots &amp; \\cdots &amp; \\cdots \\end{pmatrix}$$åŠ å…¥ç¬¬9è½®å¯†é’¥ï¼š$$\\begin{pmatrix} 2A+3B+C+D+K_{9,0} &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ A+2B+3C+D+K_{9,1} &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ A+B+2C+3D+K_{9,2} &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ 3A+B+C+2D+K_{9,3} &amp; \\cdots &amp; \\cdots &amp; \\cdots \\end{pmatrix} \\text{and} \\begin{pmatrix} 2X+3B+C+D+K_{9,0} &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ X+2B+3C+D+K_{9,1} &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ X+B+2C+3D+K_{9,2} &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ 3X+B+C+2D+K_{9,3} &amp; \\cdots &amp; \\cdots &amp; \\cdots \\end{pmatrix}$$ SubBytes:$$\\begin{pmatrix} S(2A+3B+C+D+K_{9,0}) &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ S(A+2B+3C+D+K_{9,1}) &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ S(A+B+2C+3D+K_{9,2}) &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ S(3A+B+C+2D+K_{9,3}) &amp; \\cdots &amp; \\cdots &amp; \\cdots \\end{pmatrix} \\text{and} \\begin{pmatrix} S(2X+3B+C+D+K_{9,0}) &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ S(X+2B+3C+D+K_{9,1}) &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ S(X+B+2C+3D+K_{9,2}) &amp; \\cdots &amp; \\cdots &amp; \\cdots \\\\ S(3X+B+C+2D+K_{9,3}) &amp; \\cdots &amp; \\cdots &amp; \\cdots \\end{pmatrix}$$ ShiftRows:$$\\begin{pmatrix} S(2A+3B+C+D+K_{9,0}) \\qquad \\cdots \\qquad \\cdots \\qquad \\cdots \\\\ \\cdots \\qquad \\cdots \\qquad \\cdots \\qquad S(A+2B+3C+D+K_{9,1})\\\\ \\cdots \\qquad \\cdots \\qquad S(A+B+2C+3D+K_{9,2}) \\qquad \\cdots \\\\ \\cdots \\qquad S(3A+B+C+2D+K_{9,3}) \\qquad \\cdots \\qquad \\cdots \\end{pmatrix}\\\\ \\text{and} \\\\\\begin{pmatrix} S(2X+3B+C+D+K_{9,0}) \\qquad \\cdots \\qquad \\cdots \\qquad \\cdots \\\\ \\cdots \\qquad \\cdots \\qquad \\cdots \\qquad S(X+2B+3C+D+K_{9,1})\\\\ \\cdots \\qquad \\cdots \\qquad S(X+B+2C+3D+K_{9,2}) \\qquad \\cdots \\\\ \\cdots \\qquad S(3X+B+C+2D+K_{9,3}) \\qquad \\cdots \\qquad \\cdots \\end{pmatrix}$$ AddRoundKey $K_{10}$:$$\\begin{pmatrix} S(2A+3B+C+D+K_{9,0})+K_{10,0} \\qquad \\cdots \\qquad \\cdots \\qquad \\cdots \\\\ \\cdots \\qquad \\cdots \\qquad \\cdots \\qquad S(A+2B+3C+D+K_{9,1})+K_{10,13}\\\\ \\cdots \\qquad \\cdots \\qquad S(A+B+2C+3D+K_{9,2})+K_{10,10} \\qquad \\cdots \\\\ \\cdots \\qquad S(3A+B+C+2D+K_{9,3})+K_{10,7} \\qquad \\cdots \\qquad \\cdots \\end{pmatrix}\\\\ \\text{and}\\\\ \\begin{pmatrix} S(2X+3B+C+D+K_{9,0})+K_{10,0} \\qquad \\cdots \\qquad \\cdots \\qquad \\cdots \\\\ \\cdots \\qquad \\cdots \\qquad \\cdots \\qquad S(X+2B+3C+D+K_{9,1})+K_{10,13}\\\\ \\cdots \\qquad \\cdots \\qquad S(X+B+2C+3D+K_{9,2})+K_{10,10} \\qquad \\cdots \\\\ \\cdots \\qquad S(3X+B+C+2D+K_{9,3})+K_{10,7} \\qquad \\cdots \\qquad \\cdots \\end{pmatrix}$$ Soï¼Œæœªä¿®æ”¹è¿‡çš„ç»“æœä¸º$O_0$, ä¿®æ”¹è¿‡çš„ç»“æœä¸º$O_0â€™$ã€‚(ç¬¬0ä¸ªå­—èŠ‚ï¼Œä¸º0)$$O_0 = S(2A+3B+C+D+K_{9,0})+K_{10,0} \\\\O_0â€™ = S(2X+3B+C+D+K_{9,0})+K_{10,0}$$ ä½œå·®ï¼šï¼ˆ$GF(2^8)$ï¼ŒåŠ å³ä¸ºå‡ï¼‰ $$O_0 + Oâ€™_0 = S(2A+3B+C+D+K_{9,0})+K_{10,0} + S(2X+3B+C+D+K_{9,0})+K_{10,0} \\\\O_0 + Oâ€™_0 = S(2A+3B+C+D+K_{9,0}) + S(2X+3B+C+D+K_{9,0})$$ åœ¨åæ’çš„Sboxæ“ä½œæ„é€ ä¸¤ä¸ª$2A$:$$O_0 + Oâ€™_0 = S(2A+3B+C+D+K_{9,0}) + S(2X+\\mathbf{2A+2A}+3B+C+D+K_{9,0})$$ å°±å¯ä»¥å¾—åˆ°ï¼š$$Y_0=2A+3B+C+D+K_{9,0}\\\\Z=A+X$$åŸå¼è½¬æ¢ä¸ºï¼š$$O_0 + Oâ€™_0 = S(Y_0) + S(2Z+Y_0)$$å…¶ä»–è¢«å½±å“çš„å­—èŠ‚ä¹Ÿç±»ä¼¼ï¼š$$O_7 + Oâ€™_7 = S(Y_1) + S(3Z+Y_1) \\\\Y_1 = 3A+B+C+2D+K_{9,3} \\\\O_{10} + Oâ€™_{10} = S(Y_2) + S(Z+Y_2) \\\\Y_2 = A+B+2C+3D+K_{9,2} \\\\O_{13} + Oâ€™_{13} = S(Y_3) + S(Z+Y_3) \\\\Y_3 = A+2B+3C+D+K_{9,1} \\\\$$è¿™4ä¸ªç­‰å¼è”ç«‹ã€‚é’ˆå¯¹Zï¼Œåªæœ‰ç»™å®šçš„æ•…éšœé›†åˆ$x\\in X$æ‰èƒ½è”ç«‹ã€‚é’ˆå¯¹ç»™å®šçš„æ•…éšœXï¼Œå­˜åœ¨ä¸€ä¸ªæ±‚Kè§£é›†ã€‚å¤šæ¬¡æ’å…¥ä¸åŒæ•…éšœï¼Œæœ€åæ±‚å¾—äº¤é›†ï¼Œå°±æ˜¯æ‰€éœ€è¦çš„å•ä¸€å€¼ã€‚ é—®é¢˜æ³¨å…¥ç‚¹é—®é¢˜ä»¥chowâ€™s implementationä¸ºä¾‹ã€‚å¦‚æœæ‰€æœ‰çš„è¡¨è¢«é›†æˆèµ·æ¥ï¼Œé‚£å°±æ— æ³•åŒºåˆ†å‡ºå“ªé‡Œæ˜¯MixColumnäº†ã€‚æ— æ³•ä»MixColumnæ³¨å…¥ã€‚ä½†æ˜¯ï¼Œæ ¹æ®Dusart et alçš„è¯´æ˜ï¼Œåªè¦æ³¨å…¥ç‚¹åœ¨ä¸¤è½®MixColumnä¹‹é—´ï¼Œå°±å¯ä»¥å®Œæˆã€‚å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œä½œè€…è²åˆ©æ™®Â·åæ¸©ç”¨äº†å¯¹key fileè¿›è¡Œæ³¨å…¥çš„æ–¹æ³•æ¥é¿å¼€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½œè€…å¹¶æ²¡æœ‰ç›´æ¥æŠŠæ³¨å…¥ä½œç”¨äºäºŒè¿›åˆ¶ã€‚å®ƒé’ˆå¯¹çš„åœ°å€ç©ºé—´æ˜¯æ–‡ä»¶çš„åœ°å€ç©ºé—´ã€‚é€šè¿‡æ”¹å†™å…¶ä¸­çš„ä¸€äº›å­—èŠ‚ï¼Œå®ç°é™æ€æ³¨å…¥ã€‚ å€˜è‹¥æ˜¯ä»ç¬¬8è½®å®Œæ¯•çš„stateå¼€å§‹è¿›è¡Œæ³¨å…¥ï¼Œ åˆå§‹çŠ¶æ€ï¼š$$\\left(\\begin{matrix}A &amp; E &amp; I &amp; M\\\\B &amp; F &amp; J &amp; N\\\\C &amp; G &amp; K &amp; O\\\\D &amp; H &amp; L &amp; P\\end{matrix}\\right)$$ SubBytes:$$\\left(\\begin{matrix}S{\\left(A \\right)} &amp; S{\\left(E \\right)} &amp; S{\\left(I \\right)} &amp; S{\\left(M \\right)}\\\\S{\\left(B \\right)} &amp; S{\\left(F \\right)} &amp; S{\\left(J \\right)} &amp; S{\\left(N \\right)}\\\\S{\\left(C \\right)} &amp; S{\\left(G \\right)} &amp; S{\\left(K \\right)} &amp; S{\\left(O \\right)}\\\\S{\\left(D \\right)} &amp; S{\\left(H \\right)} &amp; S{\\left(L \\right)} &amp; S{\\left(P \\right)}\\end{matrix}\\right)$$ ShiftRows:$$\\left(\\begin{matrix}S{\\left(A \\right)} &amp; S{\\left(E \\right)} &amp; S{\\left(I \\right)} &amp; S{\\left(M \\right)}\\\\S{\\left(F \\right)} &amp; S{\\left(J \\right)} &amp; S{\\left(N \\right)} &amp; S{\\left(B \\right)}\\\\S{\\left(K \\right)} &amp; S{\\left(O \\right)} &amp; S{\\left(C \\right)} &amp; S{\\left(G \\right)}\\\\S{\\left(P \\right)} &amp; S{\\left(D \\right)} &amp; S{\\left(H \\right)} &amp; S{\\left(L \\right)}\\end{matrix}\\right)$$ Mixcolumns:$$\\left(\\begin{matrix}K_{9} + 2 S{\\left(A \\right)} + 3 S{\\left(F \\right)} + S{\\left(K \\right)} + S{\\left(P \\right)} &amp; â€¦ &amp; â€¦ &amp; â€¦ \\\\ K_{9} + S{\\left(A \\right)} + 2 S{\\left(F \\right)} + 3 S{\\left(K \\right)} + S{\\left(P \\right)} &amp; â€¦ &amp; â€¦ &amp; â€¦\\\\ â€¦ &amp; â€¦ &amp; â€¦ &amp; â€¦ \\\\ â€¦ &amp; â€¦ &amp; â€¦ &amp; â€¦\\end{matrix}\\right)$$è¿™å°±æ˜¯State 9.ç®€å•å¸¦è¿‡ä¸€ä¸‹ï¼Œfinal stateçš„state[0]ä¸ºï¼š$$K_{10} + S{\\left(K_{9} + 2 S{\\left(A \\right)} + 3 S{\\left(F \\right)} + S{\\left(K \\right)} + S{\\left(P \\right)} \\right)}\\\\K_{10} + S{\\left(K_{9} + 2 S{\\left(X \\right)} + 3 S{\\left(F \\right)} + S{\\left(K \\right)} + S{\\left(P \\right)} \\right)}$$ä¸¤å¼ç›¸å‡ï¼š$$S{\\left(K_{9} + 2 S{\\left(A \\right)} + 3 S{\\left(F \\right)} + S{\\left(K \\right)} + S{\\left(P \\right)} \\right)} + S{\\left(K_{9} + 2 S{\\left(X \\right)} + 3 S{\\left(F \\right)} + S{\\left(K \\right)} + S{\\left(P \\right)} \\right)}$$è®¾ï¼š$$Y_0 = K_9 + 2S(A)+ 3 S(F) + S(K) + S(P) \\\\Z = S(A) + S(X)$$ åŒæ ·åœ°ï¼Œå¯¹å…¶ä»–çŠ¶æ€æ¨å¯¼ï¼Œåªæœ‰ç¬¦åˆç‰¹å®šæ¡ä»¶çš„$S(X)$æ‰èƒ½ä½¿å¾—æ‰©æ•£çš„4ä¸ªç­‰å¼è”ç«‹ã€‚ å¯¹WBAC-AESçš„å½±å“å†…ç¼–ç å¤±æ•ˆä»¥chowâ€™s implementationä¸ºä¾‹ï¼ŒåŒ…æ‹¬encodingå’ŒMixing Bijectionsã€‚åœ¨encodingæ–¹é¢ï¼š$$Tâ€™ = g \\circ T \\circ f^{-1}$$å¯¹æ­¤ç±»ç™½ç›’å®ç°çš„æ³¨å…¥ï¼Œç›¸å½“äºå¯¹lookup-tableçš„æ³¨å…¥ã€‚ä¿®æ”¹lookup-tableçš„ä¸€ä¸ªå­—èŠ‚ï¼Œå…¶ä½œç”¨ä¹Ÿå¯ä»¥åœ¨æœ€åçš„ç»“æœåæ˜ å‡ºæ¥ã€‚è¿™å¹¶ä¸å½±å“ä»¥ä¸Šæè¿°çš„æ³¨å…¥æ–¹å¼ã€‚ TODO åŒè·¯å†—ä½™çš„DFA ç­‰æ•ˆè½®çš„DFA","link":"/2019/07/20/wbac_dfa/"},{"title":"æ´›è°·P2803ï¼šå¸¦æƒä¸­ä½æ•°çš„æ€è€ƒ","text":"å¸¦æƒä¸­ä½æ•°æ˜¯CSPï¼ˆNOIPï¼‰çš„ä¸€ä¸ªå¸¸è§é—®é¢˜ã€‚åˆ©ç”¨åŠ¨æ€è§„åˆ’çš„æ–¹æ³•å¯»æ‰¾æœ€ä½³è½å€ã€‚å…¶ä¸­æ¨¡æ¿ä¸ºé‚®å±€é€‰å€é—®é¢˜ï¼ˆpost-office location problemï¼‰ã€‚è¿™ç±»é—®é¢˜æœ‰å„ç§å„æ ·çš„è¡ç”Ÿã€‚è¿™é‡Œæˆ‘ä»¬è®¨è®ºä¸€é“ç®€å•çš„å˜å½¢ï¼šæ´›è°·2803ï¼Œå°å­¦ç”Ÿä¸å°å­¦é€‰å€ã€‚ åŸé¢˜ç›®åœ¨æ´›è°·P2803ã€‚ æ•°å­¦ç‰¹æ€§æ ¹æ®åŸé¢˜ï¼Œè™½ç„¶å­¦æ ¡å¯ä»¥å»ºåœ¨æ‰€æœ‰æ¥¼ä¹‹é—´çš„ä»»æ„ä¸€å¤„ï¼Œä½†å¯ä»¥è¯æ˜ï¼Œå¯¹äºåŒºé—´$[A, B]$ä¸­çš„ä¸€æ‰€å°å­¦ï¼Œä»…å½“å°å­¦ä½äºæŸä¸€æ¥¼çš„ä½ç½®ä¸Šï¼Œè·ç¦»æ˜¯æœ€è¿‘çš„ã€‚è¿™ä¸ªå‡è®¾å¯é€šè¿‡çŸ›ç›¾æ¥è¯æ˜ã€‚å‡è®¾åœ¨ä¸¤æ ‹æ¥¼çš„åŒºé—´$[A, B]$ï¼Œæ‹¥æœ‰å­¦æ ¡Pï¼Œå°†æ‰€æœ‰çš„å­¦ç”Ÿè¿çº¿åˆ°è¿™æ‰€å­¦æ ¡ã€‚å‘å·¦ç§»åŠ¨çš„è¿çº¿ä¸ºæ–¹å‘ï¼Œå‘å³ç§»åŠ¨çš„è¿çº¿ä¸ºæ­£å‘ï¼Œæ€»é•¿åº¦ä¸º$P$ã€‚æ¥¼$A$æœ‰$a$äººï¼Œæ¥¼$B$æœ‰$b$äºº:1A -- --&gt; B è®¾ï¼Œæœ‰å¦ä¸€æ‰€å°å­¦åœ¨ä¸¤æ ‹æ¥¼ä¹‹é—´ï¼Œæ‰€æœ‰å­¦ç”Ÿåˆ°è¯¥å°å­¦çš„æ€»è·¯ç¨‹ä¸º$Pâ€™$ã€‚è®¾è¿™æ‰€å°å­¦ä»$A$å‡ºå‘ï¼Œæ­£å‘ï¼ˆå‘å³ï¼‰è·ç¦»ä¸º$L$ï¼Œåˆ™ï¼š $$Pâ€™ = P + L * a - L * b$$ è‹¥$a &lt; b$ï¼Œåˆ™å¿…æœ‰å‘å·¦ç§»åŠ¨åˆ°æ¥¼å®‡$A$ï¼Œä½¿å¾—$Pâ€™$æ›´å°ï¼› è‹¥$a &gt; b$ï¼Œå¿…æœ‰å‘å³ç§»åŠ¨åˆ°æ¥¼å®‡$B$ï¼Œä½¿å¾—$Pâ€™$æ›´å°ï¼› $a = b$ï¼Œä¸ç®¡ç§»åŠ¨åˆ°Aæˆ–Bï¼Œéƒ½ä¸åŠ£ã€‚ äºæ˜¯å¾—åˆ°ç»“è®ºï¼šå¯¹äºæ¥¼å®‡åŒºé—´$[A, B]$ï¼Œä»…å½“å­¦æ ¡å¤„åœ¨æŸä¸€æ¥¼å®‡å¤„ï¼Œæ‰€å¾—çš„è·ç¦»æœ€çŸ­ã€‚ æ¨è®ºå› ä¸ºå¯¹äºæ¯ä¸ªå°å­¦ç”Ÿï¼Œä»–ä»¬éƒ½éœ€è¦èµ°ä¸€å®šçš„è·¯ç¨‹åˆ°å­¦æ ¡ã€‚å¯¹äºæ‹¥æœ‰$a$äººçš„æ¥¼$A$ï¼Œåˆ°å­¦æ ¡è·ç¦»ä¸º$D$ï¼Œæ‰€æœ‰å°å­¦ç”Ÿéœ€è¦èµ°çš„æ€»è·¯ç¨‹ä¸º$a * D$ã€‚æ˜¾ç„¶ï¼Œæˆ‘ä»¬å¯å°†æ¯æ ‹æ¥¼çš„å°å­¦ç”Ÿæ•°é‡è®¾ç½®ä¸ºè¯¥ç‚¹çš„æƒå€¼ã€‚ å‡è®¾å­¦æ ¡å»ºè®¾åœ¨æ¥¼Aï¼Œå…¶åŠ æƒè·ç¦»ä¸º$P$ã€‚åˆ™å¯ä»¥é€šè¿‡æ­¤è·ç¦»æ¨ç®—å…¶ä»–ç‚¹çš„è·ç¦»ï¼Œä»¥æ‰¾åˆ°åŒºé—´$[A, B]$é—´çš„æœ€ä¼˜è§£ï¼š123456for (int mid = j + 1; mid &lt;= i; mid++) { // p for every position between A, B p = p + distance(mid - 1, mid) * weight(mid - 1, j) - distance(mid - 1, mid) * weight(i, mid); if (min &lt; p) min = p;} æ¨è®º 2æ ¹æ®ä¸Šè¿°ä»£ç ï¼Œå¯çŸ¥ï¼šå½“ç¬¬ä¸€ä¸ªä½ç½®ï¼ŒAåˆ°Päººæ•°&gt;=Påˆ°Bäººæ•°æ—¶ï¼Œæ­¤å¤„ä¸ºæœ€ä½³ä½ç½®ã€‚ï¼ˆpæœ€å°ï¼‰ ä»£ç è¿‡ç¨‹ å¤„ç†è¾“å…¥ï¼Œç´¯è®¡å„ç‚¹çš„ä½ç½®å’Œæƒå€¼ã€‚-&gt; weight[i]ï¼Œdis[i]å¦‚ï¼šæƒå€¼ä¸ºï¼š24ï¼Œ18ï¼Œ32åˆ™ï¼šç´¯è®¡ä¸ºï¼š24ï¼Œ42ï¼Œ74è·ç¦»ä¸ºï¼š10ï¼Œ 8ç´¯è®¡ä¸ºï¼š0ï¼Œ 10ï¼Œ 18 è®°å¿†åŒ–æœç´¢ä»»æ„æ¥¼å®‡åŒºé—´$[i, j]$ æ‰¾åˆ°åŒºé—´iï¼Œjä¹‹é—´çš„æƒå€¼ä¸­å€¼ ç®—è¿™æ®µåŒºé—´çš„è·ç¦»æ€»é•¿p ç®€å•çš„èƒŒåŒ…é—®é¢˜æ”¹ç‰ˆï¼Œæ”¾å­¦æ ¡ or ä¸æ”¾å­¦æ ¡ï¼Ÿ å‡è®¾næ ‹æ¥¼é…å¤‡äº† &gt;n çš„å­¦æ ¡ï¼Œåˆ™è·ç¦»ä¸º0 è‹¥næ ‹æ¥¼é…å¤‡äº†1æ‰€å­¦æ ¡ï¼Œåˆ™è·Ÿ2è®¡ç®—çš„ç»“æœç›¸ç­‰ è‹¥å¯¹äºåŒºé—´$[a, b]$ï¼Œç®—å¾—æœ€ä½³ç»“æœdp[a][b]ï¼Œä¸”ä»…å‰©ä¸€æ‰€å­¦æ ¡è·Ÿä¸€ä¸ªåŒºé—´ï¼Œåˆ™åŠ ä¸Šè¿™ä¸ªåŒºé—´çš„æœ€å°æƒå€¼ä¸­å€¼ å¯å¾—ï¼Œè¿™é“é¢˜ç”¨äº†DPï¼Œé¦–å…ˆæœç´¢æœ€ä½³ä½ç½®ï¼Œç„¶åæ”¾å­¦æ ¡ã€‚ ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394#include &lt;cmath&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;iostream&gt;#define MAX 105#define itn int#define INF 0x7fffffffint n, k;int dis[MAX];int weight[MAX];int best_sit[MAX][MAX];int dp[MAX][MAX];// calculate the distance between buildingsint distance(int a, int b) { return abs(dis[a] - dis[b]); }// calculate weight sum between buildingsint num(int a, int b) { int i = a, j = b; if (a &gt; b) { i = b; j = a; } return weight[j] - weight[i - 1];}int main() { using namespace std; ios::sync_with_stdio(); cin &gt;&gt; n &gt;&gt; k; memset(dp, 0, sizeof dp); memset(dis, 0, sizeof dis); memset(weight, 0, sizeof weight); memset(best_sit, 0, sizeof best_sit); for (int i = 1; i &lt;= n; i++) { int tmp; cin &gt;&gt; tmp; weight[i] = weight[i - 1] + tmp; } for (int i = 2; i &lt;= n; i++) { int tmp; cin &gt;&gt; tmp; dis[i] = dis[i - 1] + tmp; } int mid = 0; // ç®—çˆ†æ¯ä¸ªåŒºé—´ä»…æœ‰ä¸€åº§å­¦æ ¡çš„æƒ…å†µ for (int i = 1; i &lt;= n; i++) { for (int j = 1; j &lt;= i; j++) { for (mid = j; mid &lt;= i; mid++) { if (num(j, mid) &gt;= num(mid + 1, i)) break; } if (mid &gt; i) mid = i; int p = 0; for (int l = j; l &lt;= i; l++) { p = p + distance(mid, l) * num(l, l); } best_sit[j][i] = p; } } // æ±‚ i æ ‹æ¥¼ï¼Œj æ‰€å­¦æ ¡æƒ…å†µä¸‹çš„æœ€ä¼˜å­ç»“æ„ for (int i = 1; i &lt;= n; i++) { for (int j = 1; j &lt;= k; j++) { if (j &gt;= i) dp[i][j] = 0; else if (j == 1) dp[i][j] = best_sit[1][i]; else { int min = INF; for (int l = 1; l &lt;= i; l++) { int tmp = dp[l - 1][j - 1] + best_sit[l][i]; if (tmp &lt; min) min = tmp; } dp[i][j] = min; } } } cout &lt;&lt; dp[n][k] &lt;&lt; endl; return 0;}","link":"/2020/01/25/weighted_medium/"},{"title":"å…³äºä¸ªäººå°ç«™çš„é‡å»º","text":"&emsp;&emsp;ä¸ªäººå°ç«™åˆæ‰“èµ·æ¥äº†ï¼Œå…¶å®ä¹‹å‰çš„åŸŸå ping1008.me å¯èƒ½æ›´åŠ æœ‰ç”¨äº›ã€‚ç„¶è€Œç”±äºæ“ä½œçš„å¤±è¯¯ï¼Œä¸€ä¸å°å¿ƒæŠŠç«™ç‚¹ä¸€è‚¡è„‘å„¿ç«¯æ‰äº†ã€‚è€Œä¸”è¿™ä¸€æ¬¡åªç”¨äº†hexoå¸ƒè®¾ï¼Œéƒ¨ç½²åœ¨netlifyä¸­ã€‚ &emsp;&emsp;è¯„è®ºç”¨äº†gitalkã€‚å°ä¼—ï¼Œä½†æ˜¯éå¸¸å¥½ç”¨ã€‚è€Œä¸”ç®¡ç†æ˜¯å…¬å¼€çš„ã€‚å¤§å®¶å¯ä»¥å»ç›¸åº”çš„repoçœ‹ã€‚ &emsp;&emsp;ä¹Ÿåªæ˜¯æƒ³åˆ°ï¼Œä¸€æ¥æˆ‘ä¸å¸¸å†™åšæ–‡ï¼Œè€Œæ¥ä¸å¸¸ç®¡ç†ã€‚åº”è¯¥ä¸ç”¨æ€ä¹ˆç»´æŠ¤ç½¢ã€‚233 &emsp;&emsp;å¦å¤–ï¼Œåˆ†äº«ä¸€ä¸ªåšæœäº‘çš„é“¾æ¥ã€‚æ³¨å†Œç”¨æˆ·å¯ä»¥æŸ¥çœ‹ã€‚é‡Œé¢æœ‰å¯èƒ½ä½ éœ€è¦çš„ä¹¦ç±ã€‚Here Update: æ›´æ–°ï¼š è‡ªæœ‰å¤–é“¾ï¼šHere ç¥å¤§å®¶çœ‹å¾—æ„‰å¿«ã€‚ï¼šï¼‰","link":"/2017/08/10/å…³äºä¸ªäººå°ç«™çš„é‡å»º/"},{"title":"ç®€æ³¨ - A Tutorial on White-box AES","text":"ç™½ç›’å¯†ç æ˜¯å¯¹éå¯ä¿¡å¹³å°ä¸‹çš„å¯†ç ç®—æ³•å®‰å…¨å®ç°çš„ç ”ç©¶ã€‚å…¶é’ˆå¯¹å¯†ç å­¦ç®—æ³•åœ¨éå¯ä¿¡å¹³å°è®¾è®¡å®ç°ï¼Œä½¿å¾—è½¯ä»¶ï¼ˆæ•°å­—å†…å®¹ï¼‰åœ¨å…·æœ‰å®Œå…¨æ“æ§ï¼ˆdebuggerï¼Œassemblerï¼‰æƒ…å†µä¸‹è·å¾—å®‰å…¨ä¿æŠ¤ã€‚è®ºæ–‡[^1]ç®€è¦ä»‹ç»AESåœ¨ç™½ç›’æ”»å‡»ç¯å¢ƒ (White-box Attack Context) ä¸‹AESçš„ä¸€ç§å®ç°æ–¹å¼åŠå…¶å¯†ç å­¦åˆ†æã€‚ ç®€ä»‹ç™½ç›’å¯†ç å­¦ (White-box Cryptography) æ„å›¾è®¾è®¡ç‰¹å®šå®ç°ï¼Œä½¿å¾—è½¯ä»¶ã€æ•°å­—èµ„æºç­‰åœ¨ä¸å®‰å…¨ï¼ˆéå—ä¿¡ä»»ï¼‰çš„ç¯å¢ƒä¸‹ä¿æŠ¤è½¯ä»¶ã€èµ„æºçš„å®‰å…¨ã€‚ç™½ç›’å¯†ç è®¾è®¡åˆ†æä¸åŒäºåƒä»£ç æ··æ·†[^2][^3]ã€æ§åˆ¶æµæ··æ·†è¿™æ ·çš„åé€†å‘å·¥ç¨‹æœºåˆ¶ï¼Œå®ƒæ˜¯çº¯ç²¹é’ˆå¯¹ç®—æ³•å®‰å…¨æ€§è¿›è¡Œè®¾è®¡ä¸åˆ†æ[^4]ã€‚å‡ ä¹æ‰€æœ‰çš„ç™½ç›’å¯†ç å­¦è®¾è®¡éƒ½é’ˆå¯¹å¯¹ç§°åŠ å¯†ç®—æ³•ï¼ŒAESçš„è®¾è®¡å°±æ˜¯å…¸å‹ä¹‹ä¸€ã€‚æœ€åˆçš„ç™½ç›’AESã€DESç”±S. Chowï¼Œet.al å®ç°[^5]ï¼Œåæ¥è¯¥ç®—æ³•è¢«æ”»ç ´ã€‚éšåä¸åŒçš„å­¦è€…ä¹Ÿç›¸ç»§å‘æ˜äº†å„ç§WBACä¸‹çš„å®ç°ã€‚æ ¹æ®Alex, et.al å¯¹ç™½ç›’çš„æ—¶é—´è¿›è¡Œäº†åˆ†ç±»ï¼šå¼ºç™½ç›’è®¾è®¡ä¸å¼±ç™½ç›’è®¾è®¡[^7]ã€‚å¼±ç™½ç›’è®¾è®¡è¦æ±‚ç®—æ³•å®ç°èƒ½ä¿æŠ¤å¯†é’¥ä¸å¯è¢«å‘ç°ä¸æ¨å¯¼ï¼Œä¿æŠ¤å¯†é’¥ä¸å—å¯†é’¥æ¢å¤æ”»å‡»(key recovery attack)ã€‚è¿™ç§å®ç°å¯¹äºæŸ¥è¡¨çš„é€†å‘æ¨å¯¼ç†è®ºä¸Šæ˜¯ä¸å¯é˜²æŠ¤çš„ã€‚å¼ºç™½ç›’è®¾è®¡è¦æ±‚è§£å¯†å™¨ä¸å¯ä»åŠ å¯†å™¨æ¨å¯¼ï¼Œi.e.,plaintext-recovery attackã€‚chowçš„å®ç°æ˜¯ç™½ç›’çš„å¼€ç¯‡ï¼Œåº”è¯¥å½’ç±»ä¸ºå¼±ç™½ç›’å®ç°ã€‚ AESä¸çŸ©é˜µæŸ¥è¡¨æ“ä½œAESæ‹¥æœ‰4ä¸ªå˜æ¢ï¼šè½®é’¥åŠ  (AddRoundKey)ã€è¡Œå˜æ¢ (ShiftRows)ã€åˆ—æ··æ·† (MixColumns)ã€å­—èŠ‚æ›¿æ¢ (SubBytes)[^6]ã€‚è¿™äº›æ“ä½œéƒ½å¯ä»¥å½’ç»“ä¸ºæŸ¥è¡¨æ“ä½œã€‚æŸ¥è¡¨æ“ä½œçš„å¯é€†è½¬æ€§æ˜¯éå¸¸å¼ºçš„ï¼Œå¾ˆå®¹æ˜“å¾—åˆ°åŸç”Ÿç»“æœã€‚å…¶ä¸­ï¼Œè¡Œå˜æ¢æ˜¯çº¿æ€§çš„ï¼Œè·Ÿè½®é’¥åŠ å¯ä»¥è¿›è¡Œä½ç½®ä¸Šçš„æ›¿æ¢ã€‚åªè¦å…ˆå¯¹åŸæœ‰çŸ©é˜µè¿›è¡Œè¡Œå˜æ¢ï¼Œç„¶åå¼‚æˆ–è¡Œå˜æ¢è¿‡çš„è½®å¯†é’¥ï¼Œè¿™æ ·è¿™ä¸¤ä¸ªæ“ä½œè·ŸåŸæœ‰è®¾è®¡ç»“æœä¸Šæ²¡æœ‰å·®åˆ«ã€‚å…¶æ¬¡æˆ‘ä»¬å¯ä»¥æŠŠç¬¬ä¸€è½®å¼‚æˆ–åŠ å…¥åˆ°å¾ªç¯ä¸­ï¼Œæœ€åä¸€è½®å¼‚æˆ–ç§»å‡ºå¾ªç¯ã€‚è¿™ç§æ•°å­¦ä¸Šçš„æ­£ç¡®æ€§æœ‰åˆ©äºæˆ‘ä»¬å¯¹AESæŸ¥è¡¨æ“ä½œ (table lookup) æ€§è´¨çš„è§£æã€‚å¾—åˆ°çš„ç»“æœï¼š 1234567891011state &lt;- plaintextfor r = 1 to 9: ShiftRows(state) AddRoundKey(state, k1[r-1]) SubBytes(state) MixColumns(state)ShiftRows(state)AddRoundKey(state, k1[9])SubBytes(state)AddRoundKey(state, k1[10])ciphertext &lt;- state å…¶ä¸­ï¼Œk1[r-1]æ˜¯è¿›è¡Œè¡Œå˜æ¢è¿‡çš„è½®å¯†é’¥ã€‚ ä¸Šè¿°ç®—æ³•æè¿°ä¸­ï¼ŒAddRoundKey å’Œ SubBytes å¯ä»¥å¯¹åŸæœ‰çš„S-Boxåˆå¹¶ï¼š T-boxes$$T^r_i(x) = S(x \\oplus k1_{r-1}[i]), (i = 0â€¦15, r=1â€¦9)$$ $$T^{10}_i(x) = S(x \\oplus k1_9[i]) \\oplus k1_{10}[i], (i = 0â€¦15)$$ è¿™åˆå«AddRoundKey SubBytesæ„æˆçš„ $T-boxes$ï¼Œå…¶ä¸­xä»£è¡¨ä¸€ä¸ª4x4çŸ©é˜µä¸­çš„ä¸€ä¸ªå­—èŠ‚ï¼Œiä»£è¡¨ç¬¬0ï½15ä¸ªå­—èŠ‚ï¼Œræ˜¯è½®æ¬¡ï¼ŒSæ˜¯S-Boxçš„æŸ¥è¡¨æ“ä½œã€‚æ¯è½®16ä¸ªè¡¨ï¼Œä¸€å…±160è¡¨ã€‚ï¼ˆçŸ©é˜µå˜æ¢ï¼‰ã€‚ MixColumnsæ¨å¯¼æˆï¼š $T_{y_{i}}$ è¡¨åˆ—æ··æ·†æ˜¯çº¯ç²¹æŸ¥è¡¨å˜æ¢ã€‚å°†æ··æ·†çŸ©é˜µä½œç”¨äº4x4çŠ¶æ€çš„æ¯ä¸€åˆ—ã€‚MixColumnsè¡¨ï¼š$$MC = \\begin{bmatrix} 02 &amp; 03 &amp; 01 &amp; 01 \\\\ 01 &amp; 02 &amp; 03 &amp; 01 \\\\ 01 &amp; 01 &amp; 02 &amp; 03 \\\\ 03 &amp; 01 &amp; 01 &amp; 02 \\end{bmatrix}$$åˆ—æ··æ·†æ“ä½œä¸ºæ··æ·†çŸ©é˜µMCå·¦ä¹˜çŠ¶æ€çŸ©é˜µä¸­çš„æ¯ä¸€åˆ—ï¼Œå¯¹å…¶è¿›è¡Œè¡Œå˜æ¢ï¼š$$\\begin{bmatrix} 02 &amp; 03 &amp; 01 &amp; 01 \\\\ 01 &amp; 02 &amp; 03 &amp; 01 \\\\ 01 &amp; 01 &amp; 02 &amp; 03 \\\\ 03 &amp; 01 &amp; 01 &amp; 02 \\end{bmatrix} \\begin{bmatrix} x_0 \\\\ x_1 \\\\ x_2 \\\\ x_3 \\end{bmatrix}$$å…¶ä¸­$x_i$æ˜¯ä¸€åˆ—ä¸­çš„ä¸€ä¸ªå­—èŠ‚ã€‚ è¿™ç­‰åŒäºMCä¸­æ¯ä¸€åˆ—åœ¨x$ä¸‹$çš„çº¿æ€§ç»„åˆ:$$MC \\begin{bmatrix} x_0 \\\\ x_1 \\\\ x_2 \\\\ x_3 \\end{bmatrix} = x_0 \\begin{bmatrix} 02 \\\\ 01 \\\\ 01 \\\\ 03 \\end{bmatrix} \\oplus x_1 \\begin{bmatrix} 03 \\\\ 02 \\\\ 01 \\\\ 01 \\end{bmatrix} \\oplus x_2 \\begin{bmatrix} 01 \\\\ 02 \\\\ 02 \\\\ 01 \\end{bmatrix} \\oplus x_3 \\begin{bmatrix} 01 \\\\ 01 \\\\ 03 \\\\ 02 \\end{bmatrix}$$ å°†æ¯ä¸ªå­—èŠ‚çš„æ±‚ç§¯æ‹†è§£ï¼Œå³ä¸ºå¦‚ä¸‹å˜æ¢ç›¸å¼‚æˆ–ï¼š$$T_{y_0} (x) = x \\cdot \\begin{bmatrix} 02 &amp; 01 &amp; 01 &amp; 03 \\end{bmatrix} ^T \\\\T_{y_1}(x) = x \\cdot \\begin{bmatrix} 03 &amp; 02 &amp; 01 &amp; 01 \\end{bmatrix} ^T$$ æ­¤å¤„çš„entry xï¼Œå¯¹åº”ç€$x_0, x_1, x_2â€¦$ã€‚å‰©ä¸‹çš„å¥½æ¨ã€‚ æœ€åç»“æœåº”è¯¥ä¸ºï¼š$$T_{y_0}(x_0) \\oplus T_{y_1}(x_1) \\oplus T_{y_2}(x_2) \\oplus T_{y_3}(x_3)$$ è¿™é‡Œï¼Œ XOR è¡¨ä¹Ÿæ˜¯éœ€è¦çš„ã€‚$$XOR(x, y) = x \\oplus y$$è¿™é‡Œé‡‡ç”¨4æ¯”ç‰¹è¡¨ï¼Œå³xã€yä¸º4æ¯”ç‰¹ã€‚ï¼ˆä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšè¿˜ä¸å¤ªæ¸…æ¥šï¼Œä¹Ÿè®¸8æ¯”ç‰¹è¡¨å¤ªå¤§ï¼Ÿï¼‰åˆ™æ¯ä¸€åˆ—éœ€è¦32/4 = 8ä¸ªXORè¡¨ï¼ŒæŠŠ$T_{y_i}$è¡¨å˜æ¢æ¥çš„4ä¸ª32ä½å­—å¼‚æˆ–æˆ32ä½çš„æœ€ç»ˆç»“æœã€‚ æˆ‘ä»¬æŠŠå‰ä¸¤ä¸ªè¡¨åˆå¹¶ï¼Œ$f \\circ g = f(g(x))$ å°±å¾—åˆ°TBoxesTyiTablesã€‚ æœ€åç®—æ³•å˜æˆè¿™æ ·ï¼š12345678state &lt;- plaintextfor r = 1 to 9: ShiftRows TBoxesTyiTables XORTablesShiftRowsTboxesciphertext &lt;- state è‡³æ­¤ï¼Œæ‰€æœ‰çš„AESçŸ©é˜µæ“ä½œå½’ç»“ä¸ºæŸ¥è¡¨æ“ä½œã€‚è€ŒæŸ¥è¡¨æ“ä½œæ˜¯ä¸€å¯¹ä¸€çš„ï¼Œåœ¨è¿è¡Œå…¨è¿‡ç¨‹å¯è¢«ç›‘æ§çš„æƒ…å†µä¸‹ï¼Œè½®å¯†é’¥å¾ˆå®¹æ˜“è¢«æ¨å¯¼ã€‚ ç–‘æƒ‘ å†…å­˜ä¸­ä¸ç›´æ¥æš´éœ²è½®å¯†é’¥å—ï¼ˆè½®å¯†é’¥ä¸åº”è¯¥å­˜åœ¨äºå†…å­˜ä¸­å—ï¼‰ï¼Ÿ ä¸ï¼ŒDRMçš„åŠ è§£å¯†æ“ä½œä¸­ï¼Œå†…å­˜ä¸­åªæœ‰ç›¸å…³çš„è¡¨ï¼Œä»¥æ­¤å®ç°åŠ å¯†è§£å¯†ã€‚å¹¶éè£¸å¯†é’¥ï¼ˆè½®å¯†é’¥ï¼‰è¿›è¡Œã€‚å¦‚è§OpenWhiteBoxä¸­ï¼Œè¢«åºåˆ—åŒ–ä¸è¢«è§£æçš„æ˜¯ä¸åŒçš„è¡¨ï¼Œåœ¨persistance.goä¸­ã€‚key.txtå…¶å®æ˜¯è¡¨çš„äºŒè¿›åˆ¶è¡¨ç¤ºã€‚å…¶ä¸­ä¸åŒ…å«ä»»ä½•çš„å¯†é’¥çš„åŸå§‹çŠ¶æ€è¡¨ç¤ºã€‚å¯†é’¥è¢«æ··åˆåœ¨è¡¨ä¸­ã€‚ ä¸ºä»€ä¹ˆåŸç”ŸAES-128ä¸å®‰å…¨ï¼Ÿ è½®å¯†é’¥åªè¦æœ‰ä¸€è½®æ³„æ¼ï¼Œå°±å¯ä»¥æ¨å¯¼å‡ºæ•´ä¸ªå¯†é’¥ã€‚æ ¹æ®æˆ‘ä»¬çš„è®¾å®šï¼ŒåŸç”ŸAESä¸­æ¯ä¸€è½®éƒ½å¯ä»¥å¾—åˆ°ä»»ä½•è¯»å†™ä¸­é—´ç»“æœã€‚å‡è®¾$a$æ˜¯ç¬¬ä¸€è½®å¯†é’¥ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œé‚£ä¹ˆä»…æœ‰256ç§æšä¸¾æ–¹å¼ï¼Œå¯å‘æ•°æ®å…¥å£æ’å…¥é”™è¯¯ ï¼Œä¾‹å¦‚0x00000000ï¼Œåªè¦æšä¸¾ï¼Œæˆ–è€… $a = S^{-1}\\circ T_{y_0}^{-1}\\circ (T_{y_0} \\circ T^1_0)(0)$ï¼Œ$S$å·²çŸ¥ï¼Œ$T_{y_0}^{-1}$å¯æ±‚ï¼Œè¿™æ ·å°±å¯å¾—åˆ°è¿™ä¸ªå­—èŠ‚ã€‚è¿™æ ·4x4éƒ½å‡ºæ¥ï¼ŒåŸç”Ÿå¯†é’¥å°±éƒ½å‡ºç°äº†ã€‚ ä¿æŠ¤æ€§å®ç°é’ˆå¯¹AESçš„ç™½ç›’å®‰å…¨ä¿æŠ¤ï¼Œè‡ª02å¹´æ¥æœ‰å¾ˆå¤šå®ç°ã€‚github.com/OpenWhiteBox/AESä¸­æœ‰å„ç§å®ç°ä¸å¯†ç åˆ†æã€‚æ–‡[^ 1]æè¿°äº†æœ€åˆå§‹çš„å®ç°ï¼šchowâ€˜s implementationã€‚ chowçš„å®ç°ä»¥è¾“å…¥è¾“å‡ºç¼–ç (input and output encoding)ã€mixing bijectionsçš„æ–¹å¼æ¥ä¿æŠ¤AESåœ¨WBACä¸‹çš„å®‰å…¨ã€‚è¿™ä¹Ÿæ˜¯è®¸å¤šå˜ç§è®¾è®¡è¿‡ç¨‹ä¸­ä½¿ç”¨çš„æ€è·¯ã€‚ Encodings Mixing Bijections EncodingsEncodings æ„å›¾ç»™åŸç”Ÿçš„è¡¨åŠ ä¸Šå†…/å¤–çš„ä¿æŠ¤ï¼Œä½¿å¾—åœ¨AESåšçŸ©é˜µå˜æ¢çš„æ—¶å€™ï¼Œå¹¶ä¸ç›´æ¥åœ°äº§ç”Ÿè£¸ç»“æœã€‚è¿™å¯ä»¥ä½¿å¾—ç–‘æƒ‘2æ¡ä»¶ä¸æˆç«‹ã€‚è¿™æ˜¯ç”¨æ¥ä¿æŠ¤TboxTyiTableçš„ã€‚å‡è®¾åŸç”Ÿçš„$T-Box/T_{y_i}$è¡¨ä¸º$T$, ç°åœ¨ä»¥$f$ä¸ºè¾“å…¥ç¼–ç ï¼Œ$g$ä¸ºè¾“å‡ºç¼–ç ï¼Œæ„å»º$$Tâ€™ = g \\circ T \\circ f^{-1}$$å†…ç¼–ç ä¸æš´éœ²çš„æƒ…å†µä¸‹ï¼Œæ”»å‡»è€…æ— æ³•ä»ä¸€è½®ä¸­çš„ä¸­é—´æ•°æ®å¾—åˆ°ç›¸åº”çš„æ˜ å°„ã€‚æˆ–è€…è¯´ï¼Œæ”»å‡»è€…æ²¡æœ‰åŠæ³•ä»è¿™ä¸ª$Tâ€™$ä¸­è·å¾—å…³äºTçš„ä¿¡æ¯ã€‚è€ƒè™‘éçº¿æ€§$f$å¯¹4æ¯”ç‰¹(one nibble)æ•°æ®è¿›è¡Œencodingï¼Œå¹¶é‡‡ç”¨concatçš„å½¢å¼è”åˆï¼š$$f(x_0 || x_1) = f_1(x_0) || f_2(x_1),\\ x_i\\ is\\ a\\ nibble$$è®¾è¿™ç§encodingä¸º$O$ã€‚$OT$æ²¡æœ‰æ³„æ¼ä»»ä½•å…³äº$T$çš„ä¿¡æ¯ã€‚4æ¯”ç‰¹å¯ä»¥äº§ç”Ÿ$16!$ç§ä¸é‡å¤çš„æ•°å€¼å˜æ¢ã€‚å¯¹åº”åœ°ï¼Œæ¯ä¸ªå­—èŠ‚å°±æ˜¯$(16!)^2$ç§encodingã€‚è‹¥åŠ ä¸Šoutput encoding, åˆ™ä¸º$(16!)^2 (16!)^8$ã€‚è¿™æšä¸¾æ˜¯éå¸¸å›°éš¾çš„ã€‚å¯¹äºç›®æ ‡Tè¡¨ï¼Œä»¥åŠä»»æ„éç›®æ ‡çš„$Tâ€™$è¡¨ï¼Œéƒ½å­˜åœ¨ä¸€ä¸ªéçº¿æ€§æ˜ å°„$Oâ€™$, ä½¿å¾—$Oâ€™Tâ€™ = OT$ã€‚çˆ†ç ´ç†è®ºä¸Šæ˜¯ä¸å¯è¡Œçš„ã€‚ å¦å¤–ï¼Œè¿™ç§encodingæ˜¯å¯ä»¥è¢«networkedçš„ã€‚ä¸åŒçš„è¡¨å¯ä»¥è¢«ä¸²è”èµ·æ¥ã€‚è¿™ä½¿å¾—å†…éƒ¨çš„æ¨å¯¼ä¼šæ›´éš¾ã€‚åœ¨Github.com/OpenWhiteBox/AES/çš„chowå®ç°ä¸­ï¼š12345678910// tyiEncoding encodes the output of a T-Box/Tyi Table / the input of a HighXORTable.//// All randomness is derived from the random source; round is the current round; position is the byte-wise position in// the state matrix being stretched; subPosition is the nibble-wise position in the Word table's output.func tyiEncoding(rs *random.Source, round, position, subPosition int) encoding.Nibble { label := make([]byte, 16) label[0], label[1], label[2], label[3] = 'T', byte(round), byte(position), byte(subPosition) return rs.Shuffle(label)} å¯¹Tè¡¨çš„encodingå°±æ˜¯4æ¯”ç‰¹çš„ã€‚ åœ¨æ–‡[^ 1]çš„å›¾é‡Œï¼Œæ˜¯ä¸åŒ…å«äº†encodingéƒ¨åˆ†çš„ã€‚åœ¨è¿›è¡Œåˆ†æçš„æ—¶å€™æˆ‘ä»¬æœ‰æ„æŠ¹å»äº†encodingï¼Œå› ä¸ºencodingçš„å®‰å…¨æ€§æ¥è‡ªäºå¤–éƒ¨ã€‚è¿™ä¸æ˜¯ç®—æ³•å®‰å…¨æ€§åˆ†æçš„èŒƒç•´ã€‚ Mixing BijectionsMixing Bijectionsæ˜¯åŠ å¯†è¿‡ç¨‹ä¸­å¢åŠ çš„ä¸€ä¸ªçº¿æ€§å˜æ¢ã€‚ç”¨äºå¯¹TboxTyiTableçš„æ‰©æ•£ã€‚encoding å®ç°äº†å¯¹å¯†é’¥çš„æ··æ·†ï¼Œæ¯ä¸€è½®ä¸­æ’å…¥çš„Mixing Bijectionsåˆ™å¼ºåŒ–äº†å¯†é’¥çš„æ‰©æ•£ã€‚è¢«éšæœºé€‰æ‹©çš„Mixing Bijectionå˜æ¢éƒ½èƒ½å¤Ÿæé«˜AESåŸç”Ÿè¡¨çš„å¤æ‚æ€§ã€‚ä½œç”¨åœ¨ä»£ç ä¸­è€¦åˆï¼Œä¼šä½¿å¾—æŸ¥è¡¨ç¯èŠ‚æ— æ³•ä»TboxTyiTableçš„æ±‚è§£ä¾èµ–äºæ··å…¥åŒå°„å˜æ¢çŸ©é˜µMBã€‚æ ¹æ®chowçš„å®ç°ï¼Œé€‰æ‹©ä¸€ä¸ªGF(2)å†…çš„å¯é€†çŸ©é˜µMBï¼Œäºæ˜¯æˆ‘ä»¬æ˜¯è¿™æ ·æ„é€ çš„ã€‚ ç”±äºç¬¬ä¸€è½®ï¼Œåœ¨è¾“å…¥çš„æ—¶å€™ä¸ºæ˜æ–‡/å¯†æ–‡ï¼Œè¿™ä¸€è½®åº”è¯¥ç”¨ä¸‹æ–‡æåŠçš„å¤–éƒ¨ç¼–ç ï¼ˆexternal encodingï¼‰æ¥å¤„ç†ã€‚è¿™ä¸€è½®çš„è¾“å…¥ç«¯ä¸è¿›è¡ŒåŒå°„æ··åˆã€‚ ç¬¬2åˆ°10è½®ï¼Œé€‰æ‹©8æ¯”ç‰¹åˆ°8æ¯”ç‰¹çš„å˜æ¢çŸ©é˜µï¼Œé™„åŠ åœ¨Tè¡¨è¾“å…¥ä¹‹å‰ã€‚ 1ï½9è½®ï¼Œåœ¨Tè¡¨çš„è¾“å‡ºç«¯åŠ ä¸Š32-bitåˆ°32-bitçš„æ˜ å°„ã€‚ åŸæ¥çš„TboxTyiTableè¡¨ï¼š$$T_{y_0}\\circ T^2_0 \\\\T_{y_1}\\circ T^2_1 \\\\T_{y_2}\\circ T^2_2 \\\\T_{y_3}\\circ T^2_3 \\\\$$ ç°åœ¨çš„$Tâ€™$è¡¨ï¼š$$MB \\circ T_{y_0}\\circ T^2_0 \\circ {L^2_0}^{-1}\\ (1) \\\\MB \\circ T_{y_1}\\circ T^2_1 \\circ {L^2_1}^{-1}\\\\â€¦.$$$L$æ˜¯8-bitåˆ°8-bitçš„è¾“å…¥mixing bijection, MBæ˜¯32 -&gt; 32çš„è¾“å‡ºmixing bijectionã€‚è¿™äº›è¡¨çš„æœ€ç»ˆç»“æœè¢«XORèµ·æ¥ã€‚ä¸ºäº†ä¸‹ä¸€è½®è®¡ç®—å¯ä»¥è¿›è¡Œï¼Œ(1)ä¸­$MB$çš„æ•ˆæœéœ€è¦è¢«å»é™¤ï¼Œè€Œéœ€è¦åŠ ä¸Š$L$ã€‚$MB^{-1}$ä½œç”¨äºï¼ˆ1ï¼‰äº§ç”Ÿçš„32bitç»“æœï¼Œç„¶åç»™æ¯ä¸€ä¸ªå­—èŠ‚ä½œç”¨ä¸Š$L^3$ï¼ˆæ­¤å¤„ä¸ºç¬¬ä¸‰è½®ï¼Œæ‰€ä»¥ä¸º$L^3$ï¼‰ï¼Œåˆ™ç»“æœå¯ä¾›ç»™ä¸‹ä¸€è½®è¿›è¡Œã€‚æ‰€ä»¥ï¼ŒMixing Bijectionçš„è¿è¡Œè¿‡ç¨‹æ˜¯ï¼Œ 8bit$L{-1}$ä½œç”¨äºè¾“å…¥$I$ï¼Œå¾—åˆ°$I_1$ TboxTyiTableä½œç”¨äº$I_1$ï¼Œå¾—åˆ°32bitå€¼ å°†4ä¸ª32bitå€¼XORï¼Œå¾—åˆ°ä¸­é—´å€¼$I_2$ 32bitçš„$I_2$æ¯ä¸ªå­—èŠ‚è¢«$MB^{-1}$ä½œç”¨å¾—åˆ°32bitä¸­é—´å€¼ï¼Œç„¶åè¢«32-&gt;32$L$è¿›è¡ŒMixing Bijection 4ä¸ª32bitå€¼XORæˆä¸€ä¸ª32bitï¼Œæˆä¸ºä¸‹ä¸€è½®çš„state å¤–éƒ¨ç¼–ç ä¸ºäº†é˜²æ­¢è£¸ï¼ˆrawï¼‰çš„æ˜æ–‡åˆ°å¯†æ–‡ï¼Œæˆ–å¯†æ–‡åˆ°æ˜æ–‡çš„æ˜ å°„ï¼Œä»¥ä¿æŠ¤åŠ å¯†/è§£å¯†å™¨åœ¨ç‰¹å®šç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œå¯ä»¥ç»™åŠ å¯†/è§£å¯†å™¨åŠ ä¸Šç‰¹å®šçš„å¤–éƒ¨ç¼–ç ã€‚å‡å®šåŸæ¥çš„è§£å¯†å™¨ä¸º$D_k$ï¼Œåˆ™æ„å»º$$Dâ€™_k = G \\circ D_k \\circ F^{-1}$$$F$æ˜¯è¾“å…¥ç¼–ç ï¼Œ$G$æ˜¯è¾“å‡ºç¼–ç ã€‚è¿™ç§æ–¹å¼åœ¨ç‰¹å®šæ¡ä»¶ä¸‹å¯ä»¥ä¿æŠ¤DFAæ”»å‡»[^ 4]ã€‚ [^1]: James A. Muir, A Tutorial on White-box AES[^2]: S. Bhatkar, D. C. DuVarney, R. Sekar, Address obfuscation: an efficient approach to combat a broad range of memory error exploits, in Proceedings of the 12th USENIX Security Symposium. USENIX Association (2003)[^3]: C. Linn, S.K. Debray. Obfuscation of executable code to improve resistance to static disassembly, in S. Jajodia, V. Atluri, and T. Jaeger, editors, Proceedings of the 10th ACM Conference on Computer and Communications Security, CCS 2003. ACM (2003), pp. 290â€“299[^4]: White-Box Cryptography: Donâ€™t Forget About Grey-Box Attacks[^5]: WHITE-BOX CRYPTOGRAPHY AND AN AES IMPLEMENTATION[^6]: è¯¦è§CANSv7[^7]: Biryukov A, Bouillaguet C, Khovratovich D. Cryptographic schemes based on the ASASA structure: black-box, white-box, and public-key[C]. In: Advances in Cryptologyâ€”ASIACRYPT 2014. Springer Berlin Heidelberg, 2014: 63â€“84.[^10]: https://gongzheng.github.io/","link":"/2019/07/05/wbac_tutorial/"}],"tags":[{"name":"Data Structure","slug":"Data-Structure","link":"/tags/Data-Structure/"},{"name":"Algorithms","slug":"Algorithms","link":"/tags/Algorithms/"},{"name":"crypto","slug":"crypto","link":"/tags/crypto/"},{"name":"ç½‘ç›˜ç³»ç»Ÿ","slug":"ç½‘ç›˜ç³»ç»Ÿ","link":"/tags/ç½‘ç›˜ç³»ç»Ÿ/"},{"name":"Nginx","slug":"Nginx","link":"/tags/Nginx/"},{"name":"æ°´è´§è½¯æ–‡","slug":"æ°´è´§è½¯æ–‡","link":"/tags/æ°´è´§è½¯æ–‡/"},{"name":"HAProxy","slug":"HAProxy","link":"/tags/HAProxy/"},{"name":"test","slug":"test","link":"/tags/test/"},{"name":"åæ ‡æ‹¾å–","slug":"åæ ‡æ‹¾å–","link":"/tags/åæ ‡æ‹¾å–/"},{"name":"DFS","slug":"DFS","link":"/tags/DFS/"},{"name":"LeetCode","slug":"LeetCode","link":"/tags/LeetCode/"},{"name":"å‘å‘å°ç™«","slug":"å‘å‘å°ç™«","link":"/tags/å‘å‘å°ç™«/"},{"name":"åŠ¨æ€è§„åˆ’","slug":"åŠ¨æ€è§„åˆ’","link":"/tags/åŠ¨æ€è§„åˆ’/"},{"name":"ftp","slug":"ftp","link":"/tags/ftp/"},{"name":"lab","slug":"lab","link":"/tags/lab/"},{"name":"computer system","slug":"computer-system","link":"/tags/computer-system/"},{"name":"homework","slug":"homework","link":"/tags/homework/"}],"categories":[{"name":"CLRS","slug":"CLRS","link":"/categories/CLRS/"},{"name":"CS:APP","slug":"CS-APP","link":"/categories/CS-APP/"},{"name":"LeetCode","slug":"LeetCode","link":"/categories/LeetCode/"},{"name":"æ–‡å­¦æ‚æ„Ÿ","slug":"æ–‡å­¦æ‚æ„Ÿ","link":"/categories/æ–‡å­¦æ‚æ„Ÿ/"},{"name":"Cryptography","slug":"Cryptography","link":"/categories/Cryptography/"},{"name":"c++","slug":"c","link":"/categories/c/"},{"name":"miscellaneous","slug":"miscellaneous","link":"/categories/miscellaneous/"},{"name":"Test Page","slug":"Test-Page","link":"/categories/Test-Page/"},{"name":"python","slug":"python","link":"/categories/python/"},{"name":"Huawei","slug":"Huawei","link":"/categories/Huawei/"},{"name":"Algorithms","slug":"Algorithms","link":"/categories/Algorithms/"},{"name":"networking","slug":"networking","link":"/categories/networking/"}]}